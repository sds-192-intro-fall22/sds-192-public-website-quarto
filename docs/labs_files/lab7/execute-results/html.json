{
  "hash": "af53ed06fa334ec0b03031e7291067a0",
  "result": {
    "markdown": "---\ntitle: \"Lab 7: Tidying Data\"\nauthor: \"Lindsay Poirier\"\nbibliography: ../IntroDS.bib\nformat:\n  html:\n    code-fold: false\n    df-print: paged\nexecute: \n  echo: true\nknitr:\n  opts_chunk: \n    message: false\n    warning: false\neditor: source\n---\n\n\n## Introduction\n\nIn this lab, we will create a few data visualizations documenting point-in-time counts of homelessness in the United States. Specifically, we are going visualize data collected in 2020 through various Continuums of Care (CoCs) programs. In order to produce these data visualizations, you will need to join homelessness data with census population data and develop and execute a plan for how to wrangle the dataset into a \"tidy\" format. \n\n### Learning Goals\n\n-   Recognize the differences between tidy and non-tidy data\n-   Pivot datasets both longer and wider\n-   Separate and unite columns\n-   Consider the ethical implications of analyzing homeless counts\n\n## Review of Key Terms\n\n::: callout-tip\nYou may wish to reference this [Tidy R Cheatsheet](https://raw.githubusercontent.com/rstudio/cheatsheets/main/tidyr.pdf) when completing this lab.\n:::\n\nTidy data\n\n:   A rectangular data table in which every row is an observation and every column is a variable describing something about that observation\n\nPivoting\n\n:   Rotating data columns so that they are presented as rows or rotating data rows so that they are presented as columns\n\n\n## HUD's Point-in Time Counts\n\nThe U.S. Department of Housing and Urban Development is responsible for monitoring and addressing housing affordability and homelessness throughout the country. One initiative that they oversee towards this end is the Continuum of Care Program. Continuums of Care (CoCs) are local planning organizations responsible for allocating resources and coordinating services to address homelessness in the United States. Every state has a number of CoCs that report to the Department of Housing and Urban Development.\n\nEvery year, on a single night in the last 10 days of January, CoCs required to conduct a \"point-in-time\" count of sheltered and unsheltered homeless individuals. To generate the sheltered point-in-time count, CoCs coordinate with transitional housing centers or emergency shelters to record the number of people housed in that location on the selected night. There are a few different approaches to generating an unsheltered point-in-time count:\n\n1. \"Night of\" street count: Volunteers are sent out to canvass either the entire geography of a random sample of areas in a CoC. While canvassing, they are expected to record the number of people they see currently residing in spaces not designed for sleeping accommodations. \n\n2. Service-based count: In the 7 days following the night of the designated PIT count, volunteers are dispatched to food kitchens, shelters, libraries and other services identified as spaces that unhoused individuals frequent. There, they are expected to survey individuals to determine if they were sheltered on the night of the count. \n\nFollowing the night of the count, the collected data points are shipped off to HUD where they are aggregated into the dataset we will be working with today. \n\nThere are a number of limitations to this approach of estimating homelessness, which I encourage you to consider throughout this analysis and when responding to our Ethical Considerations question. \n\n## Setting Up Your Environment\n\n1. Run the code below to load today's data frames into your environment. \n\n\n::: {.cell document='show'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\npit <- read_csv(\"https://raw.githubusercontent.com/sds-192-intro-fall22/sds-192-public-website-quarto/main/website/data/pit_2015_2020.csv\") \n\n#Note for future reference how adding the following could remove unreliable counts:\n# mutate_at(vars(2:97), funs(case_when(. < 20 ~ as.numeric(NA), TRUE ~ .)))\n\ngender <- read_csv(\"https://raw.githubusercontent.com/sds-192-intro-fall22/sds-192-public-website-quarto/main/website/data/gender_state_2015_2020.csv\")\nrace <- read_csv(\"https://raw.githubusercontent.com/sds-192-intro-fall22/sds-192-public-website-quarto/main/website/data/race_state_2015_2020.csv\")\n```\n:::\n\n\n## Our Goal\n\nToday's goal is to produce just two plots:\n\n- A timeseries of rates of both sheltered and unsheltered homelessness by gender for a given state. \n- A timeseries of rates of both sheltered and unsheltered homelessness by race for a given state. \n\nThe first plot will look like this:\n\n![](../img/homeless_gender_fl_plot.png)\n\n...and the second plot will look like this. \n\n![](../img/homeless_race_fl_plot.png)\n\nTo be able to produce these plots, we are going to have to do considerable amount of data wrangling and cleaning. This lab will walk you through those steps. \n\n## Data Cleaning\n\nFirst, let's consider each of our data frames. You have `pit`, which documents homelessness counts from 2015 to 2020 in each state along a number of categories (such as gender, race, sheltered vs. unsheltered, etc.). Note how in this data frame each row is a state, and each variable is a count associated with a particular category. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Sheltered Total Homeless - Female, 2015\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Male, 2015\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Transgender, 2015\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - White, 2015\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Black or African American, 2015\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Asian, 2015\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - American Indian or Alaska Native, 2015\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Native Hawaiian or Other Pacific Islander, 2015\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Multiple Races, 2015\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Female, 2015\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Male, 2015\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Transgender, 2015\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - White, 2015\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Black or African American, 2015\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Asian, 2015\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - American Indian or Alaska Native, 2015\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Native Hawaiian or Other Pacific Islander, 2015\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Multiple Races, 2015\"],\"name\":[19],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Female, 2016\"],\"name\":[20],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Male, 2016\"],\"name\":[21],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Transgender, 2016\"],\"name\":[22],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - White, 2016\"],\"name\":[23],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Black or African American, 2016\"],\"name\":[24],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Asian, 2016\"],\"name\":[25],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - American Indian or Alaska Native, 2016\"],\"name\":[26],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Native Hawaiian or Other Pacific Islander, 2016\"],\"name\":[27],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Multiple Races, 2016\"],\"name\":[28],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Female, 2016\"],\"name\":[29],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Male, 2016\"],\"name\":[30],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Transgender, 2016\"],\"name\":[31],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - White, 2016\"],\"name\":[32],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Black or African American, 2016\"],\"name\":[33],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Asian, 2016\"],\"name\":[34],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - American Indian or Alaska Native, 2016\"],\"name\":[35],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Native Hawaiian or Other Pacific Islander, 2016\"],\"name\":[36],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Multiple Races, 2016\"],\"name\":[37],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Female, 2017\"],\"name\":[38],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Male, 2017\"],\"name\":[39],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Transgender, 2017\"],\"name\":[40],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Gender Non-Conforming, 2017\"],\"name\":[41],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - White, 2017\"],\"name\":[42],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Black or African American, 2017\"],\"name\":[43],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Asian, 2017\"],\"name\":[44],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - American Indian or Alaska Native, 2017\"],\"name\":[45],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Native Hawaiian or Other Pacific Islander, 2017\"],\"name\":[46],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Multiple Races, 2017\"],\"name\":[47],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Female, 2017\"],\"name\":[48],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Male, 2017\"],\"name\":[49],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Transgender, 2017\"],\"name\":[50],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Gender Non-Conforming, 2017\"],\"name\":[51],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - White, 2017\"],\"name\":[52],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Black or African American, 2017\"],\"name\":[53],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Asian, 2017\"],\"name\":[54],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - American Indian or Alaska Native, 2017\"],\"name\":[55],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Native Hawaiian or Other Pacific Islander, 2017\"],\"name\":[56],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Multiple Races, 2017\"],\"name\":[57],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Female, 2019\"],\"name\":[58],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Male, 2019\"],\"name\":[59],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Transgender, 2019\"],\"name\":[60],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Gender Non-Conforming, 2019\"],\"name\":[61],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - White, 2019\"],\"name\":[62],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Black or African American, 2019\"],\"name\":[63],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Asian, 2019\"],\"name\":[64],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - American Indian or Alaska Native, 2019\"],\"name\":[65],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Native Hawaiian or Other Pacific Islander, 2019\"],\"name\":[66],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Multiple Races, 2019\"],\"name\":[67],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Female, 2019\"],\"name\":[68],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Male, 2019\"],\"name\":[69],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Transgender, 2019\"],\"name\":[70],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Gender Non-Conforming, 2019\"],\"name\":[71],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - White, 2019\"],\"name\":[72],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Black or African American, 2019\"],\"name\":[73],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Asian, 2019\"],\"name\":[74],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - American Indian or Alaska Native, 2019\"],\"name\":[75],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Native Hawaiian or Other Pacific Islander, 2019\"],\"name\":[76],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Multiple Races, 2019\"],\"name\":[77],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Female, 2020\"],\"name\":[78],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Male, 2020\"],\"name\":[79],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Transgender, 2020\"],\"name\":[80],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Gender Non-Conforming, 2020\"],\"name\":[81],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - White, 2020\"],\"name\":[82],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Black or African American, 2020\"],\"name\":[83],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Asian, 2020\"],\"name\":[84],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - American Indian or Alaska Native, 2020\"],\"name\":[85],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Native Hawaiian or Other Pacific Islander, 2020\"],\"name\":[86],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sheltered Total Homeless - Multiple Races, 2020\"],\"name\":[87],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Female, 2020\"],\"name\":[88],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Male, 2020\"],\"name\":[89],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Transgender, 2020\"],\"name\":[90],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Gender Non-Conforming, 2020\"],\"name\":[91],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - White, 2020\"],\"name\":[92],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Black or African American, 2020\"],\"name\":[93],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Asian, 2020\"],\"name\":[94],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - American Indian or Alaska Native, 2020\"],\"name\":[95],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Native Hawaiian or Other Pacific Islander, 2020\"],\"name\":[96],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unsheltered Homeless - Multiple Races, 2020\"],\"name\":[97],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"694\",\"3\":\"943\",\"4\":\"2\",\"5\":\"625\",\"6\":\"132\",\"7\":\"17\",\"8\":\"714\",\"9\":\"59\",\"10\":\"92\",\"11\":\"79\",\"12\":\"238\",\"13\":\"0\",\"14\":\"120\",\"15\":\"12\",\"16\":\"1\",\"17\":\"169\",\"18\":\"3\",\"19\":\"12\",\"20\":\"649\",\"21\":\"846\",\"22\":\"3\",\"23\":\"577\",\"24\":\"135\",\"25\":\"41\",\"26\":\"555\",\"27\":\"51\",\"28\":\"139\",\"29\":\"159\",\"30\":\"281\",\"31\":\"2\",\"32\":\"162\",\"33\":\"12\",\"34\":\"3\",\"35\":\"231\",\"36\":\"2\",\"37\":\"32\",\"38\":\"689\",\"39\":\"857\",\"40\":\"4\",\"41\":\"1\",\"42\":\"534\",\"43\":\"132\",\"44\":\"20\",\"45\":\"630\",\"46\":\"67\",\"47\":\"168\",\"48\":\"76\",\"49\":\"218\",\"50\":\"0\",\"51\":\"0\",\"52\":\"107\",\"53\":\"15\",\"54\":\"0\",\"55\":\"140\",\"56\":\"2\",\"57\":\"30\",\"58\":\"683\",\"59\":\"943\",\"60\":\"6\",\"61\":\"2\",\"62\":\"546\",\"63\":\"152\",\"64\":\"32\",\"65\":\"656\",\"66\":\"72\",\"67\":\"176\",\"68\":\"78\",\"69\":\"194\",\"70\":\"0\",\"71\":\"1\",\"72\":\"121\",\"73\":\"12\",\"74\":\"4\",\"75\":\"108\",\"76\":\"1\",\"77\":\"27\",\"78\":\"768\",\"79\":\"950\",\"80\":\"3\",\"81\":\"4\",\"82\":\"538\",\"83\":\"133\",\"84\":\"22\",\"85\":\"779\",\"86\":\"39\",\"87\":\"214\",\"88\":\"60\",\"89\":\"164\",\"90\":\"0\",\"91\":\"0\",\"92\":\"96\",\"93\":\"4\",\"94\":\"0\",\"95\":\"111\",\"96\":\"1\",\"97\":\"12\"},{\"1\":\"AL\",\"2\":\"1192\",\"3\":\"1747\",\"4\":\"4\",\"5\":\"1430\",\"6\":\"1470\",\"7\":\"5\",\"8\":\"12\",\"9\":\"1\",\"10\":\"25\",\"11\":\"340\",\"12\":\"680\",\"13\":\"7\",\"14\":\"383\",\"15\":\"620\",\"16\":\"0\",\"17\":\"7\",\"18\":\"0\",\"19\":\"17\",\"20\":\"1331\",\"21\":\"1558\",\"22\":\"4\",\"23\":\"1244\",\"24\":\"1535\",\"25\":\"3\",\"26\":\"40\",\"27\":\"6\",\"28\":\"65\",\"29\":\"402\",\"30\":\"808\",\"31\":\"8\",\"32\":\"470\",\"33\":\"716\",\"34\":\"1\",\"35\":\"9\",\"36\":\"2\",\"37\":\"20\",\"38\":\"964\",\"39\":\"1684\",\"40\":\"5\",\"41\":\"3\",\"42\":\"1095\",\"43\":\"1448\",\"44\":\"8\",\"45\":\"14\",\"46\":\"1\",\"47\":\"90\",\"48\":\"350\",\"49\":\"769\",\"50\":\"16\",\"51\":\"2\",\"52\":\"492\",\"53\":\"616\",\"54\":\"1\",\"55\":\"7\",\"56\":\"0\",\"57\":\"21\",\"58\":\"999\",\"59\":\"1068\",\"60\":\"3\",\"61\":\"0\",\"62\":\"845\",\"63\":\"1138\",\"64\":\"4\",\"65\":\"34\",\"66\":\"6\",\"67\":\"43\",\"68\":\"384\",\"69\":\"805\",\"70\":\"0\",\"71\":\"2\",\"72\":\"535\",\"73\":\"603\",\"74\":\"3\",\"75\":\"21\",\"76\":\"3\",\"77\":\"26\",\"78\":\"913\",\"79\":\"1081\",\"80\":\"2\",\"81\":\"0\",\"82\":\"850\",\"83\":\"1121\",\"84\":\"2\",\"85\":\"15\",\"86\":\"6\",\"87\":\"47\",\"88\":\"381\",\"89\":\"907\",\"90\":\"7\",\"91\":\"4\",\"92\":\"612\",\"93\":\"634\",\"94\":\"0\",\"95\":\"22\",\"96\":\"5\",\"97\":\"26\"},{\"1\":\"AR\",\"2\":\"693\",\"3\":\"985\",\"4\":\"0\",\"5\":\"1045\",\"6\":\"536\",\"7\":\"5\",\"8\":\"25\",\"9\":\"28\",\"10\":\"39\",\"11\":\"285\",\"12\":\"597\",\"13\":\"0\",\"14\":\"498\",\"15\":\"367\",\"16\":\"2\",\"17\":\"7\",\"18\":\"1\",\"19\":\"7\",\"20\":\"772\",\"21\":\"843\",\"22\":\"1\",\"23\":\"990\",\"24\":\"525\",\"25\":\"8\",\"26\":\"14\",\"27\":\"7\",\"28\":\"72\",\"29\":\"275\",\"30\":\"572\",\"31\":\"0\",\"32\":\"461\",\"33\":\"369\",\"34\":\"2\",\"35\":\"7\",\"36\":\"1\",\"37\":\"7\",\"38\":\"581\",\"39\":\"691\",\"40\":\"1\",\"41\":\"0\",\"42\":\"756\",\"43\":\"441\",\"44\":\"4\",\"45\":\"13\",\"46\":\"6\",\"47\":\"53\",\"48\":\"384\",\"49\":\"808\",\"50\":\"2\",\"51\":\"0\",\"52\":\"691\",\"53\":\"451\",\"54\":\"5\",\"55\":\"11\",\"56\":\"1\",\"57\":\"35\",\"58\":\"615\",\"59\":\"683\",\"60\":\"3\",\"61\":\"1\",\"62\":\"789\",\"63\":\"431\",\"64\":\"3\",\"65\":\"26\",\"66\":\"8\",\"67\":\"45\",\"68\":\"407\",\"69\":\"1005\",\"70\":\"1\",\"71\":\"2\",\"72\":\"862\",\"73\":\"471\",\"74\":\"1\",\"75\":\"10\",\"76\":\"16\",\"77\":\"55\",\"78\":\"436\",\"79\":\"653\",\"80\":\"3\",\"81\":\"1\",\"82\":\"599\",\"83\":\"438\",\"84\":\"2\",\"85\":\"22\",\"86\":\"10\",\"87\":\"22\",\"88\":\"362\",\"89\":\"908\",\"90\":\"2\",\"91\":\"1\",\"92\":\"754\",\"93\":\"463\",\"94\":\"2\",\"95\":\"20\",\"96\":\"11\",\"97\":\"23\"},{\"1\":\"AS\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"NA\",\"12\":\"NA\",\"13\":\"NA\",\"14\":\"NA\",\"15\":\"NA\",\"16\":\"NA\",\"17\":\"NA\",\"18\":\"NA\",\"19\":\"NA\",\"20\":\"NA\",\"21\":\"NA\",\"22\":\"NA\",\"23\":\"NA\",\"24\":\"NA\",\"25\":\"NA\",\"26\":\"NA\",\"27\":\"NA\",\"28\":\"NA\",\"29\":\"NA\",\"30\":\"NA\",\"31\":\"NA\",\"32\":\"NA\",\"33\":\"NA\",\"34\":\"NA\",\"35\":\"NA\",\"36\":\"NA\",\"37\":\"NA\",\"38\":\"NA\",\"39\":\"NA\",\"40\":\"NA\",\"41\":\"NA\",\"42\":\"NA\",\"43\":\"NA\",\"44\":\"NA\",\"45\":\"NA\",\"46\":\"NA\",\"47\":\"NA\",\"48\":\"NA\",\"49\":\"NA\",\"50\":\"NA\",\"51\":\"NA\",\"52\":\"NA\",\"53\":\"NA\",\"54\":\"NA\",\"55\":\"NA\",\"56\":\"NA\",\"57\":\"NA\",\"58\":\"NA\",\"59\":\"NA\",\"60\":\"NA\",\"61\":\"NA\",\"62\":\"NA\",\"63\":\"NA\",\"64\":\"NA\",\"65\":\"NA\",\"66\":\"NA\",\"67\":\"NA\",\"68\":\"NA\",\"69\":\"NA\",\"70\":\"NA\",\"71\":\"NA\",\"72\":\"NA\",\"73\":\"NA\",\"74\":\"NA\",\"75\":\"NA\",\"76\":\"NA\",\"77\":\"NA\",\"78\":\"NA\",\"79\":\"NA\",\"80\":\"NA\",\"81\":\"NA\",\"82\":\"NA\",\"83\":\"NA\",\"84\":\"NA\",\"85\":\"NA\",\"86\":\"NA\",\"87\":\"NA\",\"88\":\"NA\",\"89\":\"NA\",\"90\":\"NA\",\"91\":\"NA\",\"92\":\"NA\",\"93\":\"NA\",\"94\":\"NA\",\"95\":\"NA\",\"96\":\"NA\",\"97\":\"NA\"},{\"1\":\"AZ\",\"2\":\"3139\",\"3\":\"3794\",\"4\":\"6\",\"5\":\"4444\",\"6\":\"1481\",\"7\":\"35\",\"8\":\"522\",\"9\":\"38\",\"10\":\"419\",\"11\":\"827\",\"12\":\"2122\",\"13\":\"8\",\"14\":\"2253\",\"15\":\"280\",\"16\":\"22\",\"17\":\"327\",\"18\":\"19\",\"19\":\"56\",\"20\":\"2952\",\"21\":\"3503\",\"22\":\"8\",\"23\":\"4114\",\"24\":\"1491\",\"25\":\"36\",\"26\":\"442\",\"27\":\"37\",\"28\":\"343\",\"29\":\"733\",\"30\":\"2502\",\"31\":\"9\",\"32\":\"2448\",\"33\":\"301\",\"34\":\"17\",\"35\":\"367\",\"36\":\"30\",\"37\":\"81\",\"38\":\"2554\",\"39\":\"3213\",\"40\":\"13\",\"41\":\"1\",\"42\":\"3664\",\"43\":\"1303\",\"44\":\"44\",\"45\":\"447\",\"46\":\"24\",\"47\":\"299\",\"48\":\"777\",\"49\":\"2379\",\"50\":\"9\",\"51\":\"1\",\"52\":\"2422\",\"53\":\"308\",\"54\":\"7\",\"55\":\"257\",\"56\":\"22\",\"57\":\"150\",\"58\":\"2495\",\"59\":\"2966\",\"60\":\"10\",\"61\":\"4\",\"62\":\"3012\",\"63\":\"1293\",\"64\":\"32\",\"65\":\"490\",\"66\":\"31\",\"67\":\"617\",\"68\":\"1188\",\"69\":\"3331\",\"70\":\"6\",\"71\":\"7\",\"72\":\"3304\",\"73\":\"615\",\"74\":\"16\",\"75\":\"429\",\"76\":\"28\",\"77\":\"140\",\"78\":\"2428\",\"79\":\"3009\",\"80\":\"19\",\"81\":\"2\",\"82\":\"3016\",\"83\":\"1523\",\"84\":\"46\",\"85\":\"449\",\"86\":\"28\",\"87\":\"396\",\"88\":\"1800\",\"89\":\"3685\",\"90\":\"24\",\"91\":\"12\",\"92\":\"3885\",\"93\":\"766\",\"94\":\"31\",\"95\":\"578\",\"96\":\"32\",\"97\":\"229\"},{\"1\":\"CA\",\"2\":\"17910\",\"3\":\"23981\",\"4\":\"148\",\"5\":\"24165\",\"6\":\"12436\",\"7\":\"771\",\"8\":\"1454\",\"9\":\"628\",\"10\":\"2585\",\"11\":\"20766\",\"12\":\"52564\",\"13\":\"369\",\"14\":\"40175\",\"15\":\"19826\",\"16\":\"1375\",\"17\":\"3308\",\"18\":\"597\",\"19\":\"8418\",\"20\":\"16765\",\"21\":\"22822\",\"22\":\"165\",\"23\":\"23096\",\"24\":\"11845\",\"25\":\"711\",\"26\":\"1200\",\"27\":\"565\",\"28\":\"2335\",\"29\":\"22410\",\"30\":\"55299\",\"31\":\"681\",\"32\":\"44573\",\"33\":\"20589\",\"34\":\"1125\",\"35\":\"2979\",\"36\":\"719\",\"37\":\"8405\",\"38\":\"18387\",\"39\":\"23994\",\"40\":\"221\",\"41\":\"34\",\"42\":\"23093\",\"43\":\"13634\",\"44\":\"772\",\"45\":\"1377\",\"46\":\"570\",\"47\":\"3190\",\"48\":\"24363\",\"49\":\"63615\",\"50\":\"572\",\"51\":\"346\",\"52\":\"45691\",\"53\":\"28648\",\"54\":\"1718\",\"55\":\"4286\",\"56\":\"889\",\"57\":\"7664\",\"58\":\"18737\",\"59\":\"23807\",\"60\":\"236\",\"61\":\"66\",\"62\":\"23276\",\"63\":\"14339\",\"64\":\"757\",\"65\":\"1285\",\"66\":\"567\",\"67\":\"2622\",\"68\":\"31730\",\"69\":\"74597\",\"70\":\"1528\",\"71\":\"577\",\"72\":\"58888\",\"73\":\"29747\",\"74\":\"1849\",\"75\":\"5512\",\"76\":\"1610\",\"77\":\"10826\",\"78\":\"20943\",\"79\":\"26502\",\"80\":\"330\",\"81\":\"113\",\"82\":\"26133\",\"83\":\"16492\",\"84\":\"948\",\"85\":\"1417\",\"86\":\"520\",\"87\":\"2378\",\"88\":\"32562\",\"89\":\"79235\",\"90\":\"1271\",\"91\":\"592\",\"92\":\"61306\",\"93\":\"33118\",\"94\":\"2292\",\"95\":\"4969\",\"96\":\"1264\",\"97\":\"10711\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nThis is an example of untidy data. The reason is that there is data we want to visualize (such as race, gender, year, and sheltered vs. unsheltered) that are stored in our column headers, not in cells of the data frame. To be able to visualize this data *by race*, *by gender*, or *by year* we need to pivot our data frames so that the values stored in column headers instead get restored in data cells. \n\n###### Question\n\n::: question\n\nWrite code to pivot longer columns 2 through 97 (i.e. all columns except the first state column) in `pit`. Store the names in column called \"Measure\" and store the values in a column called \"Value.\" Store the resulting data frame in in `pit_pivoted`.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below and write code to pivot dataset. Store the results in pit_pivoted\n\n# pit_pivoted <- pit |> pivot_longer(_____)\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frame should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_pivoted)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Measure\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless - Female, 2015\",\"3\":\"694\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless - Male, 2015\",\"3\":\"943\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless - Transgender, 2015\",\"3\":\"2\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless - White, 2015\",\"3\":\"625\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless - Black or African American, 2015\",\"3\":\"132\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless - Asian, 2015\",\"3\":\"17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nNow you'll notice that that we have some more cleaning to do because many separate variables are all stored in the `Measure` column. We have: the year, the demographic, whether the count is for Sheltered or Unsheltered individuals all stored in the column. We need to separate all of these distinct variables into different columns. We're going to do this in a few steps. \n\n###### Question\n\n::: question\n\nWrite code to separate `Measure` into two columns. One column should be called `Shel_Unshel`, and the second should be called `Demographic`. Note what symbol separates these two pieces of data: space dash space (i.e. \" - \"). You will need to specify this in the `sep` argument for `separate()`. Store the resulting data frame in in `pit_separate_1`.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below and complete the code to separate the Measure column. Store the results in pit_separate_1\n\n# pit_separate_1 <- pit_pivoted |> separate(_____)\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frame should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_separate_1)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Female, 2015\",\"4\":\"694\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Male, 2015\",\"4\":\"943\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Transgender, 2015\",\"4\":\"2\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"White, 2015\",\"4\":\"625\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Black or African American, 2015\",\"4\":\"132\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Asian, 2015\",\"4\":\"17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nWe still have some cleaning to do because we have demographic data and year data are stored in the same column. \n\n###### Question\n\n::: question\n\nWrite code to separate `Demographic` into two columns. One column should be called `Demographic`, and the second should be called `Year`. Note what symbol separates these two pieces of data: comma space (i.e. \", \"). You will need to specify this in the `sep` argument for `separate()`. Store the resulting data frame in in `pit_separate_2`.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below and complete the code to separate the Demographic column. Store the results in pit_separate_2\n\n# pit_separate_2 <- pit_separate_1 |> separate(_____)\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frame should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_separate_2)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"694\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"943\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Transgender\",\"4\":\"2015\",\"5\":\"2\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"White\",\"4\":\"2015\",\"5\":\"625\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Black or African American\",\"4\":\"2015\",\"5\":\"132\"},{\"1\":\"AK\",\"2\":\"Sheltered Total Homeless\",\"3\":\"Asian\",\"4\":\"2015\",\"5\":\"17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nAs a final cleaning step, let's remove some unnecessary characters from the `Shel_Unshel` column. Specifically, let's remove the string \"Total\" since we already know that these represent Total counts for these categories. \n\n###### Question\n\n::: question\n\nRemove the string \"Total \" from the `Shel_Unshel` column. To do this you should use the `str_replace()` function. Replace the string \"Total\" with the empty string (i.e. \"\") to remove these characters. Store the results in `pit_str_cleaned`.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below and complete the code to replace the string \"Total \" in Shel_Unshel with an empty string. Store the results in pit_str_cleaned\n\n# pit_str_cleaned <- pit_separate_2 |> mutate(Shel_Unshel = _______)\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frame should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_str_cleaned)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"694\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"943\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Transgender\",\"4\":\"2015\",\"5\":\"2\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"White\",\"4\":\"2015\",\"5\":\"625\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Black or African American\",\"4\":\"2015\",\"5\":\"132\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Asian\",\"4\":\"2015\",\"5\":\"17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nThe next issue is that there are multiple kinds of demographics in the demographic column. Specifically, we have both race represented in that column and gender represented in that column. Remember the rules of tidy data, according to @wickhamTidyData2014a:  \n\n1. Each variable forms a column.\n2. Each observation forms a row.\n3. Each type of observational unit forms a table.\n\nThis issue violates the third rule. In one table, we have two observational units - a count of unhoused individuals by race and a count of unhoused individuals by gender. To clean this up, we need to separate this into different tables. \n\n###### Question\n\n::: question\n\nCreate two new data frames - one for `pit_by_gender` and one for `pit_by_race`. To do this you want to extract the rows with values in Demographic `%in%` the following vector of values: `c(\"Female\", \"Male\", \"Transgender\")`, and store the result in `pit_by_gender`. Then you want to extract the rows with values in Demographic `%in%` the following vector of values: \n\n```\nc(\"Black or African American\", \n  \"Asian\", \n  \"American Indian or Alaska Native\", \n  \"Native Hawaiian or Other Pacific Islander\", \n  \"White\", \n  \"Multiple Races\")\n```\n\nand store the result in `pit_by_race`.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below to create two new tables.\n\n# pit_by_gender <- pit_str_cleaned |>\n# pit_by_race <- pit_str_cleaned |>\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frame should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_by_gender)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"694\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"943\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Transgender\",\"4\":\"2015\",\"5\":\"2\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"79\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"238\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Transgender\",\"4\":\"2015\",\"5\":\"0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(pit_by_race)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"White\",\"4\":\"2015\",\"5\":\"625\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Black or African American\",\"4\":\"2015\",\"5\":\"132\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Asian\",\"4\":\"2015\",\"5\":\"17\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"American Indian or Alaska Native\",\"4\":\"2015\",\"5\":\"714\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Native Hawaiian or Other Pacific Islander\",\"4\":\"2015\",\"5\":\"59\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Multiple Races\",\"4\":\"2015\",\"5\":\"92\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nNow we have two significantly cleaned data tables. Let's go ahead and remove some of the data frames we no longer need from our environmennt. \n\n\n::: {.cell document='show'}\n\n```{.r .cell-code}\nrm(pit, pit_pivoted, pit_separate_1, pit_separate_2, pit_str_cleaned)\n```\n:::\n\n\nWith the final data, we could visualize counts of homelessness per state using each of these tables. Check out the plot below to see an example of what this might look like. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lab7_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nThe problem now is that we don't know if higher counts are a result of greater homelessness for that sub-group or a result of there being higher populations of that sub-group in each state. For instance, in the plot above, is the count of homelessness higher for unsheltered white individuals because white individuals are more likely to be homeless or because there is a higher population of white individuals in Florida? We ultimately want to consider the *rates* of homelessness per x number of people of that demographic in that state. To do that, we're going to need to join this dataset with some census data documenting population.\n\nI've supplied you with two census tables:\n\n-   `gender`: documents population estimates and margin of error (moe) for each gender in each state from 2015-2020\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(gender)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"GEOID\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"NAME\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"variable\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate_2015\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2015\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2016\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2016\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2017\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2017\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2018\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2018\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2019\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2019\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2020\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2020\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2341093\",\"5\":\"1138\",\"6\":\"2346193\",\"7\":\"1216\",\"8\":\"2350806\",\"9\":\"1110\",\"10\":\"2355799\",\"11\":\"1011\",\"12\":\"2359355\",\"13\":\"1270\",\"14\":\"2365734\",\"15\":\"1090\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Female\",\"4\":\"2489527\",\"5\":\"1138\",\"6\":\"2494971\",\"7\":\"1216\",\"8\":\"2499965\",\"9\":\"1110\",\"10\":\"2508881\",\"11\":\"1011\",\"12\":\"2516895\",\"13\":\"1270\",\"14\":\"2527452\",\"15\":\"1089\"},{\"1\":\"02\",\"2\":\"Alaska\",\"3\":\"Male\",\"4\":\"384160\",\"5\":\"339\",\"6\":\"385296\",\"7\":\"355\",\"8\":\"386319\",\"9\":\"398\",\"10\":\"385579\",\"11\":\"465\",\"12\":\"384915\",\"13\":\"401\",\"14\":\"384653\",\"15\":\"448\"},{\"1\":\"02\",\"2\":\"Alaska\",\"3\":\"Female\",\"4\":\"349215\",\"5\":\"339\",\"6\":\"351559\",\"7\":\"355\",\"8\":\"352246\",\"9\":\"397\",\"10\":\"352937\",\"11\":\"465\",\"12\":\"352153\",\"13\":\"401\",\"14\":\"352337\",\"15\":\"448\"},{\"1\":\"04\",\"2\":\"Arizona\",\"3\":\"Male\",\"4\":\"3299088\",\"5\":\"845\",\"6\":\"3344106\",\"7\":\"449\",\"8\":\"3385055\",\"9\":\"428\",\"10\":\"3453439\",\"11\":\"497\",\"12\":\"3504509\",\"13\":\"349\",\"14\":\"3564979\",\"15\":\"458\"},{\"1\":\"04\",\"2\":\"Arizona\",\"3\":\"Female\",\"4\":\"3342840\",\"5\":\"845\",\"6\":\"3384471\",\"7\":\"449\",\"8\":\"3424891\",\"9\":\"428\",\"10\":\"3493246\",\"11\":\"497\",\"12\":\"3545790\",\"13\":\"349\",\"14\":\"3609085\",\"15\":\"458\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n-   `race`: documents population estimates and margin of error (moe) for each race in each state from 2015-2020\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(race)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"GEOID\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"NAME\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"variable\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate_2015\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2015\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2016\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2016\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2017\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2017\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2018\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2018\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2019\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2019\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"estimate_2020\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe_2020\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"White\",\"4\":\"3325464\",\"5\":\"2653\",\"6\":\"3325037\",\"7\":\"3152\",\"8\":\"3317702\",\"9\":\"3366\",\"10\":\"3317453\",\"11\":\"3345\",\"12\":\"3320247\",\"13\":\"3020\",\"14\":\"3302834\",\"15\":\"3712\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Black or African American\",\"4\":\"1276544\",\"5\":\"2499\",\"6\":\"1282053\",\"7\":\"2466\",\"8\":\"1287167\",\"9\":\"2157\",\"10\":\"1293186\",\"11\":\"2745\",\"12\":\"1299048\",\"13\":\"2738\",\"14\":\"1301319\",\"15\":\"3060\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"American Indian or Alaska Native\",\"4\":\"23850\",\"5\":\"1026\",\"6\":\"23919\",\"7\":\"1369\",\"8\":\"25098\",\"9\":\"1253\",\"10\":\"25576\",\"11\":\"1335\",\"12\":\"25565\",\"13\":\"1231\",\"14\":\"24764\",\"15\":\"1203\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Asian\",\"4\":\"59599\",\"5\":\"1379\",\"6\":\"60744\",\"7\":\"1345\",\"8\":\"62815\",\"9\":\"1347\",\"10\":\"64609\",\"11\":\"1251\",\"12\":\"66270\",\"13\":\"1204\",\"14\":\"67909\",\"15\":\"1445\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Native Hawaiian or Other Pacific Islander\",\"4\":\"2439\",\"5\":\"742\",\"6\":\"2008\",\"7\":\"584\",\"8\":\"2213\",\"9\":\"592\",\"10\":\"2182\",\"11\":\"546\",\"12\":\"2238\",\"13\":\"544\",\"14\":\"2042\",\"15\":\"319\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Multiple Races\",\"4\":\"81646\",\"5\":\"2273\",\"6\":\"85412\",\"7\":\"2868\",\"8\":\"88834\",\"9\":\"2722\",\"10\":\"91619\",\"11\":\"3331\",\"12\":\"92220\",\"13\":\"2835\",\"14\":\"119322\",\"15\":\"3836\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nNote that in these two data frames - just like above - we have values stored in our column headers, and we need to pivot our data longer and then clean it up. We're going to complete this in three parts. \n\n###### Question\n\n::: question\n\nCreate two new tidy data frames - `gender_final` and `race_final`. For each, you should do this in 3 steps:\n\nStep 1: Pivot the columns `estimate_2015:moe_2020` longer, storing the column names in \"Measure\" and the values in \"Values\".\nStep 2: Separate the values in Measure into two columns: \"Measure\", \"Year\". Note that these are separated by an underscore (\"_\").\nStep 3: Pivot the Measure column wider, taking the values from the Values column. \n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fill in the blanks to clean up these data frames. \n\n# Step 1\n#gender_pivoted_longer <- gender |> pivot_longer(_____)\n\n# Step 2\n#gender_separated <- gender_pivoted |> separate(_____)\n\n# Step 3\n#gender_final <- gender_separated |> pivot_wider(_____)\n\n# Step 1\n#race_pivoted_longer <- race |> pivot_longer(_____)\n\n# Step 2\n#race_separated <- race_pivoted |> separate(_____)\n\n# Step 3\n#race_final <- race_separated |> pivot_wider(_____)\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frame should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(gender_final)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"GEOID\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"NAME\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"variable\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"2341093\",\"6\":\"1138\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2016\",\"5\":\"2346193\",\"6\":\"1216\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2017\",\"5\":\"2350806\",\"6\":\"1110\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2018\",\"5\":\"2355799\",\"6\":\"1011\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2019\",\"5\":\"2359355\",\"6\":\"1270\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2020\",\"5\":\"2365734\",\"6\":\"1090\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(gender_final)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"GEOID\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"NAME\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"variable\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"2341093\",\"6\":\"1138\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2016\",\"5\":\"2346193\",\"6\":\"1216\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2017\",\"5\":\"2350806\",\"6\":\"1110\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2018\",\"5\":\"2355799\",\"6\":\"1011\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2019\",\"5\":\"2359355\",\"6\":\"1270\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2020\",\"5\":\"2365734\",\"6\":\"1090\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nNow that we have cleaned up census data, let's go ahead and remove some data frames that we no longer need in our environments\n\n\n::: {.cell document='show'}\n\n```{.r .cell-code}\nrm(gender, gender_pivoted_longer, gender_separated, race, race_pivoted_longer, race_separated)\n```\n:::\n\n\nOur next step is to join the census data with our point-in-time count data tables. Let's just compare `pit_by_gender` to `gender_final` to discern the join key. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_by_gender)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"694\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"943\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Transgender\",\"4\":\"2015\",\"5\":\"2\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"79\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"238\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Transgender\",\"4\":\"2015\",\"5\":\"0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(gender_final)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"GEOID\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"NAME\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"variable\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"2341093\",\"6\":\"1138\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2016\",\"5\":\"2346193\",\"6\":\"1216\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2017\",\"5\":\"2350806\",\"6\":\"1110\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2018\",\"5\":\"2355799\",\"6\":\"1011\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2019\",\"5\":\"2359355\",\"6\":\"1270\"},{\"1\":\"01\",\"2\":\"Alabama\",\"3\":\"Male\",\"4\":\"2020\",\"5\":\"2365734\",\"6\":\"1090\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nNotice that here, we need to join on three variables: the state, the year, and the demographic. ...but you might have noticed a problem. In our census data table, states are written out, and in our point-in-time data table, states are abbreviated. The values need to match for the join to work, so we will need to create a new column with the full state name in our point-in-time count data table. I've written the code to do this below. You should run that code before moving on to the next step. \n\n\n::: {.cell document='show'}\n\n```{.r .cell-code}\npit_by_gender <- \n  pit_by_gender |>\n  mutate(StateName = state.name[match(State, state.abb)])\n  \npit_by_race <- \n  pit_by_race |>\n  mutate(StateName = state.name[match(State, state.abb)])\n```\n:::\n\n\nNow our data frames are formatted in such a way that we can join `pit_by_gender` to `gender_final` and `pit_by_race` to `race_final`.\n\n###### Question\n\n::: question\n\nJoin `pit_by_gender` on the left to `gender_final` on the right and store the results in `pit_gender`. Join `pit_by_race` on the left to `race_final` on the right and store the results in `pit_race`. In both case, you will be joining by three variables: State, Demographic, and Year. We can set the left key variables to the right key variables by setting the `by` argument to this in the join: `c(\"StateName\" = \"NAME\", \"Demographic\" = \"variable\", \"Year\" = \"Year\")`\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below and write code to join pit_by_gender to gender_final and pit_by_race to race_final. Store the results in pit_gender and pit_race respectively.\n\n# pit_gender <- pit_by_gender |>\n# pit_race <- pit_by_race |>\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frames should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_gender)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"StateName\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"GEOID\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"694\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"349215\",\"9\":\"339\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"943\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"384160\",\"9\":\"339\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"79\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"349215\",\"9\":\"339\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"238\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"384160\",\"9\":\"339\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2016\",\"5\":\"649\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"351559\",\"9\":\"355\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2016\",\"5\":\"846\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"385296\",\"9\":\"355\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(pit_race)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"StateName\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"GEOID\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"White\",\"4\":\"2015\",\"5\":\"625\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"484250\",\"9\":\"1236\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Black or African American\",\"4\":\"2015\",\"5\":\"132\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"25022\",\"9\":\"803\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Asian\",\"4\":\"2015\",\"5\":\"17\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"42921\",\"9\":\"994\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"American Indian or Alaska Native\",\"4\":\"2015\",\"5\":\"714\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"101313\",\"9\":\"1735\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Native Hawaiian or Other Pacific Islander\",\"4\":\"2015\",\"5\":\"59\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"8841\",\"9\":\"428\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Multiple Races\",\"4\":\"2015\",\"5\":\"92\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"61755\",\"9\":\"2190\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nOne final step before we can create our plots! We need to create a new column that calculates the rate of homelessness for this sub-group per 10,000 population of that sub-group in that state and year. You have all of the pieces you need to do this now. \n\n###### Question\n\n::: question\n\nUse a data wrangling verb to create a new column in both `pit_gender` and `pit_race` that calculates the rate of homelessness per 10,000 population. Set that column name to `homeless_rate`. Hint: When creating that column, you'll need to divide the homeless count by the population estimate and then multiply by 10000. Store the resulting data frames in \n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment below and write code to create a new column for homelessness_rate in both pit_gender and pit_race\n\n# pit_gender_rates <- pit_gender |>\n# pit_race_rates <- pit_race |>\n```\n:::\n\n::: {.cell document='solutions'}\n\n:::\n\n\n#######\n\nIf you've done this correctly the first six rows of the resulting data frames should look like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pit_gender_rates)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"StateName\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"GEOID\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"homeless_rate\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"694\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"349215\",\"9\":\"339\",\"10\":\"19.873144\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"943\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"384160\",\"9\":\"339\",\"10\":\"24.547064\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Female\",\"4\":\"2015\",\"5\":\"79\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"349215\",\"9\":\"339\",\"10\":\"2.262217\"},{\"1\":\"AK\",\"2\":\"Unsheltered Homeless\",\"3\":\"Male\",\"4\":\"2015\",\"5\":\"238\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"384160\",\"9\":\"339\",\"10\":\"6.195335\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Female\",\"4\":\"2016\",\"5\":\"649\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"351559\",\"9\":\"355\",\"10\":\"18.460628\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Male\",\"4\":\"2016\",\"5\":\"846\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"385296\",\"9\":\"355\",\"10\":\"21.957145\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(pit_race_rates)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Shel_Unshel\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Demographic\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Year\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"StateName\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"GEOID\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moe\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"homeless_rate\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"White\",\"4\":\"2015\",\"5\":\"625\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"484250\",\"9\":\"1236\",\"10\":\"12.906557\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Black or African American\",\"4\":\"2015\",\"5\":\"132\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"25022\",\"9\":\"803\",\"10\":\"52.753577\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Asian\",\"4\":\"2015\",\"5\":\"17\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"42921\",\"9\":\"994\",\"10\":\"3.960765\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"American Indian or Alaska Native\",\"4\":\"2015\",\"5\":\"714\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"101313\",\"9\":\"1735\",\"10\":\"70.474668\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Native Hawaiian or Other Pacific Islander\",\"4\":\"2015\",\"5\":\"59\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"8841\",\"9\":\"428\",\"10\":\"66.734532\"},{\"1\":\"AK\",\"2\":\"Sheltered Homeless\",\"3\":\"Multiple Races\",\"4\":\"2015\",\"5\":\"92\",\"6\":\"Alaska\",\"7\":\"02\",\"8\":\"61755\",\"9\":\"2190\",\"10\":\"14.897579\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nIf you've done everything correctly, you should be able to run the following code to generate the plots presented at the beginning of the lab. Feel free to swap out the `State` filter for different states to see how the rates compare across the US. \n\n\n\n::: {.cell document='show'}\n\n```{.r .cell-code}\noptions(scipen=999)\n\npit_gender_rates |>\n  filter(State == \"FL\") |>\n  ggplot(aes(x = Year, \n             y = homeless_rate, \n             col = Demographic, \n             group = Demographic)) +\n  geom_line() +\n  facet_wrap(vars(Shel_Unshel)) +\n  theme_bw() +\n  theme(legend.position = \"bottom\") +\n  labs(title = \"Point in Time Homeless Rates in FL, 2015-2020\",\n       x = \"Year\", \n       y = \"Homeless per 10,000 Population\",\n       col = \"Gender\")\n```\n\n::: {.cell-output-display}\n![](lab7_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n\n```{.r .cell-code}\npit_race_rates |>\n  filter(State == \"FL\") |>\n  ggplot(aes(x = Year, \n             y = homeless_rate, \n             col = Demographic, \n             group = Demographic)) +\n  geom_line() +\n  facet_wrap(vars(Shel_Unshel)) +\n  theme_bw() +\n  theme(legend.position = \"bottom\") +\n  guides(color = guide_legend(nrow = 3, byrow = TRUE)) +\n  labs(title = \"Point in Time Homeless Rates in FL, 2015-2020\",\n       x = \"Year\", \n       y = \"Homeless per 10,000 Population\",\n       col = \"Race\")\n```\n\n::: {.cell-output-display}\n![](lab7_files/figure-html/unnamed-chunk-33-2.png){width=672}\n:::\n:::\n\n\n\n#######\n\n::: callout-caution\n## Ethical Considerations\nWhile this is one of the primary datasets used to direct resources for homelessness in the U.S., there are a number of reasons unhoused individual may go uncounted through point-in-time counts:\n\n-   Only individuals that are visible to enumerators get counted. However, other sources (such as surveys in public schools) have shown that the majority of unhoused individuals are not on the streets or in shelters, but instead are temporarily residing with family/friends or are in staying in motels.\n-   As living on the streets is increasingly criminalized in cities across the U.S., there are reasons why unhoused individuals may try to avoid being seen on a given night. \n-   Only recently have counting protocols started to include separate categories for Transgender and Gender Non-Conforming individuals. When counting PIT data against census population data, however, these sub-groups won't appear because the census only collects Sex as \"Male\" and \"Female\".\n-   Different CoCs use different methods to generate PIT counts. \n\nFor more information see @enationallawcenteronhomelessness2017.\n\nTaking into consideration all of these factors, how should we, as data scientists, think about and present this data? Is there value in PIT count data? How should we go about communicating its shortcomings? How might we go about collecting this data in different ways? Share your ideas on our `sds-192-discussions` Slack channel.\n\n:::\n",
    "supporting": [
      "lab7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}