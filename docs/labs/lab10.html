<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lindsay Poirier">

<title>Lab 10: APIs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../site_libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">SDS 192: Intro to Data Science</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">Syllabus</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../grading_contract.html">Standards Grading</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html">Schedule</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link" data-scroll-target="#learning-goals">Learning Goals</a></li>
  </ul></li>
  <li><a href="#review-of-key-terms" id="toc-review-of-key-terms" class="nav-link" data-scroll-target="#review-of-key-terms">Review of Key Terms</a></li>
  <li><a href="#nyc-311-service-requests" id="toc-nyc-311-service-requests" class="nav-link" data-scroll-target="#nyc-311-service-requests">NYC 311 Service Requests</a></li>
  <li><a href="#setting-up-your-environment" id="toc-setting-up-your-environment" class="nav-link" data-scroll-target="#setting-up-your-environment">Setting Up Your Environment</a></li>
  <li><a href="#how-do-apis-work" id="toc-how-do-apis-work" class="nav-link" data-scroll-target="#how-do-apis-work">How do APIs work?</a></li>
  <li><a href="#writing-api-queries" id="toc-writing-api-queries" class="nav-link" data-scroll-target="#writing-api-queries">Writing API Queries</a>
  <ul class="collapse">
  <li><a href="#limit" id="toc-limit" class="nav-link" data-scroll-target="#limit"><code>$limit</code></a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select"><code>$select</code></a></li>
  <li><a href="#where" id="toc-where" class="nav-link" data-scroll-target="#where"><code>$where</code></a></li>
  <li><a href="#order" id="toc-order" class="nav-link" data-scroll-target="#order"><code>$order</code></a></li>
  <li><a href="#group" id="toc-group" class="nav-link" data-scroll-target="#group"><code>$group</code></a></li>
  <li><a href="#having" id="toc-having" class="nav-link" data-scroll-target="#having"><code>$having</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 10: APIs</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lindsay Poirier </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this lab, we will write queries to access subsets of a very large dataset on the NYC Open Data Portal. We will practice all of the standards we have learned in the course so far in visualizing and wrangling the resulting data.</p>
<section id="learning-goals" class="level3">
<h3 class="anchored" data-anchor-id="learning-goals">Learning Goals</h3>
<ul>
<li>Write API Queries</li>
<li>Recognize different HTTP Response Codes</li>
</ul>
</section>
</section>
<section id="review-of-key-terms" class="level2">
<h2 class="anchored" data-anchor-id="review-of-key-terms">Review of Key Terms</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may wish to reference this <a href="https://dev.socrata.com/foundry/data.cityofnewyork.us/erm2-nwe9">reference guide</a> when completing this lab.</p>
</div>
</div>
<dl>
<dt>Application Programming Interface (API)</dt>
<dd>
<p>an mechanism that allows programmers or other systems (or users) to access resources from or post data to an online data service</p>
</dd>
<dt>HTTP</dt>
<dd>
<p>a Web protocol for transmitting documents (e.g.&nbsp;Web pages, images, datasets, etc.) between web servers and browsers</p>
</dd>
<dt>Endpoint</dt>
<dd>
<p>An exposed portion of an online data service that clients can assess via API queries</p>
</dd>
</dl>
</section>
<section id="nyc-311-service-requests" class="level2">
<h2 class="anchored" data-anchor-id="nyc-311-service-requests">NYC 311 Service Requests</h2>
<p>311 is a dialing code set aside in many cities across the US to field calls about requests for municipal service – fixing potholes, reporting noise complaints, reporting parking infractions, etc. NYC has one of the most comprehensive 311 programs in the country, fielding calls to be routed to one of the city’s 77 agencies. Unlike in many other cities, New Yorkers can call 311 to report sexual harassment in taxi cabs or to report tenant rights issues (like a landlord failing to address a lack of heat or hot water). In October 2011, data documenting each request for service New Yorkers had made to 311 began to be published daily to the city’s public-facing open data portal. Since then, the dataset has become one of the largest and most complex archived and maintained on the portal, which includes datasets covering topics from restaurant health inspections, to crime statistics, to construction permits. Each row in the 311 dataset details one anonymized and geocoded request - the type of request that was made, when it was made, the location where the incident occurred, and how the relevant NYC agency responded. As of November 2022, the dataset has over 31 million rows, representing service requests made to 311 since 2010.</p>
<p>When the 311 program was introduced, it was celebrated for its bottom-up approach to producing empirical evidence about problems facing New Yorkers; the program buttressed a persuasive techno-liberal imaginary, suggesting that fair and unbiased representation of quality of life concerns would emanate through the crowd-sourced data. When wrangled and visualized, the data can produce persuasive narratives about the state of equity and quality of life in communities across NYC, and thus a number of communities now leverage the data to legitimate claims. Community boards regularly cite 311 statistics about noise, infrastructure, and rodent issues when preparing district budget requests. Activists present the data to city legislators when advocating for or against new housing and transportation laws. Cyclists have produced apps that track complaints about the blocked bicycle lanes in New York. Journalists regularly reference the dataset to report which communities have received the most noise complaints, have had the most restaurants not following Covid-19 orders, or have had the most rat sightings. In 2018, eight pieces of legislation introduced by City Council required data about various issues – from rodent complaints, to noise complaints, to complaints about sexual harassment in taxis – be reported to the city agencies responsible for addressing those issues.</p>
<p>Yet, while representatives acknowledge 311 data to be a useful form of evidence for quality of life issues, they can be hesitant to rely on 311 statistics alone to measure urban problems. Communities that regularly leverage 311 open data warn that the data does not “represent” the saturation of problems in the city but that they represent “where people are complaining in the city.”</p>
<p>Mapping the data shows that, for almost all reported issues, 311 complaints are disproportionately high in gentrifying communities. The data under-represents problems in areas where individuals do not know to report, do not have the capacity to report, or fear harassment (from their landlords or bosses) for reporting. Complaints about NYC Housing Authority (NYCHA) are entirely excluded from the data. The data also over-represents problems when weaponized against minority communities and small businesses to consistently report minor and sometimes false noise issues or legal infractions. While this highlights how the dataset is being used to propagate inequity across the city, activists have also recognized that they can leverage 311 in liberatory ways. I’ve interviewed tenant rights groups that will run 311 calling campaigns in housing complexes, which can significantly increase the number of complaints made at a particular address - not necessarily because it is experiencing more issues than the building next to it, but because there has been advocacy around reporting the issues at this location.</p>
</section>
<section id="setting-up-your-environment" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-your-environment">Setting Up Your Environment</h2>
<ol type="1">
<li><p>Install the <code>httr</code> package.</p></li>
<li><p>Run the code below to load the packages for today’s lab</p></li>
</ol>
<div class="cell" data-document="show">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-do-apis-work" class="level2">
<h2 class="anchored" data-anchor-id="how-do-apis-work">How do APIs work?</h2>
<p>APIs enable us to access data from an online service via an API query. Here are the steps that take place behind the scenes when we issue a Web-based API query:</p>
<ol type="1">
<li><p>We provide a line of code that indicates the location of a database online (or the data’s <em>endpoint</em>) and what subsets and aggregates of data want. This line of code is called an <em>API query.</em> API queries look very much like URLs that you enter into a Web browser to access a Web page.</p></li>
<li><p>We issue that request by entering the API query into a Web browser, or by referencing it via an import function in <code>R</code>.</p></li>
<li><p>A request to GET the data resource is issued via the <em>Hypertext Transfer Protocol (HTTP)</em> - a protocol that manages the transfer of data between clients and servers on the Web. HTTP sends a request to the location indicated by the endpoint to retrieve the data.</p></li>
<li><p>A response code gets issued from the server to the client. There are many codes associated with different issues, but here are the most common:</p></li>
</ol>
<ul>
<li><code>200</code> indicates success (or that the data can be accessed).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="st">"http://smith.edu/"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>example[[<span class="st">"status_code"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 200</code></pre>
</div>
</div>
<ul>
<li><code>403</code> indicates that the client does not have permission to access the data.</li>
<li><code>404</code> indicates that the resource could not be found at the endpoint the client specified. For example, below the directory <code>this-url-does-not-exist</code> does not exist at <a href="http://smith.edu/" class="uri">http://smith.edu/</a>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="st">"http://smith.edu/this-url-does-not-exist"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>example[[<span class="st">"status_code"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 404</code></pre>
</div>
</div>
<p>If successful, the server also sends the requested resource to the client.</p>
<p>This all happens very quickly, and most of it we don’t see!</p>
</section>
<section id="writing-api-queries" class="level2">
<h2 class="anchored" data-anchor-id="writing-api-queries">Writing API Queries</h2>
<p>An API query can be parsed into component parts:</p>
<ol type="1">
<li>An endpoint to the data resource</li>
<li>The format we want the data returned in (e.g.&nbsp;CSV, JSON, XML)</li>
<li>Parameters indicating what subsets/aggregates of the data that we want</li>
<li>A reference to an API key that grants us access to the data</li>
</ol>
<p>Different APIs have different syntax rules for formatting API queries, so it is important to reference the API documentation to learn how these component parts come together.</p>
<p>Today we are going to use the API that is made available from Socarata. Socrata is a Web hosting platform that is very commonly used by state and municipal governments, along with federal agencies, to host open government datasets. For example, the City of New York, the City of Chicago, the US Center for Disease Control, and the state of Texas all use the Socrata platform to host datasets they wish to make available to the public. Because Socrata is managing the data, Socrata also defines the API to access the data. A Socrata API query will follow this basic format:</p>
<p><code>&lt;endpoint&gt;.&lt;format&gt;?&lt;optional-parameters&gt;</code></p>
<blockquote class="blockquote">
<p>Note that most calls to Socrata do not require an API key.</p>
</blockquote>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>NYC 311 is updated very often, and APIs allow us to access the most recent data available at a service. This means that your results for this lab will probably look different from mine. My results are based on running these codes on the evening of November 29, 2022.</p>
</div>
</div>
<section id="question" class="level6">
<h6 class="anchored" data-anchor-id="question">Question</h6>
<div class="question">
<p>Write an API query to access data at the endpoint <a href="https://data.cityofnewyork.us/resource/erm2-nwe9" class="uri">https://data.cityofnewyork.us/resource/erm2-nwe9</a> in a CSV format. Let’s not worry about adding parameters yet. The resulting data frame should look something like my data frame below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#nyc_311 &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#head(nyc_311)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["unique_key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["created_date"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["closed_date"],"name":[3],"type":["dttm"],"align":["right"]},{"label":["agency"],"name":[4],"type":["chr"],"align":["left"]},{"label":["agency_name"],"name":[5],"type":["chr"],"align":["left"]},{"label":["complaint_type"],"name":[6],"type":["chr"],"align":["left"]},{"label":["descriptor"],"name":[7],"type":["chr"],"align":["left"]},{"label":["location_type"],"name":[8],"type":["chr"],"align":["left"]},{"label":["incident_zip"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["incident_address"],"name":[10],"type":["chr"],"align":["left"]},{"label":["street_name"],"name":[11],"type":["chr"],"align":["left"]},{"label":["cross_street_1"],"name":[12],"type":["chr"],"align":["left"]},{"label":["cross_street_2"],"name":[13],"type":["chr"],"align":["left"]},{"label":["intersection_street_1"],"name":[14],"type":["chr"],"align":["left"]},{"label":["intersection_street_2"],"name":[15],"type":["chr"],"align":["left"]},{"label":["address_type"],"name":[16],"type":["chr"],"align":["left"]},{"label":["city"],"name":[17],"type":["chr"],"align":["left"]},{"label":["landmark"],"name":[18],"type":["chr"],"align":["left"]},{"label":["facility_type"],"name":[19],"type":["chr"],"align":["left"]},{"label":["status"],"name":[20],"type":["chr"],"align":["left"]},{"label":["due_date"],"name":[21],"type":["lgl"],"align":["right"]},{"label":["resolution_description"],"name":[22],"type":["chr"],"align":["left"]},{"label":["resolution_action_updated_date"],"name":[23],"type":["dttm"],"align":["right"]},{"label":["community_board"],"name":[24],"type":["chr"],"align":["left"]},{"label":["bbl"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["borough"],"name":[26],"type":["chr"],"align":["left"]},{"label":["x_coordinate_state_plane"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["y_coordinate_state_plane"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["open_data_channel_type"],"name":[29],"type":["chr"],"align":["left"]},{"label":["park_facility_name"],"name":[30],"type":["chr"],"align":["left"]},{"label":["park_borough"],"name":[31],"type":["chr"],"align":["left"]},{"label":["vehicle_type"],"name":[32],"type":["lgl"],"align":["right"]},{"label":["taxi_company_borough"],"name":[33],"type":["lgl"],"align":["right"]},{"label":["taxi_pick_up_location"],"name":[34],"type":["chr"],"align":["left"]},{"label":["bridge_highway_name"],"name":[35],"type":["chr"],"align":["left"]},{"label":["bridge_highway_direction"],"name":[36],"type":["chr"],"align":["left"]},{"label":["road_ramp"],"name":[37],"type":["chr"],"align":["left"]},{"label":["bridge_highway_segment"],"name":[38],"type":["chr"],"align":["left"]},{"label":["latitude"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["longitude"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["location"],"name":[41],"type":["chr"],"align":["left"]}],"data":[{"1":"56100070","2":"2022-11-28 12:00:00","3":"2022-11-28 12:00:00","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11207","10":"642 RIVERDALE AVENUE","11":"RIVERDALE AVENUE","12":"NEW JERSEY AVENUE","13":"VERMONT STREET","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"DSNY Garage","20":"Closed","21":"NA","22":"The Department of Sanitation investigated and the vehicle owner claimed the vehicle, therefore it could not be classified as abandoned and derelict.","23":"2022-11-28 12:00:00","24":"05 BROOKLYN","25":"NA","26":"BROOKLYN","27":"1014198","28":"181009","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.66345","40":"-73.89205","41":"\\n,  \\n(40.66345396482097, -73.89205312221256)"},{"1":"56100921","2":"2022-11-28 12:00:00","3":"2022-11-28 12:00:00","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11207","10":"642 RIVERDALE AVENUE","11":"RIVERDALE AVENUE","12":"NEW JERSEY AVENUE","13":"VERMONT STREET","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"DSNY Garage","20":"Closed","21":"NA","22":"The Department of Sanitation investigated and the vehicle owner claimed the vehicle, therefore it could not be classified as abandoned and derelict.","23":"2022-11-28 12:00:00","24":"05 BROOKLYN","25":"NA","26":"BROOKLYN","27":"1014198","28":"181009","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.66345","40":"-73.89205","41":"\\n,  \\n(40.66345396482097, -73.89205312221256)"},{"1":"56096726","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"10460","10":"1742 ADAMS STREET","11":"ADAMS STREET","12":"VAN NEST AVENUE","13":"MORRIS PARK AVENUE","14":"NA","15":"NA","16":"ADDRESS","17":"BRONX","18":"NA","19":"DSNY Garage","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"11 BRONX","25":"2040160052","26":"BRONX","27":"1019796","28":"245823","29":"PHONE","30":"Unspecified","31":"BRONX","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.84133","40":"-73.87153","41":"\\n,  \\n(40.841331013440204, -73.87153266612249)"},{"1":"56097593","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11206","10":"375 PULASKI STREET","11":"PULASKI STREET","12":"LEWIS AVENUE","13":"STUYVESANT AVENUE","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"DSNY Garage","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"03 BROOKLYN","25":"3015950061","26":"BROOKLYN","27":"1002064","28":"192099","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.69393","40":"-73.93576","41":"\\n,  \\n(40.693926223640986, -73.93576051065928)"},{"1":"56097570","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11223","10":"1699 WEST    7 STREET","11":"WEST    7 STREET","12":"AVENUE P","13":"QUENTIN ROAD","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"NA","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"11 BROOKLYN","25":"NA","26":"BROOKLYN","27":"989707","28":"160112","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.60615","40":"-73.98035","41":"\\n,  \\n(40.60614511072138, -73.98034725820621)"},{"1":"56097592","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"10314","10":"3 FERNDALE AVENUE","11":"FERNDALE AVENUE","12":"ROCKLAND AVENUE","13":"FERNDALE COURT","14":"NA","15":"NA","16":"ADDRESS","17":"STATEN ISLAND","18":"NA","19":"NA","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"02 STATEN ISLAND","25":"5023600120","26":"STATEN ISLAND","27":"940369","28":"155736","29":"PHONE","30":"Unspecified","31":"STATEN ISLAND","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.59403","40":"-74.15800","41":"\\n,  \\n(40.59402693178068, -74.15800365008234)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section" class="level7">
<p class="heading"></p>
</section>
</section>
<section id="limit" class="level3">
<h3 class="anchored" data-anchor-id="limit"><code>$limit</code></h3>
<p>Note that this will only return the first 1000 rows of data.</p>
<p>…but we know from examining the <a href="https://data.cityofnewyork.us/resource/erm2-nwe9">“311 Service Requests from 2010 to Present”</a> metadata that this dataset has over 30 million rows. By default, the API limits the amount of data that gets sent to us so as not to overwhelm our systems.</p>
<p>We can manually adjust how much data gets sent by setting the <code>limit</code> parameter to a specific number of rows we wish to have returned. To add a parameter to a Socrata query, first, we put a <code>?</code> at the end of the query. This indicates that we’re about to list a series of parameters. We then reference parameter names we wish to set behind a <code>$</code> (e.g.&nbsp;<code>...?$limit</code>). Finally, we set values to those parameters by adding <code>=&lt;some-value&gt;</code> after the parameter name. (e.g.&nbsp;<code>...?$limit=10</code>).</p>
<section id="question-1" class="level6">
<h6 class="anchored" data-anchor-id="question-1">Question</h6>
<div class="question">
<p>Let’s say I wanted to access data at the endpoint <a href="https://data.cityofnewyork.us/resource/erm2-nwe9" class="uri">https://data.cityofnewyork.us/resource/erm2-nwe9</a> in a CSV format. Let’s not worry about adding parameters yet. Adjust your call above to limit the results to 20 rows of 311 data. The resulting data frame should look something like my data frame below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#nyc_311 &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#head(nyc_311)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["unique_key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["created_date"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["closed_date"],"name":[3],"type":["dttm"],"align":["right"]},{"label":["agency"],"name":[4],"type":["chr"],"align":["left"]},{"label":["agency_name"],"name":[5],"type":["chr"],"align":["left"]},{"label":["complaint_type"],"name":[6],"type":["chr"],"align":["left"]},{"label":["descriptor"],"name":[7],"type":["chr"],"align":["left"]},{"label":["location_type"],"name":[8],"type":["chr"],"align":["left"]},{"label":["incident_zip"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["incident_address"],"name":[10],"type":["chr"],"align":["left"]},{"label":["street_name"],"name":[11],"type":["chr"],"align":["left"]},{"label":["cross_street_1"],"name":[12],"type":["chr"],"align":["left"]},{"label":["cross_street_2"],"name":[13],"type":["chr"],"align":["left"]},{"label":["intersection_street_1"],"name":[14],"type":["lgl"],"align":["right"]},{"label":["intersection_street_2"],"name":[15],"type":["lgl"],"align":["right"]},{"label":["address_type"],"name":[16],"type":["chr"],"align":["left"]},{"label":["city"],"name":[17],"type":["chr"],"align":["left"]},{"label":["landmark"],"name":[18],"type":["lgl"],"align":["right"]},{"label":["facility_type"],"name":[19],"type":["chr"],"align":["left"]},{"label":["status"],"name":[20],"type":["chr"],"align":["left"]},{"label":["due_date"],"name":[21],"type":["lgl"],"align":["right"]},{"label":["resolution_description"],"name":[22],"type":["chr"],"align":["left"]},{"label":["resolution_action_updated_date"],"name":[23],"type":["dttm"],"align":["right"]},{"label":["community_board"],"name":[24],"type":["chr"],"align":["left"]},{"label":["bbl"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["borough"],"name":[26],"type":["chr"],"align":["left"]},{"label":["x_coordinate_state_plane"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["y_coordinate_state_plane"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["open_data_channel_type"],"name":[29],"type":["chr"],"align":["left"]},{"label":["park_facility_name"],"name":[30],"type":["chr"],"align":["left"]},{"label":["park_borough"],"name":[31],"type":["chr"],"align":["left"]},{"label":["vehicle_type"],"name":[32],"type":["lgl"],"align":["right"]},{"label":["taxi_company_borough"],"name":[33],"type":["lgl"],"align":["right"]},{"label":["taxi_pick_up_location"],"name":[34],"type":["lgl"],"align":["right"]},{"label":["bridge_highway_name"],"name":[35],"type":["lgl"],"align":["right"]},{"label":["bridge_highway_direction"],"name":[36],"type":["lgl"],"align":["right"]},{"label":["road_ramp"],"name":[37],"type":["lgl"],"align":["right"]},{"label":["bridge_highway_segment"],"name":[38],"type":["lgl"],"align":["right"]},{"label":["latitude"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["longitude"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["location"],"name":[41],"type":["chr"],"align":["left"]}],"data":[{"1":"56100921","2":"2022-11-28 12:00:00","3":"2022-11-28 12:00:00","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11207","10":"642 RIVERDALE AVENUE","11":"RIVERDALE AVENUE","12":"NEW JERSEY AVENUE","13":"VERMONT STREET","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"DSNY Garage","20":"Closed","21":"NA","22":"The Department of Sanitation investigated and the vehicle owner claimed the vehicle, therefore it could not be classified as abandoned and derelict.","23":"2022-11-28 12:00:00","24":"05 BROOKLYN","25":"NA","26":"BROOKLYN","27":"1014198","28":"181009","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.66345","40":"-73.89205","41":"\\n,  \\n(40.66345396482097, -73.89205312221256)"},{"1":"56100070","2":"2022-11-28 12:00:00","3":"2022-11-28 12:00:00","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11207","10":"642 RIVERDALE AVENUE","11":"RIVERDALE AVENUE","12":"NEW JERSEY AVENUE","13":"VERMONT STREET","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"DSNY Garage","20":"Closed","21":"NA","22":"The Department of Sanitation investigated and the vehicle owner claimed the vehicle, therefore it could not be classified as abandoned and derelict.","23":"2022-11-28 12:00:00","24":"05 BROOKLYN","25":"NA","26":"BROOKLYN","27":"1014198","28":"181009","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.66345","40":"-73.89205","41":"\\n,  \\n(40.66345396482097, -73.89205312221256)"},{"1":"56096726","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"10460","10":"1742 ADAMS STREET","11":"ADAMS STREET","12":"VAN NEST AVENUE","13":"MORRIS PARK AVENUE","14":"NA","15":"NA","16":"ADDRESS","17":"BRONX","18":"NA","19":"DSNY Garage","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"11 BRONX","25":"2040160052","26":"BRONX","27":"1019796","28":"245823","29":"PHONE","30":"Unspecified","31":"BRONX","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.84133","40":"-73.87153","41":"\\n,  \\n(40.841331013440204, -73.87153266612249)"},{"1":"56096686","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11214","10":"8746 26 AVENUE","11":"26 AVENUE","12":"BENSON AVENUE","13":"BATH AVENUE","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"NA","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"11 BROOKLYN","25":"3068810075","26":"BROOKLYN","27":"987561","28":"155557","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.59364","40":"-73.98808","41":"\\n,  \\n(40.593643620354705, -73.9880780565554)"},{"1":"56102598","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"11206","10":"365 PULASKI STREET","11":"PULASKI STREET","12":"LEWIS AVENUE","13":"STUYVESANT AVENUE","14":"NA","15":"NA","16":"ADDRESS","17":"BROOKLYN","18":"NA","19":"DSNY Garage","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"03 BROOKLYN","25":"3015950066","26":"BROOKLYN","27":"1001956","28":"192083","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.69388","40":"-73.93615","41":"\\n,  \\n(40.69388252408911, -73.93615001394741)"},{"1":"56101755","2":"2022-11-28 12:00:00","3":"<NA>","4":"DSNY","5":"Department of Sanitation","6":"Derelict Vehicles","7":"Derelict Vehicles","8":"Street","9":"10466","10":"4315 CARPENTER AVENUE","11":"CARPENTER AVENUE","12":"EAST 236 STREET","13":"EAST 237 STREET","14":"NA","15":"NA","16":"ADDRESS","17":"BRONX","18":"NA","19":"NA","20":"Open","21":"NA","22":"The Department of Sanitation is in the process of investigating this complaint.","23":"2022-11-28 12:00:00","24":"12 BRONX","25":"2050340024","26":"BRONX","27":"1023318","28":"266125","29":"PHONE","30":"Unspecified","31":"BRONX","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.89704","40":"-73.85869","41":"\\n,  \\n(40.89703885353555, -73.85868540520632)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-1" class="level7">
<p class="heading"></p>
<p>Additional parameters are available to subset and aggregate our data in various ways. Socrata has it’s own query language called <code>SoQL</code>, which codifies these parameters. <code>SoQL</code> is modeled after <code>SQL</code> - a language for querying data stored in large relational databases. Many <code>SoQL</code> parameters have a direct translation to <code>SQL</code> parameters. …and many of the parameters also have a direct translation to our <code>dplyr</code> data wrangling verbs.</p>
<table class="table">
<thead>
<tr class="header">
<th><code>dplyr</code></th>
<th><code>SoQL</code></th>
<th><code>SQL</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>head()</code></td>
<td><code>$limit</code></td>
<td><code>LIMIT</code></td>
</tr>
<tr class="even">
<td><code>select()</code></td>
<td><code>$select</code></td>
<td><code>SELECT</code></td>
</tr>
<tr class="odd">
<td><code>filter()</code></td>
<td><code>$where</code></td>
<td><code>WHERE</code></td>
</tr>
<tr class="even">
<td><code>group_by()</code></td>
<td><code>$group</code></td>
<td><code>GROUP BY</code></td>
</tr>
<tr class="odd">
<td><code>arrange()</code></td>
<td><code>$order</code></td>
<td><code>ORDER BY</code></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="select" class="level3">
<h3 class="anchored" data-anchor-id="select"><code>$select</code></h3>
<p>This dataset has 41 columns, and many of the variables in this dataset will not be immediately relevant to a data science task at hand. By pulling all of the columns, we are requesting much more data (and space on our computers!) than we actually need. We can request that only specific columns be returned via the <code>$select=</code> parameter. We assign the names of the fields we wish to have returned to this parameter. We can find the names of the fields at our data documentation <a href="https://dev.socrata.com/foundry/data.cityofnewyork.us/erm2-nwe9">here</a>.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that we use <code>%&gt;%</code> or <code>|&gt;</code> to string together multiple data wrangling verbs in <code>dplyr</code>. When writing SoQL, we use <code>&amp;</code> to string together multiple parameters (e.g.&nbsp;<code>...?$limit=&lt;value&gt;&amp;$select=&lt;value&gt;</code>.</p>
</div>
</div>
<section id="question-2" class="level6">
<h6 class="anchored" data-anchor-id="question-2">Question</h6>
<div class="question">
<p>Create an API call to return the unique keys and complaint types for the latest 30 entries in NYC’s 311 open dataset. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>nyc_311 %&gt;% 
  select(unique_key, complaint_type) %&gt;% 
  head(30)</code></pre>
<p>Plot the counts of complaint types as a barplot. It should look something like my plot below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_unique_keys &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<p><img src="lab10_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="where" class="level3">
<h3 class="anchored" data-anchor-id="where"><code>$where</code></h3>
<p>It’s most likely that I don’t want just 30 random rows of data, but instead that I want specific subsets of the data. We can use the <code>$where=</code> parameter to filter the data to relevant rows. Just like with <code>filter()</code> in <code>dplyr</code>, we can return cases where the values in a row are equal to (<code>=</code>), not equal to (<code>!=</code>), greater than (<code>&gt;</code>), or less than (<code>&lt;</code>) a value we supply (e.g.&nbsp;<code>$where=&lt;field&gt;=&lt;value&gt;</code> or <code>$where=&lt;field&gt;&gt;&lt;value&gt;</code>)</p>
<section id="percent-encoding" class="level4">
<h4 class="anchored" data-anchor-id="percent-encoding">Percent Encoding</h4>
<p>When determining the value that we are going to supply to the <code>$where</code> parameter, it’s important to keep in mind that not all characters are safe to include in URLs. Some of our keyboard characters serve special purposes in URLs. For instance, the <code>/</code> is used to indicate a sub-directory, and (as we’ve just learned) <code>?</code> are used to indicate that we are about to string a series of parameters to the end of the URL. Because these characters serve special purposes in a URL, we can’t use them when writing out our value in the <code>?where</code> parameter… So what do we do when we want to supply a value that includes one of these special characters?</p>
<p>This is where percent encoding comes in. Whenever we would normally use the special characters listed below on the left in a URL, we would replace it with the percent encoding listed on the right.</p>
<ul>
<li>space <code></code>: <code>%20</code></li>
<li><code>!</code>: <code>%21</code></li>
<li><code>"</code>: <code>%22</code></li>
<li><code>%</code>: <code>%25</code></li>
<li><code>'</code>: <code>%27</code></li>
<li><code>-</code>: <code>%2D</code></li>
</ul>
<p>So for instance, the following: <code>'Noise - Commercial'</code> includes five reserved characters:</p>
<ol type="1">
<li>an apostrophe</li>
<li>a space</li>
<li>a dash</li>
<li>another space</li>
<li>another apostrophe.</li>
</ol>
<p>I would encode that value as follows: <code>%27Noise%20%2D%20Commercial%27</code>.</p>
<div class="question">
<p>Create an API call to return the unique keys, created_dates and complaint_types for the rows where the agency is listed as ‘FDNY’. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>nyc_311 %&gt;%
  select(unique_key, created_date, complaint_type) %&gt;%
  filter(agency == 'FDNY')
  </code></pre>
<p>Plot the data as a point point to match my plot below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_fdny &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<p><img src="lab10_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="section-2" class="level7">
<p class="heading"></p>
<p>We can also string together multiple filter conditions with operators like <code>AND</code>, <code>OR</code>, <code>NOT</code>, <code>IS NULL</code>, etc. <code>$where=&lt;field&gt;=&lt;value&gt; AND &lt;field&gt;=&lt;value&gt;</code>. Note that there are spaces between the first and second condition above, and spaces are reserved characters. We need to replace those spaces with the percent encodings for spaces: <code>$where=&lt;field&gt;=&lt;value&gt;%20AND%20&lt;field&gt;=&lt;value&gt;</code>.</p>
</section>
<section id="question-3" class="level6">
<h6 class="anchored" data-anchor-id="question-3">Question</h6>
<div class="question">
<p>Create an API call to return the unique keys, created dates, incident addresses, and BBLs (this is a unique ID for the tax lot of a building in NYC) for rows with complaint type “Food Poisoning” in Manhattan’s community district 5 (which hosts Times Square and other major NYC tourist attractions). Limit the results to 3000 entries in NYC’s 311 open dataset. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      select(unique_key, created_date, incident_address, bbl) %&gt;% 
      filter(complaint_type == "Food Poisoning" &amp; 
              community_board == "05 MANHATTAN") %&gt;% 
      head(3000)
      </code></pre>
<p>Wrangle the resulting data frame to determine the 5 addresses with the most food poisoning complaints in this community district. It will look something like my data frame below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_food_poisoning &lt;- read_csv(&lt;URL HERE!&gt;)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["incident_address"],"name":[1],"type":["chr"],"align":["left"]},{"label":["count"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1 PENN PLAZA","2":"18"},{"1":"200 5 AVENUE","2":"14"},{"1":"7 AVENUE","2":"14"},{"1":"89 EAST   42 STREET","2":"14"},{"1":"6 EAST 32 STREET","2":"12"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-3" class="level7">
<p class="heading"></p>
</section>
</section>
</section>
</section>
<section id="order" class="level3">
<h3 class="anchored" data-anchor-id="order"><code>$order</code></h3>
<p>The <code>$order</code> parameter will re-arrange the rows, according to the values in a column that we supply, such that the smallest value will appear at the top and the largest value will appear at the bottom (e.g.&nbsp;<code>$order=&lt;field&gt;</code>). We can tack <code>DESC</code> to end of this parameter in order to reverse the sorting order (e.g.&nbsp;<code>$order=&lt;field&gt;%20DESC</code>).</p>
<section id="question-4" class="level6">
<h6 class="anchored" data-anchor-id="question-4">Question</h6>
<div class="question">
<p>Order the previous result in descending order by created date, and the subset to the 500 most recent complaints. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      select(unique_key, created_date, incident_address, bbl) %&gt;% 
      filter(complaint_type == "Food Poisoning" &amp; 
              community_board == "05 MANHATTAN") %&gt;% 
      arrange(desc(created_date)) %&gt;%
      head(500)</code></pre>
<p>Wrangle the resulting data frame to determine the count of complaints at each BBL, and order the results by the count. Store the data frame in <code>nyc_311_food_poisoning_ordered_counts</code>.</p>
<p>I’ve written an API query to return most recent restaurant grades for restaurants in Manhattan’s community district 5. Join the two data frames by the <code>bbl</code>.</p>
<blockquote class="blockquote">
<p>Note that there can be more than one restaurant on a particular tax lot. This means that, if there were x number of Food Poisoning complaints at a particular lot, those complaints may have been associated with any number of restaurants at that lot. BBL is the most specific field we have available for identifying the location associated with a complaint in 311. This means that we are most likely going to have a one-to-many join, and we need to be careful when making assumptions about associations across the datasets.</p>
</blockquote>
<p>Your resulting data frame should look something like mine below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_food_poisoning_ordered &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_food_poisoning_ordered_counts &lt;- &lt;WRANGLE HERE!&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>restaurant_inspections <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://data.cityofnewyork.us/resource/43nn-pn8j.csv?$where=community_board=%27105%27%20AND%20grade%20IS%20NOT%20NULL&amp;$select=camis,dba,bbl,grade,max(grade_date)&amp;$group=camis,dba,bbl,grade&amp;$limit=3000"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Join datasets here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["bbl"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["count"],"name":[2],"type":["int"],"align":["right"]},{"label":["camis"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["dba"],"name":[4],"type":["chr"],"align":["left"]},{"label":["grade"],"name":[5],"type":["chr"],"align":["left"]},{"label":["max_grade_date"],"name":[6],"type":["dttm"],"align":["right"]}],"data":[{"1":"NA","2":"35","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010010029","2":"8","3":"41428124","4":"FORTY EIGHT LOUNGE","5":"A","6":"2019-06-08"},{"1":"1010010029","2":"8","3":"50061031","4":"WHITE & CASE COFFEE BAR & PANTRY","5":"A","6":"2022-07-07"},{"1":"1010010029","2":"8","3":"41201799","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-07-28"},{"1":"1010010029","2":"8","3":"50061032","4":"WHITE & CASE CAFE","5":"A","6":"2022-07-07"},{"1":"1010010029","2":"8","3":"40685858","4":"DEL FRISCO'S STEAKHOUSE","5":"A","6":"2019-11-01"},{"1":"1010010029","2":"8","3":"41420319","4":"OCEANA","5":"A","6":"2022-03-31"},{"1":"1010010029","2":"8","3":"41642195","4":"NBC","5":"A","6":"2021-08-26"},{"1":"1010010029","2":"8","3":"50046175","4":"ZIBETTO ESPRESSO BAR","5":"A","6":"2022-05-23"},{"1":"1008480061","2":"6","3":"41583757","4":"BEECHER'S HANDMADE CHEESE","5":"Z","6":"2022-09-27"},{"1":"1010140001","2":"6","3":"41227884","4":"REGAL CINEMAS","5":"A","6":"2022-02-08"},{"1":"1010140001","2":"6","3":"41173328","4":"DALLAS BBQ","5":"A","6":"2022-02-03"},{"1":"1010140001","2":"6","3":"41532039","4":"AUNTIE ANNE'S PRETZELS","5":"A","6":"2022-02-10"},{"1":"1010140001","2":"6","3":"41663207","4":"FIVE GUYS FAMOUS BURGERS AND FRIES","5":"A","6":"2022-02-10"},{"1":"1010140001","2":"6","3":"41049312","4":"VILLA","5":"B","6":"2022-08-10"},{"1":"1007810002","2":"5","3":"50071926","4":"PENNSY BAR","5":"A","6":"2019-12-24"},{"1":"1007810002","2":"5","3":"50067113","4":"SABI SUSHI","5":"A","6":"2019-08-02"},{"1":"1007810002","2":"5","3":"41649377","4":"DUNKIN',' HUDSON NEWS","5":"A","6":"2022-01-14"},{"1":"1007810002","2":"5","3":"40750766","4":"ZARO'S FAMILY BAKERY","5":"A","6":"2022-11-15"},{"1":"1007810002","2":"5","3":"41060816","4":"PRIMO CAPPUCCINO","5":"C","6":"2019-08-06"},{"1":"1007810002","2":"5","3":"41004133","4":"PENN CAFE & EATERY","5":"A","6":"2022-04-04"},{"1":"1007810002","2":"5","3":"41060816","4":"PRIMO CAPPUCCINO","5":"A","6":"2022-03-07"},{"1":"1007810002","2":"5","3":"41649359","4":"DUNKIN","5":"A","6":"2019-08-02"},{"1":"1007810002","2":"5","3":"40510389","4":"ZARO'S BREAD BASKET","5":"B","6":"2021-08-03"},{"1":"1007810002","2":"5","3":"50067617","4":"RIBALTA MO","5":"A","6":"2019-08-29"},{"1":"1007810002","2":"5","3":"50102823","4":"THE HUB","5":"A","6":"2022-09-20"},{"1":"1007810002","2":"5","3":"40510389","4":"ZARO'S BREAD BASKET","5":"A","6":"2022-10-18"},{"1":"1007810002","2":"5","3":"40546082","4":"DON PEPI PIZZA","5":"A","6":"2022-10-06"},{"1":"1007810002","2":"5","3":"41649356","4":"DUNKIN',' HUDSON NEWS","5":"A","6":"2022-01-20"},{"1":"1007810002","2":"5","3":"50118368","4":"SEATTLE CAFE","5":"A","6":"2022-05-05"},{"1":"1007810002","2":"5","3":"50044853","4":"THE CINNAMON SNAIL","5":"A","6":"2020-01-24"},{"1":"1007810002","2":"5","3":"50067113","4":"SABI SUSHI","5":"P","6":"2017-09-28"},{"1":"1007810002","2":"5","3":"50067221","4":"TACODUMBO (IN THE PENNSY FOOD HALL)","5":"A","6":"2018-12-11"},{"1":"1007810002","2":"5","3":"41570719","4":"CHICKPEA","5":"A","6":"2022-01-24"},{"1":"1007810002","2":"5","3":"41541660","4":"KRISPY KREME","5":"A","6":"2022-08-24"},{"1":"1008250031","2":"5","3":"41579022","4":"BIRRERIA (EATALY)","5":"A","6":"2022-07-27"},{"1":"1008707501","2":"5","3":"41683619","4":"PANERA BREAD","5":"A","6":"2020-02-18"},{"1":"1008707501","2":"5","3":"41453957","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-01-12"},{"1":"1008707501","2":"5","3":"50079907","4":"STICKY'S FINGER JOINT","5":"A","6":"2022-06-27"},{"1":"1008707501","2":"5","3":"50118694","4":"SUBWAY","5":"A","6":"2022-08-12"},{"1":"1008707501","2":"5","3":"41485091","4":"BRAVO PIZZA","5":"A","6":"2022-04-20"},{"1":"1008707501","2":"5","3":"41683619","4":"PANERA BREAD","5":"B","6":"2022-05-24"},{"1":"1008707501","2":"5","3":"40602878","4":"STARBUCKS #7378","5":"A","6":"2022-07-14"},{"1":"1007830070","2":"4","3":"41371272","4":"LOCAL NYC","5":"A","6":"2022-11-15"},{"1":"1007830070","2":"4","3":"50094778","4":"HAAGEN-DAZS","5":"A","6":"2019-07-11"},{"1":"1007830070","2":"4","3":"50056619","4":"LENWICH","5":"A","6":"2019-10-04"},{"1":"1007830070","2":"4","3":"50120328","4":"BLUE BOTTLE COFFEE","5":"A","6":"2022-08-01"},{"1":"1007830070","2":"4","3":"41451698","4":"LUCY'S CANTINA ROYALE","5":"A","6":"2022-11-15"},{"1":"1007840060","2":"4","3":"50110096","4":"SUSHI 35 WEST","5":"A","6":"2022-06-21"},{"1":"1007840060","2":"4","3":"50062530","4":"MARKET CRATES","5":"A","6":"2022-05-17"},{"1":"1007840060","2":"4","3":"50087293","4":"STICK TO MY POT","5":"A","6":"2022-04-11"},{"1":"1008330051","2":"4","3":"41715982","4":"MUI KITCHEN & BAR","5":"C","6":"2019-11-07"},{"1":"1008330051","2":"4","3":"50002294","4":"MISS KOREA BARBECUE \"SUN\"","5":"A","6":"2022-04-11"},{"1":"1008330051","2":"4","3":"41402310","4":"KARAOKE WOW","5":"A","6":"2022-10-25"},{"1":"1008330051","2":"4","3":"41715982","4":"MUI KITCHEN & BAR","5":"A","6":"2022-07-05"},{"1":"1008330051","2":"4","3":"41503714","4":"MISS KOREA","5":"A","6":"2022-04-11"},{"1":"1008330051","2":"4","3":"41695803","4":"MISS KOREA","5":"A","6":"2022-11-17"},{"1":"1008340033","2":"4","3":"50082140","4":"KOBEQUE","5":"A","6":"2019-09-27"},{"1":"1008340033","2":"4","3":"50082149","4":"NOONA NOODLES","5":"A","6":"2019-08-30"},{"1":"1008340033","2":"4","3":"41722462","4":"MK KARAOKE","5":"A","6":"2022-03-16"},{"1":"1008340033","2":"4","3":"50082146","4":"SWEET CHURROS","5":"A","6":"2022-05-09"},{"1":"1008340033","2":"4","3":"50082139","4":"ROLL & KATSU KITCHEN","5":"A","6":"2022-10-24"},{"1":"1008340033","2":"4","3":"50082132","4":"MAMA","5":"A","6":"2022-05-26"},{"1":"1008340033","2":"4","3":"41667050","4":"MARU","5":"B","6":"2019-06-25"},{"1":"1008340033","2":"4","3":"50082140","4":"KOBEQUE","5":"C","6":"2022-02-22"},{"1":"1008340033","2":"4","3":"50082141","4":"KUNG FU TEA","5":"A","6":"2022-05-26"},{"1":"1008340033","2":"4","3":"41667050","4":"MARU","5":"A","6":"2022-04-19"},{"1":"1008340033","2":"4","3":"50082152","4":"PELICANA CHICKEN","5":"A","6":"2022-07-28"},{"1":"1008340033","2":"4","3":"50082148","4":"SEOUL","5":"A","6":"2022-05-09"},{"1":"1008340033","2":"4","3":"50082136","4":"HANOK KOREA HOUSE","5":"A","6":"2022-05-26"},{"1":"1008340033","2":"4","3":"50082144","4":"JIAN BING MAN","5":"A","6":"2022-05-17"},{"1":"1008340033","2":"4","3":"50082137","4":"GOCHUJANG","5":"A","6":"2022-05-17"},{"1":"1009947501","2":"4","3":"50092150","4":"OHANA EXHIBITION KITCHEN","5":"A","6":"2021-11-15"},{"1":"1009947501","2":"4","3":"50108770","4":"SHAKE SHACK BRYANT PARK","5":"A","6":"2022-10-28"},{"1":"1009947501","2":"4","3":"40558850","4":"DECHERT (THE DECH)","5":"A","6":"2022-01-05"},{"1":"1010220061","2":"4","3":"50082966","4":"VANGUARD WINE BAR","5":"A","6":"2022-06-09"},{"1":"1010220061","2":"4","3":"50082953","4":"TACO BELL","5":"A","6":"2022-03-10"},{"1":"1010220061","2":"4","3":"41584936","4":"FAMOUS AMADEUS PIZZA","5":"A","6":"2019-10-21"},{"1":"1010220061","2":"4","3":"50084630","4":"POKE BOWL","5":"A","6":"2022-11-07"},{"1":"1010270006","2":"4","3":"50046997","4":"SOBA NOODLE AZUMA","5":"A","6":"2021-08-05"},{"1":"1010270006","2":"4","3":"41718215","4":"YAKITORI TOTTO","5":"A","6":"2020-02-05"},{"1":"1012800001","2":"4","3":"50054114","4":"PROVA PIZZA BAR","5":"B","6":"2019-11-22"},{"1":"1012800001","2":"4","3":"50086798","4":"JOE COFFEE","5":"A","6":"2022-11-09"},{"1":"1012800001","2":"4","3":"50000259","4":"CENTRAL MARKET NEW YORK","5":"A","6":"2022-03-14"},{"1":"1012800001","2":"4","3":"50054114","4":"PROVA PIZZA BAR","5":"A","6":"2021-08-03"},{"1":"1012800001","2":"4","3":"50088270","4":"TARTINERY","5":"B","6":"2022-02-28"},{"1":"1012800001","2":"4","3":"50063550","4":"THE CAMPBELL","5":"A","6":"2022-09-28"},{"1":"1012800001","2":"4","3":"40928958","4":"HALE & HEARTY SOUP","5":"A","6":"2022-01-27"},{"1":"1012800001","2":"4","3":"40512617","4":"ZARO'S BREAD BASKET","5":"A","6":"2022-04-01"},{"1":"1012800001","2":"4","3":"40368223","4":"OYSTER BAR","5":"A","6":"2022-09-27"},{"1":"1012800001","2":"4","3":"50123927","4":"DIRTY TACO","5":"N","6":"<NA>"},{"1":"1012800001","2":"4","3":"50079524","4":"DOUGHNUT PLANT","5":"A","6":"2022-02-17"},{"1":"1012800001","2":"4","3":"50002514","4":"SHAKE SHACK","5":"A","6":"2022-03-03"},{"1":"1012800001","2":"4","3":"50124533","4":"LUKES LOBSTER","5":"A","6":"2022-08-09"},{"1":"1012800001","2":"4","3":"50046726","4":"CHIRPING CHICKEN","5":"A","6":"2022-06-16"},{"1":"1012800001","2":"4","3":"41721605","4":"FRANKIES DOGS ON THE GO","5":"A","6":"2022-01-20"},{"1":"1012800001","2":"4","3":"40423705","4":"ZARO'S BAKERY","5":"A","6":"2022-06-17"},{"1":"1012800001","2":"4","3":"40876078","4":"CIPRIANI DOLCI","5":"Z","6":"2022-11-17"},{"1":"1012800001","2":"4","3":"50112090","4":"JOE COFFEE COMPANY","5":"A","6":"2022-11-02"},{"1":"1012800001","2":"4","3":"40586000","4":"ZARO'S BREAD BASKET","5":"A","6":"2022-10-28"},{"1":"1012850036","2":"4","3":"50073587","4":"DUKE EATERY","5":"A","6":"2022-04-20"},{"1":"1012850036","2":"4","3":"50074889","4":"JOE & THE JUICE","5":"B","6":"2020-01-27"},{"1":"1012850036","2":"4","3":"50074889","4":"JOE & THE JUICE","5":"A","6":"2022-05-25"},{"1":"1007800002","2":"3","3":"50052660","4":"GARDENIA DELI","5":"A","6":"2022-05-18"},{"1":"1007800002","2":"3","3":"50052660","4":"GARDENIA DELI","5":"B","6":"2020-03-10"},{"1":"1008100001","2":"3","3":"50017041","4":"JUST SALAD","5":"A","6":"2022-04-22"},{"1":"1008100001","2":"3","3":"50119974","4":"MCDONALD'S RESTAURANT","5":"A","6":"2022-07-26"},{"1":"1008100001","2":"3","3":"50089071","4":"NYC PIZZA BY PATINA","5":"A","6":"2022-09-08"},{"1":"1008100001","2":"3","3":"41709760","4":"STELLA 34","5":"A","6":"2020-03-05"},{"1":"1008100001","2":"3","3":"50002119","4":"STARBUCKS","5":"A","6":"2022-03-18"},{"1":"1008100001","2":"3","3":"50091389","4":"AUNTIE ANNE'S PRETZELS, CARVEL","5":"A","6":"2022-09-08"},{"1":"1008100001","2":"3","3":"50045332","4":"ROWLAND'S BAR AND GRILL, CHEF STREET","5":"A","6":"2022-09-01"},{"1":"1008140015","2":"3","3":"50062470","4":"DELGADO'S CANDY STORE","5":"A","6":"2022-04-11"},{"1":"1008140015","2":"3","3":"50072059","4":"DIG INN","5":"Z","6":"2022-08-08"},{"1":"1008140015","2":"3","3":"50068109","4":"LUKE'S LOBSTER","5":"A","6":"2022-04-13"},{"1":"1008140015","2":"3","3":"50064386","4":"GREGORYS COFFEE","5":"A","6":"2022-05-27"},{"1":"1008140015","2":"3","3":"50065815","4":"WICHCRAFT","5":"A","6":"2021-07-27"},{"1":"1008140015","2":"3","3":"50125786","4":"INDAY","5":"A","6":"2022-11-01"},{"1":"1008140015","2":"3","3":"50065931","4":"MIGHTY QUINN'S","5":"A","6":"2022-07-27"},{"1":"1008140015","2":"3","3":"50063197","4":"JUICE GENERATION","5":"A","6":"2021-08-17"},{"1":"1008220009","2":"3","3":"41486522","4":"BOXERS NYC","5":"N","6":"<NA>"},{"1":"1008240011","2":"3","3":"50095781","4":"CHICK-FIL-A","5":"A","6":"2022-05-25"},{"1":"1008240011","2":"3","3":"41510816","4":"OUTBACK STEAKHOUSE","5":"A","6":"2022-03-14"},{"1":"1008240011","2":"3","3":"50098479","4":"PARIS BAGUETTE","5":"A","6":"2022-02-23"},{"1":"1008350041","2":"3","3":"50042077","4":"SUSHI-TERIA","5":"A","6":"2019-06-05"},{"1":"1008350041","2":"3","3":"50072348","4":"TACOMBI","5":"A","6":"2022-09-16"},{"1":"1008350041","2":"3","3":"50060390","4":"CHOP'T","5":"A","6":"2022-03-25"},{"1":"1008350041","2":"3","3":"50112468","4":"CHIPOTLE MEXICAN GRILL #3641uy;","5":"A","6":"2022-02-03"},{"1":"1008350041","2":"3","3":"50107677","4":"STARBUCKS COFFEE #63832","5":"A","6":"2022-11-03"},{"1":"1008350041","2":"3","3":"50071615","4":"Bon Appetit","5":"A","6":"2022-08-01"},{"1":"1008350041","2":"3","3":"50129173","4":"STARBUCKS RESERVE","5":"A","6":"2022-11-15"},{"1":"1008350041","2":"3","3":"50042556","4":"STARBUCKS-entrance 11 west 33rd St","5":"A","6":"2022-03-25"},{"1":"1008350041","2":"3","3":"50075407","4":"JUICE PRESS","5":"A","6":"2019-10-04"},{"1":"1008350041","2":"3","3":"50051486","4":"STATE GRILL AND BAR","5":"A","6":"2022-05-18"},{"1":"1008440026","2":"3","3":"41623468","4":"POTBELLY SANDWICH SHOP","5":"A","6":"2022-03-23"},{"1":"1008440026","2":"3","3":"50102669","4":"POKE BOWL","5":"A","6":"2022-07-25"},{"1":"1008440026","2":"3","3":"40815605","4":"CHOP'T","5":"A","6":"2022-03-09"},{"1":"1008440026","2":"3","3":"40512002","4":"RAINBOW FALAFEL","5":"A","6":"2022-01-06"},{"1":"1008740010","2":"3","3":"50085326","4":"GUPSHUP","5":"A","6":"2019-07-29"},{"1":"1008740010","2":"3","3":"50085326","4":"GUPSHUP","5":"B","6":"2020-03-09"},{"1":"1009970001","2":"3","3":"50092906","4":"MCDONALD'S","5":"A","6":"2021-11-30"},{"1":"1009970001","2":"3","3":"50068948","4":"STARBUCKS COFFEE #49550","5":"A","6":"2022-09-14"},{"1":"1010040020","2":"3","3":"50110660","4":"TOMO TOMO","5":"A","6":"2022-07-27"},{"1":"1010040020","2":"3","3":"50101827","4":"PLANT JUNKIE","5":"A","6":"2022-06-06"},{"1":"1010040020","2":"3","3":"50102079","4":"SEAMORE'S MARKET BAR @ URBANSPACE","5":"A","6":"2022-07-27"},{"1":"1010040020","2":"3","3":"50117142","4":"BULL CHICKEN","5":"N","6":"<NA>"},{"1":"1010040020","2":"3","3":"50119233","4":"GABRIELA'S TAQUERIA","5":"A","6":"2022-05-11"},{"1":"1010040020","2":"3","3":"50110947","4":"TWENTY ONE GRAINS","5":"A","6":"2021-09-29"},{"1":"1010040020","2":"3","3":"50101729","4":"GOFISH SUSHIBOX @ URBANSPACE","5":"A","6":"2022-04-18"},{"1":"1010040020","2":"3","3":"50120937","4":"CASA TOSCANA","5":"A","6":"2022-07-27"},{"1":"1010040020","2":"3","3":"50039131","4":"PRET A MANGER","5":"A","6":"2022-10-12"},{"1":"1010040020","2":"3","3":"50120859","4":"BAO BY KAYA","5":"A","6":"2022-06-02"},{"1":"1010040020","2":"3","3":"50014653","4":"ALDO SOHM WINE BAR","5":"A","6":"2022-08-10"},{"1":"1010040020","2":"3","3":"50094508","4":"BISTRO CATERERS","5":"A","6":"2022-03-15"},{"1":"1010040020","2":"3","3":"40827432","4":"STARBUCKS","5":"A","6":"2022-04-05"},{"1":"1010040020","2":"3","3":"40383464","4":"LE BERNARDIN","5":"A","6":"2022-02-10"},{"1":"1010040020","2":"3","3":"41315226","4":"CHOP'T","5":"A","6":"2022-02-28"},{"1":"1010040020","2":"3","3":"50100485","4":"PITA YEERO","5":"A","6":"2022-07-27"},{"1":"1010040020","2":"3","3":"50100839","4":"ROBERTA'S PIZZA","5":"A","6":"2022-07-27"},{"1":"1010040020","2":"3","3":"50101681","4":"PARTNERS COFFEE","5":"A","6":"2022-08-18"},{"1":"1010040020","2":"3","3":"50084728","4":"SIDLEY AUSTIN LLP","5":"A","6":"2022-07-19"},{"1":"1010040020","2":"3","3":"50123997","4":"L'AMI PIERRE","5":"N","6":"<NA>"},{"1":"1010130029","2":"3","3":"50014078","4":"RED LOBSTER","5":"A","6":"2022-11-22"},{"1":"1012570002","2":"3","3":"50063195","4":"JOE COFFEE COMPANY","5":"A","6":"2022-04-13"},{"1":"1012570002","2":"3","3":"50098312","4":"Enfes NYC","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099548","4":"BIG Mozz","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50099749","4":"WOOPS","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099423","4":"MAYHEM SMOKEHOUSE","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50099479","4":"DOUGHNUTTERY","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099172","4":"Memphis Seoul","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50100076","4":"HOME FRITE","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50099905","4":"WINTER PIE SHOP","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099574","4":"BOLIVIA LLAMA PARTY","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099404","4":"ARANCINI BROS","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099127","4":"WAFELS & DINGES","5":"A","6":"2022-11-14"},{"1":"1012570002","2":"3","3":"50129314","4":"BULL CHICKEN","5":"Z","6":"2022-11-21"},{"1":"1012570002","2":"3","3":"50099145","4":"MAX BRENNER","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50099460","4":"WontonTiva","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099292","4":"BUN RAMEN","5":"P","6":"2019-12-13"},{"1":"1012570002","2":"3","3":"50099579","4":"PIEROGI BOYS","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50099474","4":"BAO by Kaya","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099947","4":"BERG PASTRAMI","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099977","4":"CASA TOSCANA (Winter Village)","5":"A","6":"2020-02-06"},{"1":"1012570002","2":"3","3":"50099292","4":"BUN RAMEN","5":"B","6":"2020-01-30"},{"1":"1012570002","2":"3","3":"50099673","4":"DESTINATION DUMPLINGS","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099498","4":"PICKLE ME PETE","5":"N","6":"<NA>"},{"1":"1012570002","2":"3","3":"50099508","4":"JICAMA","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50100035","4":"BREEZY HILL ORCHARD","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50098584","4":"NO CHEWING ALLOWED","5":"A","6":"2022-11-14"},{"1":"1012570002","2":"3","3":"50099801","4":"THE RINKSIDE & LODGE BAR","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50100061","4":"DULCINEA","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50099221","4":"UNITED CHOCOLATE WORKS","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50100019","4":"TWO TABLESPOONS","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50097939","4":"DO , Cookie Dough Confection","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50100058","4":"BAKED CHEESE HAUS","5":"A","6":"2021-11-24"},{"1":"1012570002","2":"3","3":"50100294","4":"TOPAREPA","5":"A","6":"2019-12-18"},{"1":"1012570002","2":"3","3":"50099226","4":"FRIDA'S FAVORITES","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50099556","4":"LA SONRISA EMPANADAS","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"3","3":"50100081","4":"AUX MERVEILLEUX DE FRED","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"3","3":"50098928","4":"S'MORES N'MORE","5":"A","6":"2022-11-15"},{"1":"1012570002","2":"3","3":"50099744","4":"OVENLY (Winter Village)","5":"A","6":"2019-12-11"},{"1":"1012580009","2":"3","3":"50036191","4":"GABRIEL KREUTHER","5":"A","6":"2022-03-17"},{"1":"1012580009","2":"3","3":"50060954","4":"JOE & THE JUICE","5":"A","6":"2021-08-11"},{"1":"1012580009","2":"3","3":"41626556","4":"STK Steakhouse Midtown","5":"A","6":"2019-12-10"},{"1":"1012580009","2":"3","3":"50070146","4":"SWEETGREEN","5":"A","6":"2021-07-28"},{"1":"1012720066","2":"3","3":"41544844","4":"MANGIA","5":"A","6":"2022-03-08"},{"1":"1012750014","2":"3","3":"50117190","4":"DIG","5":"A","6":"2022-04-27"},{"1":"1012760042","2":"3","3":"50017241","4":"6B","5":"A","6":"2022-09-02"},{"1":"1012760042","2":"3","3":"50071254","4":"BLUE BOTTLE COFFEE","5":"A","6":"2022-04-04"},{"1":"1012760042","2":"3","3":"41212839","4":"PERA MEDITERRANEAN BRASSERIE","5":"A","6":"2021-08-19"},{"1":"1013097502","2":"3","3":"50089200","4":"DUNKIN","5":"A","6":"2022-03-17"},{"1":"1013097502","2":"3","3":"50088291","4":"SWEETCATCH POKE","5":"A","6":"2022-10-13"},{"1":"1013097502","2":"3","3":"50111580","4":"MAMA GANOUSH","5":"N","6":"<NA>"},{"1":"1013097502","2":"3","3":"40977865","4":"BOBBY VAN'S STEAKHOUSE","5":"A","6":"2022-04-26"},{"1":"1013097502","2":"3","3":"50119660","4":"DOS TOROS","5":"A","6":"2022-08-12"},{"1":"1007800036","2":"2","3":"50098218","4":"STICKY'S FINGER JOINT","5":"A","6":"2022-02-22"},{"1":"1007800036","2":"2","3":"50106764","4":"NAYA","5":"A","6":"2021-11-10"},{"1":"1007800036","2":"2","3":"40570278","4":"STARBUCKS","5":"A","6":"2022-07-20"},{"1":"1007810001","2":"2","3":"50044592","4":"CHICKEN, FRIES CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044522","4":"CLUB GRILL","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044778","4":"CHICKEN, FRIES CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045069","4":"BAR (GARDEN BAR 6TH FLOOR)","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044513","4":"BT4 AISLE B","5":"A","6":"2019-06-21"},{"1":"1007810001","2":"2","3":"50045092","4":"HOT DOG CONCESSION (FC6100)","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044785","4":"FARLEY'S BAR","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044617","4":"CARNEGIE DELICATESSEN","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044623","4":"BAR","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044791","4":"CHICKEN, FRIES CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045059","4":"HILL COUNTRY","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044857","4":"HOT DOG CONCESSION","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50045063","4":"SUITE 200, 1879","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"40946369","4":"NICK & STEF'S STEAKHOUSE","5":"A","6":"2022-02-10"},{"1":"1007810001","2":"2","3":"50044784","4":"JEAN-GEORGES SIMPLY TACOS, TASTY NACHO BAR","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044622","4":"Daily Burger","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50045101","4":"GARDEN MARKET","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044593","4":"GARDEN PUB","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044612","4":"Bar at the Garden","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044602","4":"BAR AT THE GARDEN","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50045065","4":"CHICKEN, CELEBRITY CHEF,DELI CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044720","4":"SENZAI SUSHI, LOBSTER SHRIMP ROLL BY AQUA GRILL","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044786","4":"GARDEN MARKET","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044590","4":"HAMBURGER, DAILY BURGER","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044774","4":"HAMBURGER, CELEBRITY CHEF, CHARLIE PALMER","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044595","4":"GARDEN MARKET","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044599","4":"GARDEN MARKET","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044589","4":"BAR AT THE GARDEN","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044603","4":"CASA NONNA PIZZA","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044627","4":"BEER PUB (BRIDGE PUB)","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044606","4":"SAUSAGE BOSS","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044533","4":"GREEN ROOM","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044619","4":"GARDEN MARKET","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045071","4":"PRESS ROOM","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044717","4":"GARDEN MARKET, STREET/HEALTH (FA6090)","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044624","4":"GARDEN MARKET HOT DOG CONCESSION","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044782","4":"Garden Market, Jean Georges Simply Chicken","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044630","4":"HOT DOG CONCESSION, GARDEN MARKET","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044610","4":"GARDEN MARKET 36, 37","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044594","4":"GARDEN MARKET","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044631","4":"GARDEN MARKET – HOT DOG CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044616","4":"CHICKEN & FRIES","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044475","4":"THEATER (FLY)","5":"A","6":"2019-06-21"},{"1":"1007810001","2":"2","3":"50045064","4":"DAILY BURGER","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045055","4":"GARDEN MARKET HOT DOG CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044585","4":"BAR GARDEN","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044978","4":"EVENT LEVEL CLUB (DELTA SKY 360 BAR) BA5075","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045058","4":"DRAFT KING","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045109","4":"DUNKIN , JEAN GEORGES SIMPLY CHICKEN","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044588","4":"GARDEN MARKET","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045111","4":"MADISON CLUB","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044780","4":"CASA NONNA","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045112","4":"GARDEN PUB","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044520","4":"GOLD BAR B BT6","5":"A","6":"2019-06-21"},{"1":"1007810001","2":"2","3":"50044777","4":"GARDEN MARKET, DUNKIN","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044605","4":"Garden Market 35, 36","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044537","4":"BT3 AISLE A","5":"A","6":"2019-06-21"},{"1":"1007810001","2":"2","3":"50044601","4":"GARDEN MARKET 35, 35","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044598","4":"GARDEN MARKET","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044587","4":"CRAFT BEER GARDEN","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50045110","4":"EMPLOYEE FEEDING","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044540","4":"HOT DOG CONCESSION","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044518","4":"GOLD BAR A BT5","5":"A","6":"2019-06-21"},{"1":"1007810001","2":"2","3":"50044860","4":"GARDEN MARKET IN-SEAT KITCHEN","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50044718","4":"BAR AT THE GARDEN (BA6110)","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044600","4":"GARDEN MARKET 37, 38","5":"A","6":"2019-05-30"},{"1":"1007810001","2":"2","3":"50044626","4":"CASA NONNA PIZZA CONCESSION","5":"A","6":"2019-06-19"},{"1":"1007810001","2":"2","3":"50089143","4":"L8 LOUNGE","5":"A","6":"2019-05-30"},{"1":"1007890062","2":"2","3":"50121449","4":"TACO BELL CANTINA","5":"A","6":"2022-05-02"},{"1":"1007890062","2":"2","3":"41243427","4":"DUNKIN'","5":"A","6":"2022-02-01"},{"1":"1007890062","2":"2","3":"41467392","4":"POPEYES LOUISIANA KITCHEN","5":"A","6":"2022-07-07"},{"1":"1008020001","2":"2","3":"41137141","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-06-14"},{"1":"1008020001","2":"2","3":"40906867","4":"SUBWAY","5":"A","6":"2022-06-14"},{"1":"1008020006","2":"2","3":"50037583","4":"SID GOLD'S REQUEST ROOM","5":"A","6":"2019-08-29"},{"1":"1008020006","2":"2","3":"41387224","4":"B AND B RESTAURANT","5":"C","6":"2022-11-21"},{"1":"1008030038","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008110021","2":"2","3":"50065446","4":"POKE BAR","5":"A","6":"2020-02-18"},{"1":"1008110021","2":"2","3":"50065446","4":"POKE BAR","5":"Z","6":"2022-09-02"},{"1":"1008110021","2":"2","3":"50048541","4":"SHAKE SHACK","5":"A","6":"2022-03-22"},{"1":"1008130064","2":"2","3":"50044591","4":"JIMMY'S","5":"A","6":"2020-03-11"},{"1":"1008130064","2":"2","3":"50088233","4":"CAFE HESTIA","5":"A","6":"2022-11-16"},{"1":"1008130064","2":"2","3":"50044591","4":"JIMMY'S","5":"C","6":"2017-11-06"},{"1":"1008130064","2":"2","3":"41026692","4":"SHAMAS DELI","5":"A","6":"2022-07-15"},{"1":"1008130064","2":"2","3":"50044591","4":"JIMMY'S","5":"B","6":"2019-01-09"},{"1":"1008150001","2":"2","3":"50064080","4":"STARBUCKS COFFEE","5":"A","6":"2022-02-10"},{"1":"1008150001","2":"2","3":"50051064","4":"GREGORYS COFFEE","5":"A","6":"2022-05-23"},{"1":"1008197502","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008220078","2":"2","3":"50119781","4":"DOS TOROS","5":"N","6":"<NA>"},{"1":"1008230002","2":"2","3":"41084776","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-07-01"},{"1":"1008230002","2":"2","3":"50088217","4":"CAVA","5":"Z","6":"2022-09-26"},{"1":"1008250029","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008270049","2":"2","3":"50041097","4":"INDAY","5":"B","6":"2020-03-09"},{"1":"1008270049","2":"2","3":"50035353","4":"LA PECORA BIANCA","5":"A","6":"2019-12-12"},{"1":"1008270049","2":"2","3":"41714279","4":"NUM PANG SANDWICH SHOP","5":"A","6":"2021-09-01"},{"1":"1008270049","2":"2","3":"50041097","4":"INDAY","5":"A","6":"2019-09-10"},{"1":"1008270064","2":"2","3":"41240424","4":"HILL COUNTRY","5":"N","6":"<NA>"},{"1":"1008320076","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008340049","2":"2","3":"50095347","4":"TEAMAKERS","5":"A","6":"2022-10-18"},{"1":"1008340049","2":"2","3":"41718710","4":"BCD TOFU HOUSE","5":"A","6":"2021-12-01"},{"1":"1008340049","2":"2","3":"50091045","4":"PINKBERRY","5":"A","6":"2022-06-27"},{"1":"1008340049","2":"2","3":"41185899","4":"POCHA 32","5":"B","6":"2022-09-20"},{"1":"1008340049","2":"2","3":"50126957","4":"NAYA","5":"N","6":"<NA>"},{"1":"1008340049","2":"2","3":"41384019","4":"LEGENDS NYC","5":"A","6":"2019-10-08"},{"1":"1008340049","2":"2","3":"50009132","4":"DUNKIN","5":"A","6":"2022-06-06"},{"1":"1008347501","2":"2","3":"50120719","4":"SIR JOHN'S NYC","5":"N","6":"<NA>"},{"1":"1008347501","2":"2","3":"50041709","4":"MARKET CRATES","5":"A","6":"2022-05-09"},{"1":"1008347501","2":"2","3":"50061140","4":"TURNTABLE CHICKEN JAZZ","5":"A","6":"2020-01-27"},{"1":"1008390060","2":"2","3":"50060428","4":"THE CIBO","5":"A","6":"2022-01-27"},{"1":"1008430022","2":"2","3":"41226387","4":"CAFE MANNA","5":"B","6":"2022-05-16"},{"1":"1008430022","2":"2","3":"50060922","4":"POKEWORKS","5":"A","6":"2021-07-29"},{"1":"1008430022","2":"2","3":"41226387","4":"CAFE MANNA","5":"A","6":"2020-02-21"},{"1":"1008440017","2":"2","3":"50051545","4":"TSURUTONTAN UDON NOODLE BRASSERIE","5":"B","6":"2020-02-13"},{"1":"1008460019","2":"2","3":"41411827","4":"PRET A MANGER","5":"A","6":"2022-01-13"},{"1":"1008470027","2":"2","3":"50119855","4":"ABC KITCHEN","5":"A","6":"2022-11-14"},{"1":"1008470027","2":"2","3":"50122721","4":"ABC COCINA/ABC V","5":"A","6":"2022-11-14"},{"1":"1008470062","2":"2","3":"41106233","4":"ROSA MEXICANO","5":"A","6":"2022-03-01"},{"1":"1008487503","2":"2","3":"41664978","4":"GRAMERCY TAVERN","5":"A","6":"2022-11-22"},{"1":"1008490023","2":"2","3":"41658037","4":"MIZU JAPANESE","5":"A","6":"2019-04-24"},{"1":"1008510061","2":"2","3":"50033747","4":"DIG INN","5":"A","6":"2021-07-23"},{"1":"1008610044","2":"2","3":"41300926","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2021-08-26"},{"1":"1008620029","2":"2","3":"50012068","4":"GREGORY'S COFFEE","5":"A","6":"2022-07-15"},{"1":"1008620029","2":"2","3":"50088095","4":"SWEETGREEN","5":"A","6":"2020-02-28"},{"1":"1008620029","2":"2","3":"50103600","4":"JUICE GENERATION","5":"A","6":"2022-09-02"},{"1":"1008620029","2":"2","3":"41411833","4":"PRET A MANGER","5":"A","6":"2022-03-23"},{"1":"1008670012","2":"2","3":"50114158","4":"CHILI","5":"A","6":"2022-11-01"},{"1":"1008690061","2":"2","3":"50103438","4":"CAVA MEZZO GRILL","5":"A","6":"2022-04-13"},{"1":"1008690061","2":"2","3":"50114171","4":"UPSIDE PIZZA","5":"A","6":"2022-11-01"},{"1":"1008690061","2":"2","3":"50018146","4":"GREGORY'S COFFEE","5":"A","6":"2022-06-06"},{"1":"1008790001","2":"2","3":"50003035","4":"JUICE GENERATION","5":"A","6":"2022-08-16"},{"1":"1008790001","2":"2","3":"50118788","4":"ABOUT TIME COFFEE","5":"A","6":"2022-08-18"},{"1":"1008790001","2":"2","3":"50122131","4":"Paris Baguette","5":"A","6":"2022-07-08"},{"1":"1008790009","2":"2","3":"50086357","4":"KUNG FU TEA & TKK FRIED CHICKEN","5":"A","6":"2022-09-27"},{"1":"1008790009","2":"2","3":"50097775","4":"AREPPAS","5":"A","6":"2022-02-24"},{"1":"1008797501","2":"2","3":"50061322","4":"SOUS VIDE KITCHEN: A VIRTUAL FOOD HALL","5":"A","6":"2022-08-16"},{"1":"1009950001","2":"2","3":"50075859","4":"WELL PLATED","5":"A","6":"2021-08-11"},{"1":"1009960054","2":"2","3":"40397780","4":"VIRGIL'S BBQ","5":"A","6":"2022-02-16"},{"1":"1009987501","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1009990048","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010030005","2":"2","3":"50128396","4":"TRADISYON NYC","5":"A","6":"2022-10-18"},{"1":"1010030005","2":"2","3":"50128394","4":"LADY WONG","5":"A","6":"2022-10-18"},{"1":"1010030005","2":"2","3":"50124045","4":"ASHES BURNNIT","5":"A","6":"2022-10-18"},{"1":"1010030005","2":"2","3":"50126965","4":"SLING BAR","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50123933","4":"HAINAN JONES","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50124467","4":"KOPIFELLAS","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50128175","4":"PADI D' NYC","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50124853","4":"PRAWNAHOLIC","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50125452","4":"SMOKIN' JOE","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50124565","4":"DAISY DREAM","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50128174","4":"MAMAK'S CORNER","5":"A","6":"2022-10-18"},{"1":"1010030005","2":"2","3":"50126118","4":"DUNKIN DONUTS","5":"A","6":"2022-08-22"},{"1":"1010030005","2":"2","3":"50123704","4":"WHITE RESTAURANT","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"41236763","4":"BOBBY VAN'S GRILL","5":"A","6":"2019-12-18"},{"1":"1010030005","2":"2","3":"50124096","4":"MR FRIED RICE","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50127862","4":"YUM YUBU","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50004552","4":"THE LITTLE BEET , MELT SHOP","5":"A","6":"2022-11-15"},{"1":"1010050029","2":"2","3":"50042176","4":"OCEAN PRIME","5":"A","6":"2019-10-28"},{"1":"1010050029","2":"2","3":"40397486","4":"CREDIT AGRICOLE-CBI EXECUTIVE ROOM","5":"A","6":"2022-02-11"},{"1":"1010050029","2":"2","3":"40403988","4":"LE CAFE (CREDIT AGRICOLE)","5":"A","6":"2022-01-12"},{"1":"1010050029","2":"2","3":"41687902","4":"STARBUCKS","5":"A","6":"2022-07-07"},{"1":"1010050029","2":"2","3":"50014249","4":"CHADBOURNE & PARKE EMPLOYEE CAFETERIA","5":"A","6":"2022-07-28"},{"1":"1010060013","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010070029","2":"2","3":"50100706","4":"BLUE BOTTLE COFFEE","5":"A","6":"2021-11-30"},{"1":"1010070029","2":"2","3":"50092790","4":"QUALITY BISTRO","5":"A","6":"2022-09-14"},{"1":"1010070029","2":"2","3":"50087268","4":"WAGAMAMA","5":"N","6":"<NA>"},{"1":"1010070049","2":"2","3":"50057912","4":"BLACK TAP","5":"A","6":"2022-07-06"},{"1":"1010080029","2":"2","3":"40373113","4":"ASTRO RESTAURANT","5":"A","6":"2022-11-17"},{"1":"1010080029","2":"2","3":"41549763","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-03-16"},{"1":"1010080029","2":"2","3":"50065703","4":"MAKIMAKI","5":"A","6":"2022-05-12"},{"1":"1010080029","2":"2","3":"40843676","4":"PAZZA NOTTE","5":"A","6":"2022-09-20"},{"1":"1010120029","2":"2","3":"50118421","4":"MARGARITAVILLE","5":"A","6":"2022-08-17"},{"1":"1010120029","2":"2","3":"50110210","4":"License to Chill/Joe Merchant's Coffee & Provisions","5":"A","6":"2022-01-14"},{"1":"1010120029","2":"2","3":"50117654","4":"LANDSHARK BAR & GRILL","5":"A","6":"2022-06-23"},{"1":"1010150004","2":"2","3":"50118147","4":"MCDONALD'S","5":"A","6":"2022-01-06"},{"1":"1010150029","2":"2","3":"50001045","4":"BEN & JERRY'S","5":"A","6":"2022-03-14"},{"1":"1010150029","2":"2","3":"41128211","4":"HARD ROCK CAFE","5":"A","6":"2022-03-31"},{"1":"1010150029","2":"2","3":"40850055","4":"STAR LITE DELI","5":"A","6":"2022-09-22"},{"1":"1010150029","2":"2","3":"50080199","4":"MACCHIATO ESPRESSO & WINE BAR","5":"A","6":"2019-11-04"},{"1":"1010150029","2":"2","3":"50107573","4":"TACO BELL","5":"A","6":"2022-10-28"},{"1":"1010150029","2":"2","3":"40396159","4":"CARMINE'S","5":"A","6":"2022-02-08"},{"1":"1010150029","2":"2","3":"41579102","4":"BUBBA GUMP SHRIMP CO.","5":"N","6":"<NA>"},{"1":"1010197501","2":"2","3":"40399472","4":"OLIVE GARDEN","5":"A","6":"2022-10-05"},{"1":"1010197501","2":"2","3":"40897778","4":"RENAISSANCE HOTEL","5":"A","6":"2022-02-15"},{"1":"1010197501","2":"2","3":"50082993","4":"MIAS BAKERY TIMES SQUARE","5":"A","6":"2022-08-17"},{"1":"1010230002","2":"2","3":"41297316","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-03-08"},{"1":"1010230002","2":"2","3":"50059267","4":"DIG INN","5":"A","6":"2022-08-31"},{"1":"1010230018","2":"2","3":"50120115","4":"BEAST & BUTTERFLIES","5":"A","6":"2022-05-03"},{"1":"1010230018","2":"2","3":"50041069","4":"MCDONALD'S","5":"A","6":"2022-06-17"},{"1":"1010270103","2":"2","3":"50108106","4":"POPEYES LOUISIANA KITCHEN","5":"A","6":"2022-06-06"},{"1":"1010287501","2":"2","3":"41549759","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-07-06"},{"1":"1010287501","2":"2","3":"50087039","4":"BAR CULACCINO","5":"A","6":"2019-05-29"},{"1":"1010290014","2":"2","3":"50099833","4":"NORDSTROM BROADWAY BAR","5":"A","6":"2022-08-31"},{"1":"1010290014","2":"2","3":"50099832","4":"NORDSTROM WOLF","5":"A","6":"2022-08-11"},{"1":"1010290014","2":"2","3":"50099835","4":"JEANNIE'S, HANI PACIFIC/OH MOCHI DONUTS","5":"A","6":"2020-01-22"},{"1":"1010290014","2":"2","3":"50099829","4":"NORDSTROM BISTRO VERDE","5":"A","6":"2020-01-22"},{"1":"1010290014","2":"2","3":"50099834","4":"NORDSTROM SHOE BAR","5":"A","6":"2020-02-26"},{"1":"1012660001","2":"2","3":"41564956","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"50119497","4":"LE ROCK","5":"N","6":"<NA>"},{"1":"1012660001","2":"2","3":"41564928","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"50097018","4":"EQX ROCKEFELLER CAFE","5":"A","6":"2020-03-06"},{"1":"1012660001","2":"2","3":"41564948","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"41603622","4":"POTBELLY SANDWICH WORKS","5":"A","6":"2022-07-28"},{"1":"1012660001","2":"2","3":"41564934","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"41071308","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"40703791","4":"STARBUCKS","5":"A","6":"2022-02-25"},{"1":"1012660001","2":"2","3":"50013293","4":"LIMANI","5":"A","6":"2019-06-06"},{"1":"1012660001","2":"2","3":"41599164","4":"DEL FRISCO'S GRILLE","5":"A","6":"2022-11-15"},{"1":"1012660001","2":"2","3":"50035219","4":"NBC CAFETERIA (11th FLR)","5":"A","6":"2022-07-29"},{"1":"1012660001","2":"2","3":"41412916","4":"BEN & JERRY'S","5":"A","6":"2022-02-07"},{"1":"1012660001","2":"2","3":"41564963","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"41509909","4":"BILL'S BAR & BURGER ROCKEFELLER CENTER","5":"A","6":"2022-11-15"},{"1":"1012660001","2":"2","3":"41564945","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012687501","2":"2","3":"50075318","4":"AZULE CANTINA","5":"A","6":"2022-07-26"},{"1":"1012687501","2":"2","3":"50088573","4":"PROVIDENCE EQUITY","5":"A","6":"2022-03-23"},{"1":"1012687501","2":"2","3":"50004133","4":"FOGO DE CHAO","5":"A","6":"2019-05-20"},{"1":"1012687501","2":"2","3":"50087392","4":"THE VIEW AT CENTERVIEW PARTNERS","5":"A","6":"2022-03-23"},{"1":"1012687501","2":"2","3":"41032440","4":"CLIFFORD CHANCE CAFETERIA","5":"A","6":"2022-04-04"},{"1":"1012710063","2":"2","3":"41664655","4":"POTBELLY SANDWICH WORKS","5":"A","6":"2022-02-25"},{"1":"1012710069","2":"2","3":"50016774","4":"BEYOND SUSHI NYC INC","5":"A","6":"2022-08-10"},{"1":"1012710069","2":"2","3":"50054044","4":"K-BAP","5":"A","6":"2022-11-17"},{"1":"1012710167","2":"2","3":"50003042","4":"BENGAL TIGER INDIAN FOOD","5":"A","6":"2022-05-20"},{"1":"1012710167","2":"2","3":"50119502","4":"SHINJUKU RAMEN","5":"A","6":"2022-04-18"},{"1":"1012720063","2":"2","3":"41248584","4":"BENIHANA","5":"A","6":"2022-09-28"},{"1":"1012720063","2":"2","3":"40584030","4":"HALE & HEARTY SOUP","5":"A","6":"2022-03-16"},{"1":"1012720063","2":"2","3":"41118839","4":"NOBU FIFTY SEVEN","5":"A","6":"2020-01-22"},{"1":"1012730033","2":"2","3":"41151521","4":"PALETTE","5":"A","6":"2022-03-29"},{"1":"1012730033","2":"2","3":"50116760","4":"BG RESTAURANT","5":"N","6":"<NA>"},{"1":"1012730033","2":"2","3":"41151507","4":"BG RESTAURANT","5":"A","6":"2021-08-18"},{"1":"1012760023","2":"2","3":"41305028","4":"MADISON & VINE","5":"A","6":"2022-02-16"},{"1":"1012760023","2":"2","3":"41305028","4":"MADISON & VINE","5":"B","6":"2020-01-14"},{"1":"1012870063","2":"2","3":"41309782","4":"FIG & OLIVE MIDTOWN","5":"A","6":"2022-02-14"},{"1":"1012900015","2":"2","3":"40396037","4":"SMILER'S DELI","5":"B","6":"2022-03-03"},{"1":"1012900015","2":"2","3":"40396037","4":"SMILER'S DELI","5":"A","6":"2019-12-03"},{"1":"1012950058","2":"2","3":"41705626","4":"ZUCKERS BAGELS","5":"A","6":"2022-06-07"},{"1":"1012950058","2":"2","3":"41456225","4":"PREVITI PIZZA","5":"A","6":"2022-04-27"},{"1":"1012950058","2":"2","3":"50119231","4":"DUNKIN","5":"A","6":"2022-06-02"},{"1":"1012950058","2":"2","3":"50110603","4":"LE PAIN QUOTIDIEN","5":"A","6":"2022-11-02"},{"1":"1007780043","2":"1","3":"40402231","4":"THE TRIPLE CROWN","5":"A","6":"2022-07-20"},{"1":"1007780046","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1007780070","2":"1","3":"50038614","4":"HAYMAKER BAR & KITCHEN","5":"A","6":"2022-10-18"},{"1":"1007780071","2":"1","3":"40385693","4":"SALUMERIA BEILLESE, BIRICCHINO REST","5":"A","6":"2022-01-05"},{"1":"1007790007","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1007790041","2":"1","3":"40539007","4":"MUSTANG HARRY'S","5":"A","6":"2022-02-08"},{"1":"1007840074","2":"1","3":"50047667","4":"LIBERTY BAGEL MIDTOWN","5":"A","6":"2022-06-17"},{"1":"1007850001","2":"1","3":"50084938","4":"TACO BELL CANTINA","5":"A","6":"2022-08-08"},{"1":"1007850025","2":"1","3":"50071474","4":"BEST BAGEL & COFFEE","5":"A","6":"2022-03-22"},{"1":"1007850037","2":"1","3":"40643221","4":"HALE & HEARTY SOUP","5":"A","6":"2021-07-27"},{"1":"1007850037","2":"1","3":"40602855","4":"STARBUCKS","5":"A","6":"2022-10-17"},{"1":"1007850037","2":"1","3":"50066245","4":"BREAD & BUTTER","5":"A","6":"2020-02-18"},{"1":"1007850041","2":"1","3":"41460700","4":"PIG 'N' WHISTLE","5":"A","6":"2022-04-27"},{"1":"1007850041","2":"1","3":"50045193","4":"THE BREAD FACTORY CAFE","5":"A","6":"2019-09-26"},{"1":"1007860076","2":"1","3":"50059837","4":"GOGI 37","5":"A","6":"2019-07-24"},{"1":"1007860076","2":"1","3":"50043252","4":"DISTRICT SOCIAL","5":"A","6":"2022-06-13"},{"1":"1007880001","2":"1","3":"50006741","4":"GRACE CAFE","5":"A","6":"2019-11-22"},{"1":"1007880001","2":"1","3":"50096582","4":"WOK TO WALK, LOS TACOS HERMANOS, POKE BOWL, & SAKURA OF JAPAN","5":"B","6":"2022-09-14"},{"1":"1007880037","2":"1","3":"40545329","4":"BEN'S DELI","5":"A","6":"2022-09-14"},{"1":"1007880046","2":"1","3":"40609248","4":"HEALTH KING","5":"A","6":"2022-11-10"},{"1":"1007880049","2":"1","3":"50002767","4":"THE SKYLARK","5":"A","6":"2019-06-05"},{"1":"1007880049","2":"1","3":"40847000","4":"PRET A MANGER","5":"A","6":"2022-06-17"},{"1":"1007880049","2":"1","3":"50016102","4":"CAFE GRUMPY","5":"A","6":"2022-10-18"},{"1":"1007890004","2":"1","3":"50109701","4":"BLUE MAIZ","5":"B","6":"2022-03-10"},{"1":"1007890040","2":"1","3":"50103595","4":"FRAME","5":"B","6":"2021-11-08"},{"1":"1007890079","2":"1","3":"50115222","4":"WENDY'S","5":"A","6":"2022-05-04"},{"1":"1007890079","2":"1","3":"50115748","4":"AweSum DimSum Times Square","5":"A","6":"2021-12-08"},{"1":"1007890082","2":"1","3":"50053321","4":"KUNGFU KITCHEN","5":"B","6":"2019-12-06"},{"1":"1008020014","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008020075","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008040001","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008060058","2":"1","3":"50073709","4":"ICHIRAN","5":"A","6":"2021-09-01"},{"1":"1008060058","2":"1","3":"50001520","4":"FRIEDMAN'S","5":"A","6":"2022-11-22"},{"1":"1008060058","2":"1","3":"41703804","4":"PENNSYLVANIA 6","5":"A","6":"2019-11-22"},{"1":"1008087501","2":"1","3":"50094400","4":"ZEROSPACE","5":"N","6":"<NA>"},{"1":"1008110001","2":"1","3":"40378579","4":"ANDREWS COFFEE SHOP","5":"A","6":"2022-02-16"},{"1":"1008110001","2":"1","3":"50047571","4":"DUNKIN","5":"A","6":"2022-10-28"},{"1":"1008110001","2":"1","3":"50127183","4":"JUST SALAD","5":"A","6":"2022-11-17"},{"1":"1008110001","2":"1","3":"50084971","4":"DIG INN","5":"A","6":"2019-07-01"},{"1":"1008120022","2":"1","3":"50100181","4":"WOLFGANG'S STEAKHOUSE","5":"A","6":"2022-07-05"},{"1":"1008120022","2":"1","3":"50112365","4":"STARBUCKS #64932","5":"A","6":"2022-07-07"},{"1":"1008120045","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008130001","2":"1","3":"41453983","4":"CHIPOTLE MEXICAN GRILL","5":"B","6":"2019-05-30"},{"1":"1008130001","2":"1","3":"41623475","4":"POTBELLY SANDWICH WORKS","5":"A","6":"2022-01-25"},{"1":"1008130001","2":"1","3":"41453983","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-01-05"},{"1":"1008130023","2":"1","3":"50060047","4":"BRAVO PIZZA","5":"A","6":"2022-02-01"},{"1":"1008130023","2":"1","3":"40367534","4":"MR BROADWAY KOSHER RESTAURANT","5":"A","6":"2022-01-03"},{"1":"1008130050","2":"1","3":"50071277","4":"SWEETGREEN","5":"A","6":"2022-07-25"},{"1":"1008160078","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008190017","2":"1","3":"50034945","4":"YAKINIKU FUTAGO","5":"A","6":"2019-12-04"},{"1":"1008190017","2":"1","3":"40541030","4":"BASTA PASTA RESTAURANT","5":"A","6":"2022-04-20"},{"1":"1008200038","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008210014","2":"1","3":"50017243","4":"BURGER & LOBSTER","5":"A","6":"2022-04-28"},{"1":"1008220070","2":"1","3":"41422201","4":"SLATE","5":"A","6":"2022-11-01"},{"1":"1008230004","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008240035","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008240037","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008240048","2":"1","3":"50047320","4":"LENWICH","5":"A","6":"2022-06-14"},{"1":"1008250007","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008250009","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008280009","2":"1","3":"41711586","4":"GREY BAR & RESTAURANT","5":"A","6":"2022-09-08"},{"1":"1008280009","2":"1","3":"41690254","4":"THE FLATIRON ROOM","5":"A","6":"2022-07-14"},{"1":"1008280015","2":"1","3":"50067074","4":"BAZAR","5":"A","6":"2019-10-22"},{"1":"1008280016","2":"1","3":"40739276","4":"LATIN AMERICAN RESTAURANT","5":"A","6":"2022-03-03"},{"1":"1008280039","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008290035","2":"1","3":"50004033","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-03-16"},{"1":"1008290042","2":"1","3":"50110741","4":"BONDI SUSHI","5":"A","6":"2021-08-18"},{"1":"1008290042","2":"1","3":"50125236","4":"THINK COFFEE","5":"N","6":"<NA>"},{"1":"1008290045","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008290050","2":"1","3":"50125328","4":"LITTLE NED","5":"A","6":"2022-09-29"},{"1":"1008290050","2":"1","3":"50001790","4":"SWEETGREEN","5":"A","6":"2022-03-16"},{"1":"1008300028","2":"1","3":"50016246","4":"DIG INN SEASONAL MARKET","5":"A","6":"2022-07-28"},{"1":"1008300028","2":"1","3":"50050185","4":"LADY M CONFECTIONS","5":"A","6":"2022-01-24"},{"1":"1008310019","2":"1","3":"50118248","4":"PLANT BAR","5":"A","6":"2022-06-21"},{"1":"1008330036","2":"1","3":"50052171","4":"OSAMIL","5":"N","6":"<NA>"},{"1":"1008330044","2":"1","3":"50073839","4":"GOPCHANG STORY NY","5":"A","6":"2019-03-26"},{"1":"1008330044","2":"1","3":"50098079","4":"JOOMAK BANJUM","5":"C","6":"2020-02-24"},{"1":"1008330044","2":"1","3":"50098079","4":"JOOMAK BANJUM","5":"A","6":"2022-06-15"},{"1":"1008330047","2":"1","3":"50099576","4":"KOKU RAMEN","5":"A","6":"2021-11-01"},{"1":"1008330047","2":"1","3":"50106492","4":"BASE KARAOKE","5":"N","6":"<NA>"},{"1":"1008330047","2":"1","3":"50007965","4":"KUSHI KUSHI YAKI","5":"A","6":"2022-06-13"},{"1":"1008330047","2":"1","3":"50012532","4":"KRUSH","5":"A","6":"2020-01-31"},{"1":"1008330047","2":"1","3":"50049724","4":"K-TOWN BBQ","5":"A","6":"2019-12-04"},{"1":"1008330047","2":"1","3":"50061298","4":"ABIKO CURRY","5":"Z","6":"2022-09-29"},{"1":"1008330047","2":"1","3":"50096314","4":"E-MO KIMBOB","5":"A","6":"2022-06-07"},{"1":"1008330061","2":"1","3":"50046914","4":"SHANGHAI MONG","5":"A","6":"2022-05-09"},{"1":"1008330062","2":"1","3":"50050424","4":"THE MAZE","5":"A","6":"2022-10-21"},{"1":"1008330062","2":"1","3":"50017701","4":"THE KUNJIP","5":"A","6":"2022-05-11"},{"1":"1008340001","2":"1","3":"50105267","4":"TAKUMI TACO","5":"A","6":"2022-05-26"},{"1":"1008340001","2":"1","3":"50126844","4":"HANCRAFT BURGERS  & BREW","5":"A","6":"2022-09-08"},{"1":"1008340001","2":"1","3":"50127448","4":"CREPE CAFE","5":"N","6":"<NA>"},{"1":"1008340021","2":"1","3":"50073722","4":"ANTOYA","5":"Z","6":"2022-11-18"},{"1":"1008340026","2":"1","3":"50056626","4":"BB.Q CHICKEN","5":"A","6":"2022-01-24"},{"1":"1008340026","2":"1","3":"50113275","4":"CHORUS KARAOKE LOUNGE","5":"A","6":"2022-02-16"},{"1":"1008340028","2":"1","3":"50086208","4":"ANYTIME SOJU","5":"A","6":"2022-11-15"},{"1":"1008340028","2":"1","3":"41485097","4":"NEW WONJO RESTAURANT","5":"A","6":"2022-07-27"},{"1":"1008340028","2":"1","3":"50086207","4":"ANYTIME KARAOKE","5":"A","6":"2022-07-05"},{"1":"1008340048","2":"1","3":"50008103","4":"PANERA BREAD","5":"A","6":"2022-02-03"},{"1":"1008340069","2":"1","3":"50109016","4":"HUTAOLI MUSIC RESTAURANT & BAR","5":"A","6":"2022-01-27"},{"1":"1008340073","2":"1","3":"40398811","4":"RICK'S CABARET","5":"A","6":"2022-10-11"},{"1":"1008350015","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008360035","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008370001","2":"1","3":"50001807","4":"MONARCH","5":"A","6":"2022-07-05"},{"1":"1008370005","2":"1","3":"50075440","4":"BRASSERIE TOAST CAFE","5":"A","6":"2022-07-06"},{"1":"1008370005","2":"1","3":"50075440","4":"BRASSERIE TOAST CAFE","5":"B","6":"2019-11-08"},{"1":"1008370012","2":"1","3":"40390696","4":"HAN BAT RESTAURANT","5":"A","6":"2022-03-16"},{"1":"1008370012","2":"1","3":"50001312","4":"MEW","5":"A","6":"2022-03-16"},{"1":"1008370012","2":"1","3":"40854979","4":"HYO DONG GAK","5":"A","6":"2022-11-03"},{"1":"1008370012","2":"1","3":"50114301","4":"CHO DANG GOL","5":"A","6":"2021-11-01"},{"1":"1008370052","2":"1","3":"50075064","4":"YOON HAEUNDAE GALBI","5":"A","6":"2022-11-10"},{"1":"1008370067","2":"1","3":"50048509","4":"TRADEMARK","5":"A","6":"2022-05-24"},{"1":"1008370089","2":"1","3":"50117994","4":"MCDONALD'S","5":"A","6":"2022-11-02"},{"1":"1008390008","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008410012","2":"1","3":"41272891","4":"THE KATI ROLL COMPANY","5":"A","6":"2022-04-13"},{"1":"1008410026","2":"1","3":"50108361","4":"SZECHUAN GOURMET","5":"A","6":"2021-12-14"},{"1":"1008410066","2":"1","3":"50004028","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-03-17"},{"1":"1008410071","2":"1","3":"41096117","4":"KOI","5":"A","6":"2022-09-15"},{"1":"1008410071","2":"1","3":"41068567","4":"CELON BAR & LOUNGE","5":"A","6":"2019-10-29"},{"1":"1008410075","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008410089","2":"1","3":"50096064","4":"OLE & STEEN","5":"A","6":"2020-02-25"},{"1":"1008460013","2":"1","3":"41573408","4":"LAUT","5":"N","6":"<NA>"},{"1":"1008460069","2":"1","3":"50041812","4":"SWEETGREEN","5":"A","6":"2022-10-11"},{"1":"1008470029","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008480006","2":"1","3":"50055243","4":"THAI VILLA","5":"A","6":"2019-06-08"},{"1":"1008480006","2":"1","3":"50055243","4":"THAI VILLA","5":"B","6":"2017-05-02"},{"1":"1008480043","2":"1","3":"41142210","4":"BARBOUNIA","5":"A","6":"2019-11-14"},{"1":"1008480043","2":"1","3":"50073375","4":"PENTAGRAM DESIGN","5":"A","6":"2022-05-25"},{"1":"1008480052","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008490025","2":"1","3":"50055234","4":"Sugar Fish","5":"A","6":"2022-03-22"},{"1":"1008500011","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008500024","2":"1","3":"50091290","4":"NANA THAI STREET","5":"N","6":"<NA>"},{"1":"1008507503","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008510060","2":"1","3":"41653607","4":"CHOP'T","5":"A","6":"2020-03-02"},{"1":"1008510060","2":"1","3":"41653607","4":"CHOP'T","5":"Z","6":"2022-09-21"},{"1":"1008510063","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008550037","2":"1","3":"50105269","4":"MARK'S OFF MADISON","5":"N","6":"<NA>"},{"1":"1008567502","2":"1","3":"50035278","4":"MEXICUE","5":"A","6":"2019-08-21"},{"1":"1008570017","2":"1","3":"50100701","4":"OM JUICE BAR","5":"A","6":"2022-08-25"},{"1":"1008570017","2":"1","3":"50119924","4":"COPPA","5":"Z","6":"2022-08-22"},{"1":"1008570018","2":"1","3":"50120803","4":"OLDE CITY CHEESESTEAKS & BREW","5":"A","6":"2022-07-27"},{"1":"1008570024","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008580032","2":"1","3":"50051129","4":"ATOBOY","5":"A","6":"2019-02-27"},{"1":"1008580032","2":"1","3":"50051129","4":"ATOBOY","5":"B","6":"2022-02-23"},{"1":"1008590003","2":"1","3":"50082095","4":"HORTUS NYC","5":"B","6":"2019-07-09"},{"1":"1008590003","2":"1","3":"50082095","4":"HORTUS NYC","5":"A","6":"2020-03-10"},{"1":"1008600015","2":"1","3":"50071529","4":"NO NO NO","5":"A","6":"2022-07-08"},{"1":"1008600031","2":"1","3":"41389861","4":"WINE 30","5":"A","6":"2019-07-09"},{"1":"1008610003","2":"1","3":"50073168","4":"LET'S MEAT","5":"A","6":"2019-05-09"},{"1":"1008610010","2":"1","3":"50095489","4":"LAMALO","5":"Z","6":"2019-10-25"},{"1":"1008610072","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008620013","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008620071","2":"1","3":"41614718","4":"LITTLE ITALY PIZZA","5":"A","6":"2022-11-04"},{"1":"1008627503","2":"1","3":"50016964","4":"BONCHON","5":"A","6":"2021-08-26"},{"1":"1008630001","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008630004","2":"1","3":"50082474","4":"ETC","5":"A","6":"2020-01-10"},{"1":"1008630004","2":"1","3":"50082474","4":"ETC","5":"Z","6":"2022-11-23"},{"1":"1008630029","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008630048","2":"1","3":"50106335","4":"MASALA KING","5":"B","6":"2022-02-03"},{"1":"1008630048","2":"1","3":"50113394","4":"CHELSEA BAGEL & PIZZERIA","5":"A","6":"2022-06-02"},{"1":"1008630052","2":"1","3":"50106188","4":"HAMACHI 34","5":"B","6":"2022-01-13"},{"1":"1008660001","2":"1","3":"41219092","4":"5TH & MAD","5":"A","6":"2019-07-03"},{"1":"1008660001","2":"1","3":"41544542","4":"PRET A MANGER","5":"A","6":"2022-03-11"},{"1":"1008680016","2":"1","3":"50015128","4":"ALIDORO","5":"A","6":"2022-06-22"},{"1":"1008680016","2":"1","3":"50058349","4":"OMAR'S MEDITERRANEAN CUISINE","5":"A","6":"2019-04-04"},{"1":"1008690058","2":"1","3":"41376997","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-04-07"},{"1":"1008720001","2":"1","3":"50089204","4":"DUNKIN","5":"A","6":"2022-03-24"},{"1":"1008720065","2":"1","3":"40388818","4":"YAMA JAPANESE RESTAURANT","5":"A","6":"2022-01-26"},{"1":"1008740004","2":"1","3":"50099109","4":"OCEANS","5":"A","6":"2020-01-16"},{"1":"1008760006","2":"1","3":"50041043","4":"BRAVO PIZZA","5":"A","6":"2022-03-02"},{"1":"1008790014","2":"1","3":"41376994","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-03-16"},{"1":"1008830022","2":"1","3":"50056137","4":"SAHIB","5":"B","6":"2020-02-24"},{"1":"1008830022","2":"1","3":"50056137","4":"SAHIB","5":"A","6":"2019-07-25"},{"1":"1008830023","2":"1","3":"50094374","4":"LAHORI KABAB","5":"A","6":"2022-09-20"},{"1":"1008840016","2":"1","3":"50110563","4":"WOK IN THE CLOUDS","5":"B","6":"2021-12-02"},{"1":"1008850004","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008870087","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008890015","2":"1","3":"41089834","4":"MURRAY HILL DINER","5":"A","6":"2022-03-03"},{"1":"1009930008","2":"1","3":"50066715","4":"JOE'S PIZZA","5":"A","6":"2022-08-25"},{"1":"1009930022","2":"1","3":"50119706","4":"DOS TOROS","5":"A","6":"2022-03-23"},{"1":"1009940001","2":"1","3":"41551304","4":"THE COUNTER","5":"A","6":"2022-05-05"},{"1":"1009940001","2":"1","3":"50116672","4":"JOE COFFEE COMPANY","5":"A","6":"2022-06-23"},{"1":"1009940045","2":"1","3":"50089064","4":"JUNZI BRYANT PARK","5":"A","6":"2021-08-30"},{"1":"1009940045","2":"1","3":"50095248","4":"UNCLE TETSU JAPANESE CHEESECAKE","5":"A","6":"2021-11-04"},{"1":"1009950033","2":"1","3":"41408069","4":"Charlie Palmer Steak NYC","5":"A","6":"2020-01-02"},{"1":"1009950033","2":"1","3":"41325827","4":"COMPASS GROUP","5":"A","6":"2022-02-22"},{"1":"1009950033","2":"1","3":"50117700","4":"AKIN GUMP","5":"A","6":"2022-08-22"},{"1":"1009950033","2":"1","3":"41486645","4":"EXECUTIVE DINNING ROOM","5":"A","6":"2022-04-20"},{"1":"1009950033","2":"1","3":"50015097","4":"STEPHEN SONDHEIM THEATRE","5":"A","6":"2019-06-13"},{"1":"1009950033","2":"1","3":"50101452","4":"SMOOTHIE JUICE BAR","5":"A","6":"2022-08-03"},{"1":"1009950033","2":"1","3":"50065601","4":"BURGER & LOBSTER","5":"N","6":"<NA>"},{"1":"1009960001","2":"1","3":"41219536","4":"BROOKLYN DINER","5":"A","6":"2022-03-31"},{"1":"1009960001","2":"1","3":"41031137","4":"STARBUCKS","5":"A","6":"2022-08-08"},{"1":"1009960001","2":"1","3":"50120134","4":"JOLLIBEE","5":"N","6":"<NA>"},{"1":"1009960043","2":"1","3":"41451247","4":"THE LONG ROOM","5":"A","6":"2022-04-18"},{"1":"1009970019","2":"1","3":"50071144","4":"HUNT & FISH CLUB","5":"A","6":"2020-02-21"},{"1":"1009970019","2":"1","3":"40369461","4":"CAFE UN DEUX TROIS","5":"A","6":"2019-06-27"},{"1":"1009970019","2":"1","3":"40369461","4":"CAFE UN DEUX TROIS","5":"C","6":"2022-05-05"},{"1":"1009970023","2":"1","3":"40693544","4":"BELASCO THEATRE","5":"A","6":"2018-08-28"},{"1":"1009980024","2":"1","3":"41299964","4":"COOK EATERY","5":"A","6":"2022-04-06"},{"1":"1009980024","2":"1","3":"41299964","4":"COOK EATERY","5":"B","6":"2019-07-31"},{"1":"1009980061","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1009990003","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1009990019","2":"1","3":"50059616","4":"CONVENE","5":"A","6":"2022-10-21"},{"1":"1009990019","2":"1","3":"50059661","4":"SUZUKI","5":"A","6":"2020-01-27"},{"1":"1009990019","2":"1","3":"50060821","4":"FOR FIVE COFFEE ROASTERS","5":"A","6":"2022-04-08"},{"1":"1009990029","2":"1","3":"40727750","4":"UTSAV FESTIVE INDIA RESTAURANT","5":"A","6":"2020-01-14"},{"1":"1009990029","2":"1","3":"50015535","4":"STEINBERG CENTER FOR THEATER","5":"A","6":"2019-05-23"},{"1":"1010000029","2":"1","3":"50089623","4":"PROPER FOOD","5":"A","6":"2022-03-30"},{"1":"1010000029","2":"1","3":"41238041","4":"ROPES & GRAY CAFE","5":"A","6":"2022-08-22"},{"1":"1010000029","2":"1","3":"41374707","4":"FRESH & CO","5":"A","6":"2022-11-09"},{"1":"1010010058","2":"1","3":"50115887","4":"TERIYAKI R US","5":"A","6":"2022-08-31"},{"1":"1010030029","2":"1","3":"50110250","4":"RESTAURANT ASSOCIATES @ AIG","5":"A","6":"2022-08-12"},{"1":"1010030029","2":"1","3":"41202176","4":"TED'S MONTANA GRILL","5":"A","6":"2022-02-03"},{"1":"1010030029","2":"1","3":"50110175","4":"LATHAM & WATKINS","5":"A","6":"2021-11-08"},{"1":"1010030029","2":"1","3":"50104422","4":"FLIK INTERNATIONAL","5":"A","6":"2022-01-31"},{"1":"1010030029","2":"1","3":"41405007","4":"THE CAPITAL GRILLE","5":"N","6":"<NA>"},{"1":"1010030029","2":"1","3":"50101942","4":"MLB Dining","5":"A","6":"2021-11-08"},{"1":"1010090016","2":"1","3":"50019121","4":"KIN RAMEN","5":"A","6":"2019-10-07"},{"1":"1010090017","2":"1","3":"50019120","4":"NEW TOPAZ","5":"A","6":"2019-10-23"},{"1":"1010090017","2":"1","3":"50019120","4":"NEW TOPAZ","5":"Z","6":"2022-07-11"},{"1":"1010100023","2":"1","3":"41638918","4":"ANGELO'S PIZZERIA","5":"A","6":"2020-01-07"},{"1":"1010100023","2":"1","3":"41638918","4":"ANGELO'S PIZZERIA","5":"P","6":"2019-11-01"},{"1":"1010130012","2":"1","3":"40739412","4":"APPLEBEE'S","5":"A","6":"2022-07-21"},{"1":"1010130012","2":"1","3":"41567407","4":"AMC THEATRES","5":"A","6":"2022-07-28"},{"1":"1010130012","2":"1","3":"41169052","4":"DAVE & BUSTER'S","5":"A","6":"2022-08-10"},{"1":"1010130012","2":"1","3":"40850087","4":"MADAME TUSSAUD'S","5":"A","6":"2022-02-08"},{"1":"1010130012","2":"1","3":"41567414","4":"AMC THEATRES","5":"A","6":"2019-05-18"},{"1":"1010130012","2":"1","3":"41567468","4":"AMC THEATRES","5":"A","6":"2019-05-18"},{"1":"1010130012","2":"1","3":"41567472","4":"AMC THEATRES","5":"A","6":"2019-05-18"},{"1":"1010150001","2":"1","3":"50077814","4":"FAMOUS FAMIGLIA PIZZERIA","5":"A","6":"2022-10-18"},{"1":"1010150001","2":"1","3":"50095860","4":"THE TIMES EATERY","5":"A","6":"2022-08-11"},{"1":"1010150051","2":"1","3":"50073605","4":"HAYES THEATER","5":"A","6":"2018-11-01"},{"1":"1010150059","2":"1","3":"40578773","4":"JOHN'S PIZZA","5":"C","6":"2020-02-11"},{"1":"1010150059","2":"1","3":"40578773","4":"JOHN'S PIZZA","5":"B","6":"2022-03-09"},{"1":"1010150059","2":"1","3":"50052277","4":"CHINA RIVER","5":"A","6":"2019-10-04"},{"1":"1010157501","2":"1","3":"41538728","4":"BOWLERO","5":"B","6":"2022-03-01"},{"1":"1010157501","2":"1","3":"50010210","4":"HARU","5":"A","6":"2022-04-06"},{"1":"1010157501","2":"1","3":"41538728","4":"BOWLERO","5":"A","6":"2019-04-03"},{"1":"1010157501","2":"1","3":"50065488","4":"LOS TACOS NO.1","5":"A","6":"2022-06-14"},{"1":"1010157501","2":"1","3":"50084831","4":"THE RIBBON","5":"A","6":"2020-02-25"},{"1":"1010160005","2":"1","3":"40482591","4":"MAJESTIC THEATER","5":"A","6":"2018-08-28"},{"1":"1010160036","2":"1","3":"50071438","4":"PLAYSTATION THEATRE","5":"A","6":"2019-06-01"},{"1":"1010160036","2":"1","3":"41172734","4":"JUNIOR'S RESTAURANT","5":"A","6":"2021-07-30"},{"1":"1010160036","2":"1","3":"41356248","4":"REFRESH CAFE","5":"A","6":"2022-02-08"},{"1":"1010160036","2":"1","3":"41356242","4":"VIACOM EXECUTIVE DINING ROOM","5":"A","6":"2022-03-17"},{"1":"1010160036","2":"1","3":"40483694","4":"MINSKOFF THEATRE","5":"A","6":"2020-02-25"},{"1":"1010160036","2":"1","3":"50048835","4":"VIACOM CONFERENCE CENTER","5":"A","6":"2022-06-14"},{"1":"1010160036","2":"1","3":"41356235","4":"VIACOM CAFETERIA","5":"A","6":"2022-03-18"},{"1":"1010177501","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010200005","2":"1","3":"41056159","4":"LA MASSERIA","5":"A","6":"2019-10-24"},{"1":"1010200005","2":"1","3":"50045766","4":"MASSERIA CAFFE","5":"A","6":"2022-03-08"},{"1":"1010200036","2":"1","3":"50109770","4":"Burger Man","5":"N","6":"<NA>"},{"1":"1010200038","2":"1","3":"50109927","4":"16 HANDLES","5":"A","6":"2022-03-07"},{"1":"1010210001","2":"1","3":"40703714","4":"PALM RESTAURANT","5":"A","6":"2020-02-25"},{"1":"1010210045","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010220002","2":"1","3":"50062488","4":"SOHO PARK","5":"B","6":"2019-11-21"},{"1":"1010220002","2":"1","3":"50062488","4":"SOHO PARK","5":"A","6":"2019-06-17"},{"1":"1010230048","2":"1","3":"41711530","4":"GALLAGHER'S","5":"N","6":"<NA>"},{"1":"1010230064","2":"1","3":"50081836","4":"CHEF PHO & PEKING ROAST DUCK","5":"Z","6":"2022-01-25"},{"1":"1010230064","2":"1","3":"50081836","4":"CHEF PHO & PEKING ROAST DUCK","5":"B","6":"2019-07-17"},{"1":"1010230064","2":"1","3":"50081836","4":"CHEF PHO & PEKING ROAST DUCK","5":"A","6":"2020-01-03"},{"1":"1010230064","2":"1","3":"50081836","4":"CHEF PHO & PEKING ROAST DUCK","5":"P","6":"2019-05-02"},{"1":"1010240015","2":"1","3":"50116092","4":"ANGELINA BAKERY","5":"A","6":"2022-05-06"},{"1":"1010250051","2":"1","3":"40676801","4":"IGUANA RESTAURANT","5":"A","6":"2022-02-08"},{"1":"1010260021","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010260036","2":"1","3":"50058916","4":"LA ESQUINA","5":"A","6":"2022-09-14"},{"1":"1010260036","2":"1","3":"41612489","4":"PREMIER CAFE","5":"A","6":"2022-02-03"},{"1":"1010260037","2":"1","3":"50032876","4":"TANNER SMITH'S","5":"A","6":"2019-06-07"},{"1":"1010260055","2":"1","3":"50014802","4":"FLIK","5":"N","6":"<NA>"},{"1":"1010260055","2":"1","3":"50106310","4":"HONEYBRAINS","5":"A","6":"2021-10-26"},{"1":"1010260055","2":"1","3":"50067743","4":"VIDA VERDE","5":"A","6":"2019-10-09"},{"1":"1010260055","2":"1","3":"50073282","4":"SPYSCAPE","5":"A","6":"2019-08-08"},{"1":"1010260055","2":"1","3":"50105997","4":"LE PAIN QUOTIDIEN","5":"N","6":"<NA>"},{"1":"1010260055","2":"1","3":"50085602","4":"CHICK-FIL-A","5":"A","6":"2022-07-07"},{"1":"1010267502","2":"1","3":"50078195","4":"99 CENTS FRESH & HOT PIZZA","5":"A","6":"2020-03-12"},{"1":"1010267502","2":"1","3":"50005075","4":"APPLE JACK DINER","5":"B","6":"2019-05-16"},{"1":"1010267502","2":"1","3":"50005075","4":"APPLE JACK DINER","5":"A","6":"2022-03-31"},{"1":"1010267502","2":"1","3":"50101743","4":"DUNKIN'","5":"A","6":"2022-11-02"},{"1":"1010270003","2":"1","3":"41152996","4":"LUIGIS GRILL PIZZA","5":"B","6":"2019-06-07"},{"1":"1010270003","2":"1","3":"41152996","4":"LUIGIS GRILL PIZZA","5":"A","6":"2019-09-27"},{"1":"1010270003","2":"1","3":"41152996","4":"LUIGIS GRILL PIZZA","5":"C","6":"2022-02-04"},{"1":"1010270004","2":"1","3":"50112595","4":"WENDY'S","5":"A","6":"2022-11-03"},{"1":"1010270020","2":"1","3":"50105437","4":"SWEETGREEN","5":"A","6":"2022-10-18"},{"1":"1010270020","2":"1","3":"50103878","4":"SUGARFISH BY SUSHI NOZAWA","5":"A","6":"2022-07-28"},{"1":"1010270102","2":"1","3":"50099826","4":"MUGHLAI INDIAN CUSINE","5":"A","6":"2022-07-27"},{"1":"1010280029","2":"1","3":"40538766","4":"RED EYE GRILL","5":"A","6":"2022-03-10"},{"1":"1010280029","2":"1","3":"40401934","4":"BROOKLYN DINER","5":"A","6":"2022-01-14"},{"1":"1010280033","2":"1","3":"40387754","4":"TRATTORIA DELLA ARTE","5":"A","6":"2022-03-10"},{"1":"1010280033","2":"1","3":"41312223","4":"FRESH & CO","5":"A","6":"2022-03-01"},{"1":"1010297502","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010300058","2":"1","3":"50107499","4":"VENCHI","5":"A","6":"2022-04-07"},{"1":"1010300058","2":"1","3":"50110004","4":"STARBUCKS","5":"A","6":"2022-06-17"},{"1":"1010300058","2":"1","3":"50107826","4":"MAGNOLIA BAKERY","5":"A","6":"2022-03-01"},{"1":"1010300058","2":"1","3":"41399771","4":"MAREA RESTAURANT","5":"Z","6":"2022-11-17"},{"1":"1010300058","2":"1","3":"50112920","4":"LE PAIN QUOTIDIEN","5":"A","6":"2022-04-19"},{"1":"1012580034","2":"1","3":"41086895","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-02-14"},{"1":"1012620001","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012620076","2":"1","3":"50065598","4":"DEEP INDIAN KITCHEN","5":"A","6":"2022-06-16"},{"1":"1012627502","2":"1","3":"50048460","4":"STARBUCKS COFFEE","5":"A","6":"2022-06-09"},{"1":"1012627502","2":"1","3":"50011892","4":"ROBUSTA ESPRESSO BAR","5":"C","6":"2022-02-02"},{"1":"1012627502","2":"1","3":"50011892","4":"ROBUSTA ESPRESSO BAR","5":"A","6":"2019-04-05"},{"1":"1012630034","2":"1","3":"40402362","4":"BLAKE & TODD","5":"B","6":"2022-03-04"},{"1":"1012630034","2":"1","3":"40402362","4":"BLAKE & TODD","5":"A","6":"2019-05-31"},{"1":"1012630061","2":"1","3":"50113607","4":"MR. SUN","5":"C","6":"2022-06-21"},{"1":"1012630061","2":"1","3":"50108779","4":"KITCHEN PARADISE","5":"N","6":"<NA>"},{"1":"1012630061","2":"1","3":"50002071","4":"DELIS 48","5":"A","6":"2022-03-18"},{"1":"1012630061","2":"1","3":"50002071","4":"DELIS 48","5":"B","6":"2019-03-21"},{"1":"1012630061","2":"1","3":"50002071","4":"DELIS 48","5":"P","6":"2019-08-02"},{"1":"1012630065","2":"1","3":"41242943","4":"PIG 'N' WHISTLE","5":"C","6":"2019-08-22"},{"1":"1012630067","2":"1","3":"50074298","4":"TSURUTONTAN UDON NOODLE BRASSERIE","5":"A","6":"2019-10-02"},{"1":"1012630067","2":"1","3":"50092074","4":"THE ELGIN","5":"A","6":"2019-09-24"},{"1":"1012680001","2":"1","3":"50072936","4":"NUSRET STEAKHOUSE","5":"A","6":"2021-12-08"},{"1":"1012687503","2":"1","3":"50125302","4":"TARU","5":"A","6":"2022-11-09"},{"1":"1012687503","2":"1","3":"50051532","4":"GRAND SALON AND BAR","5":"A","6":"2022-01-20"},{"1":"1012690020","2":"1","3":"50006345","4":"CAFE 2","5":"A","6":"2022-06-09"},{"1":"1012690020","2":"1","3":"41067696","4":"THE MODERN","5":"A","6":"2021-08-04"},{"1":"1012690020","2":"1","3":"50099300","4":"TERRACE CAFÉ","5":"A","6":"2022-07-07"},{"1":"1012690020","2":"1","3":"50006343","4":"STAFF CAFF","5":"A","6":"2022-04-05"},{"1":"1012700001","2":"1","3":"40372466","4":"MURALS ON 54, RANDOLPH'S","5":"A","6":"2022-03-18"},{"1":"1012700071","2":"1","3":"41303456","4":"BICE","5":"N","6":"<NA>"},{"1":"1012700071","2":"1","3":"50063627","4":"JOE & THE JUICE","5":"A","6":"2022-09-14"},{"1":"1012700071","2":"1","3":"50063627","4":"JOE & THE JUICE","5":"B","6":"2020-03-03"},{"1":"1012700071","2":"1","3":"50117281","4":"JUST SALAD","5":"A","6":"2022-08-02"},{"1":"1012700071","2":"1","3":"41051273","4":"PRET A MANGER","5":"A","6":"2022-03-31"},{"1":"1012710015","2":"1","3":"41291910","4":"FIVE GUYS FAMOUS BURGERS AND FRIES","5":"A","6":"2022-04-11"},{"1":"1012710015","2":"1","3":"50000419","4":"EVA'S x CINCO DE MAYO","5":"Z","6":"2022-11-07"},{"1":"1012710015","2":"1","3":"50000419","4":"EVA'S x CINCO DE MAYO","5":"A","6":"2020-03-09"},{"1":"1012710053","2":"1","3":"50095340","4":"RED PEONY CHINESE CUISINE","5":"A","6":"2022-05-31"},{"1":"1012720001","2":"1","3":"40725911","4":"RUE 57","5":"A","6":"2022-03-09"},{"1":"1012720001","2":"1","3":"41146015","4":"STARBUCKS","5":"A","6":"2022-08-19"},{"1":"1012720022","2":"1","3":"41218916","4":"TINA'S RESTAURANT","5":"Z","6":"2022-09-27"},{"1":"1012750016","2":"1","3":"50087274","4":"ESSEN","5":"A","6":"2022-10-03"},{"1":"1012750027","2":"1","3":"50039077","4":"STOUT","5":"A","6":"2022-05-18"},{"1":"1012750027","2":"1","3":"50095843","4":"SWEETCATCH POKE","5":"A","6":"2021-11-09"},{"1":"1012750027","2":"1","3":"41696287","4":"CHOP'T","5":"A","6":"2022-04-29"},{"1":"1012750027","2":"1","3":"50005560","4":"POTBELLY SANDWICH WORKS","5":"A","6":"2022-06-07"},{"1":"1012750143","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012760051","2":"1","3":"50074601","4":"CHICK-FIL-A","5":"A","6":"2022-03-02"},{"1":"1012760051","2":"1","3":"50115707","4":"JUST SALAD","5":"A","6":"2021-12-06"},{"1":"1012760058","2":"1","3":"50078668","4":"BROOKLYN ROASTING COFFEE BAR (PWC)","5":"A","6":"2022-06-23"},{"1":"1012760058","2":"1","3":"41065348","4":"PRICE WATERHOUSE CAFETERIA","5":"A","6":"2022-02-08"},{"1":"1012857501","2":"1","3":"50107339","4":"HONEYBRAINS","5":"N","6":"<NA>"},{"1":"1012857501","2":"1","3":"50115276","4":"CAFE AT SAKS FIFTH AVENUE","5":"A","6":"2021-11-29"},{"1":"1012857501","2":"1","3":"50087656","4":"L'AVENUE AT SAKS","5":"A","6":"2021-08-11"},{"1":"1012860035","2":"1","3":"50121394","4":"FLIK INTERNATIONAL CORP (MUTUAL OF AMERICA)","5":"A","6":"2022-08-10"},{"1":"1012860035","2":"1","3":"50041853","4":"THE LITTLE BEET","5":"A","6":"2022-08-30"},{"1":"1012860035","2":"1","3":"50085189","4":"Sushi Ann","5":"A","6":"2020-02-18"},{"1":"1012860035","2":"1","3":"41262369","4":"JUST SALAD","5":"A","6":"2022-03-29"},{"1":"1012860035","2":"1","3":"41350747","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2022-09-29"},{"1":"1012900027","2":"1","3":"41720892","4":"NERAI","5":"A","6":"2022-06-01"},{"1":"1012900127","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012907501","2":"1","3":"50058588","4":"SWEETGREEN","5":"A","6":"2022-01-20"},{"1":"1012907501","2":"1","3":"41348712","4":"THE CORE CLUB","5":"A","6":"2021-08-12"},{"1":"1012930047","2":"1","3":"40795021","4":"TAO RESTAURANT","5":"A","6":"2022-03-08"},{"1":"1012930050","2":"1","3":"40675977","4":"OSTERIA SERAFINA","5":"A","6":"2022-02-04"},{"1":"1012930050","2":"1","3":"50048717","4":"GREEN CAFE","5":"A","6":"2020-01-27"},{"1":"1012960014","2":"1","3":"50010172","4":"JUICE GENERATION","5":"A","6":"2022-08-19"},{"1":"1012960014","2":"1","3":"50105096","4":"GREGORY'S COFFEE","5":"A","6":"2021-12-06"},{"1":"1013000001","2":"1","3":"50045843","4":"KURO-OBI OF IPPUDO","5":"A","6":"2022-04-26"},{"1":"1013000001","2":"1","3":"50122270","4":"MAMA'S CUPBOARD","5":"Z","6":"2022-10-05"},{"1":"1013000001","2":"1","3":"50103445","4":"PLAYA BOWLS GC","5":"A","6":"2022-02-09"},{"1":"1013000001","2":"1","3":"50121107","4":"MAMAN","5":"A","6":"2022-08-10"},{"1":"1013000001","2":"1","3":"50040406","4":"DOUGH","5":"A","6":"2022-03-31"},{"1":"1013000001","2":"1","3":"40528180","4":"BOBBY VAN'S , LEA WINE BAR","5":"A","6":"2019-11-08"},{"1":"1013000001","2":"1","3":"50114312","4":"PLANT JUNKIE","5":"A","6":"2022-08-24"},{"1":"1013000001","2":"1","3":"50037953","4":"RED HOOK LOBSTER POUND","5":"A","6":"2022-10-12"},{"1":"1013000001","2":"1","3":"50127061","4":"POP PASTA","5":"A","6":"2022-10-31"},{"1":"1013000001","2":"1","3":"50097399","4":"SWEETGREEN","5":"A","6":"2022-05-26"},{"1":"1013000001","2":"1","3":"50128717","4":"MIAN KITCHEN","5":"N","6":"<NA>"},{"1":"1013000001","2":"1","3":"50118900","4":"MIKEY POMODORO","5":"A","6":"2022-04-26"},{"1":"1013000001","2":"1","3":"50120019","4":"MYSTTIK MASAALA","5":"A","6":"2022-11-03"},{"1":"1013000001","2":"1","3":"50112560","4":"PARTNERS COFFEE","5":"A","6":"2022-05-26"},{"1":"1013000001","2":"1","3":"50038543","4":"LA PALAPA TACOS","5":"A","6":"2022-10-31"},{"1":"1013000001","2":"1","3":"50037412","4":"ROBERTA'S PIZZA","5":"A","6":"2022-05-26"},{"1":"1013027501","2":"1","3":"50100172","4":"277 PARK AVENUE CAFE'","5":"A","6":"2022-08-11"},{"1":"1013027501","2":"1","3":"50099536","4":"STARBUCKS","5":"A","6":"2022-04-04"},{"1":"1013030014","2":"1","3":"50048150","4":"INTERCONTINENTAL BARCLAY - BAR","5":"A","6":"2022-03-24"},{"1":"1013030014","2":"1","3":"50048142","4":"INTERCONTINENTAL BANQUET KITCHEN NEW YORK BARCLAY","5":"A","6":"2022-05-31"},{"1":"1013030014","2":"1","3":"50091227","4":"OLE & STEEN","5":"A","6":"2022-07-08"},{"1":"1013030014","2":"1","3":"50048138","4":"INTERCONTINENTAL NEW YORK EMPLOYEE CAFE","5":"A","6":"2022-06-03"},{"1":"1013030014","2":"1","3":"50048146","4":"INTERCONTINENTAL BARCLAY-LOBBY RESTAURANT","5":"A","6":"2022-06-16"},{"1":"1013050001","2":"1","3":"41249550","4":"INSIDE PARK AT ST. BART'S","5":"A","6":"2021-08-24"},{"1":"1013070001","2":"1","3":"50070575","4":"THE LOBSTER CLUB","5":"A","6":"2022-07-27"},{"1":"1013070001","2":"1","3":"50059995","4":"THE POOL| THE GRILL","5":"A","6":"2022-08-11"},{"1":"1013070014","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1013100007","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1013110005","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1013127501","2":"1","3":"50044346","4":"NARE SUSHI","5":"A","6":"2019-11-25"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-4" class="level7">
<p class="heading"></p>
<p>Dates can be tricky to work within APIs because we need to know exactly how they are formatted in order to do meaningful things with them. Typically we want to look up how dates are formatted in the API documentation. In this dataset, the dates are formatted as follows: <code>yyyy-mm-ddThh:mm:ss.0000</code> (e.g.&nbsp;2022-11-01T00:00:00.000).</p>
<p>When we know how dates are formatted, there’s often many ways we can subset the data to certain dates. For instance, I can access all of the rows where a date is <code>between('date 1' AND 'date 2')</code>. I can extract the year as an integer from a column using <code>date_extract_y(&lt;date-field&gt;)</code> and then filter to the rows in that year. A full list of data transformations that can be applied is Socrata is available <a href="https://dev.socrata.com/docs/transforms/">here</a>.</p>
</section>
</section>
<section id="question-5" class="level6">
<h6 class="anchored" data-anchor-id="question-5">Question</h6>
<div class="question">
<p>Create an API call to return the unique keys, incident addresses, and created dates for rows with complaint type “Construction Lead Dust” that were created in October 2022. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      select(unique_key, created_date, incident_address)
      filter(complaint_type == 'Construction Lead Dust' &amp; 
              created_date &gt; '2022-10-01' &amp;     
              created_date &lt; '2022-10-30')</code></pre>
<p>Once you get this working, write a function called <code>get_construction_lead_dust_complaints</code>. This function will take a <code>borough</code> as an argument, and should construct a string URL that will further filter the data to a given borough (hint: you will need the function <code>paste0</code> to construct this string). In your function, read the data frame using <code>read_csv</code> and return the data frame.</p>
<p>I’ve created a vector of three NYC boroughs for you. Iterate your function over this vector, returning the results as a data frame with rows bound. Your resulting data frame should look something like mine below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_construction_lead_dust &lt;- read_csv(&lt;URL HERE!&gt;) </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get_construction_lead_dust_complaints &lt;- &lt;FUNCTION HERE!&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>boroughs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"MANHATTAN"</span>, <span class="st">"BROOKLYN"</span>, <span class="st">"BRONX"</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Write code to iterate function here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["unique_key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["created_date"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["incident_address"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"55835163","2":"2022-10-28 11:40:35","3":"50 MANHATTAN AVENUE"},{"1":"55824585","2":"2022-10-27 14:24:47","3":"1469 LEXINGTON AVENUE"},{"1":"55808069","2":"2022-10-26 17:21:22","3":"40 RIVER ROAD"},{"1":"55812796","2":"2022-10-26 15:36:12","3":"353 WEST   57 STREET"},{"1":"55798645","2":"2022-10-25 12:09:52","3":"325 NORTH END AVENUE"},{"1":"55802228","2":"2022-10-25 12:06:47","3":"325 NORTH END AVENUE"},{"1":"55789472","2":"2022-10-24 14:05:32","3":"332 EAST   19 STREET"},{"1":"55765912","2":"2022-10-21 16:09:33","3":"240 CENTRAL PARK SOUTH"},{"1":"55770956","2":"2022-10-21 15:47:58","3":"240 CENTRAL PARK SOUTH"},{"1":"55744499","2":"2022-10-19 16:05:42","3":"325 NORTH END AVENUE"},{"1":"55743140","2":"2022-10-19 13:53:43","3":"22 EAST   18 STREET"},{"1":"55751365","2":"2022-10-19 08:59:02","3":"13 EAST  124 STREET"},{"1":"55739078","2":"2022-10-18 12:14:38","3":"185 EAST    3 STREET"},{"1":"55732663","2":"2022-10-18 11:37:10","3":"185 EAST    3 STREET"},{"1":"55731387","2":"2022-10-18 10:59:12","3":"185 EAST    3 STREET"},{"1":"55727833","2":"2022-10-17 17:07:52","3":"2405 1 AVENUE"},{"1":"55727832","2":"2022-10-17 16:30:03","3":"13 EAST  124 STREET"},{"1":"55676233","2":"2022-10-12 09:45:48","3":"145 EAST   30 STREET"},{"1":"55682371","2":"2022-10-12 09:23:26","3":"400 WEST   61 STREET"},{"1":"55677420","2":"2022-10-12 09:18:57","3":"466 WASHINGTON STREET"},{"1":"55671310","2":"2022-10-11 10:20:21","3":"366 WEST   30 STREET"},{"1":"55660104","2":"2022-10-10 07:46:10","3":"50 MANHATTAN AVENUE"},{"1":"55633776","2":"2022-10-07 16:59:11","3":"521 WEST  156 STREET"},{"1":"55621980","2":"2022-10-06 14:29:05","3":"612 WEST  137 STREET"},{"1":"55578969","2":"2022-10-01 10:27:25","3":"254 BROOME STREET"},{"1":"55843267","2":"2022-10-29 19:43:38","3":"993 CARROLL STREET"},{"1":"55840936","2":"2022-10-29 18:10:10","3":"376 GREENE AVENUE"},{"1":"55837493","2":"2022-10-29 13:15:35","3":"2046 BATH AVENUE"},{"1":"55819801","2":"2022-10-27 14:14:26","3":"1650 OCEAN AVENUE"},{"1":"55816359","2":"2022-10-27 11:43:04","3":"336 STARR STREET"},{"1":"55822192","2":"2022-10-27 07:11:59","3":"1647 STERLING PLACE"},{"1":"55812795","2":"2022-10-26 16:11:35","3":"920 ASHFORD STREET"},{"1":"55809247","2":"2022-10-26 14:45:16","3":"687 STERLING PLACE"},{"1":"55799840","2":"2022-10-25 12:56:51","3":"1647 STERLING PLACE"},{"1":"55797465","2":"2022-10-25 10:52:36","3":"1647 STERLING PLACE"},{"1":"55796359","2":"2022-10-24 11:23:26","3":"181 HARMAN STREET"},{"1":"55787193","2":"2022-10-23 23:26:13","3":"120 GROVE STREET"},{"1":"55756763","2":"2022-10-20 10:28:35","3":"295 COZINE AVENUE"},{"1":"55737794","2":"2022-10-18 13:59:27","3":"26 ADELPHI STREET"},{"1":"55733922","2":"2022-10-18 11:29:58","3":"191 SULLIVAN PLACE"},{"1":"55732664","2":"2022-10-18 09:33:47","3":"375 EAST   28 STREET"},{"1":"55726700","2":"2022-10-17 10:13:53","3":"191 SULLIVAN PLACE"},{"1":"55718874","2":"2022-10-16 17:01:13","3":"191 SULLIVAN PLACE"},{"1":"55705112","2":"2022-10-15 04:00:53","3":"2943 WEST   20 STREET"},{"1":"55651430","2":"2022-10-09 15:13:01","3":"18 BERGEN BEACH PLACE"},{"1":"55657228","2":"2022-10-09 13:32:33","3":"158 EAST   46 STREET"},{"1":"55628495","2":"2022-10-06 15:44:49","3":"336 STARR STREET"},{"1":"55615688","2":"2022-10-05 13:28:38","3":"2402 82 STREET"},{"1":"55596231","2":"2022-10-03 15:56:54","3":"800 GREENWOOD AVENUE"},{"1":"55837492","2":"2022-10-29 23:28:37","3":"735 MACE AVENUE"},{"1":"55832583","2":"2022-10-28 23:46:25","3":"963 WOODYCREST AVENUE"},{"1":"55832584","2":"2022-10-28 05:34:46","3":"963 WOODYCREST AVENUE"},{"1":"55816358","2":"2022-10-27 18:45:15","3":"862 BECK STREET"},{"1":"55810438","2":"2022-10-26 20:57:17","3":"2395 VALENTINE AVENUE"},{"1":"55806860","2":"2022-10-26 10:41:22","3":"3245 PERRY AVENUE"},{"1":"55808068","2":"2022-10-26 02:14:04","3":"963 WOODYCREST AVENUE"},{"1":"55787192","2":"2022-10-23 16:47:53","3":"963 WOODYCREST AVENUE"},{"1":"55776484","2":"2022-10-22 23:31:54","3":"963 WOODCREST AVENUE"},{"1":"55777502","2":"2022-10-22 08:57:14","3":"1115 VIRGINIA AVENUE"},{"1":"55776485","2":"2022-10-22 03:03:21","3":"963 WOODYCREST AVENUE"},{"1":"55752728","2":"2022-10-20 17:36:22","3":"1184 NELSON AVENUE"},{"1":"55748595","2":"2022-10-19 10:05:49","3":"1025 GERARD AVENUE"},{"1":"55728994","2":"2022-10-17 12:48:43","3":"305 EAST  170 STREET"},{"1":"55719988","2":"2022-10-16 22:12:31","3":"3555 BRUCKNER BOULEVARD"},{"1":"55709214","2":"2022-10-16 00:52:33","3":"963 WOODYCREST AVENUE"},{"1":"55696269","2":"2022-10-14 22:04:52","3":"963 WOODYCREST AVENUE"},{"1":"55700120","2":"2022-10-14 12:39:57","3":"340 EAST  151 STREET"},{"1":"55681152","2":"2022-10-12 13:31:52","3":"963 WOODYCREST AVENUE"},{"1":"55670053","2":"2022-10-11 13:36:10","3":"1534 SELWYN AVENUE"},{"1":"55673726","2":"2022-10-11 11:25:38","3":"1879 CLINTON AVENUE"},{"1":"55663979","2":"2022-10-10 21:38:49","3":"957 WOODYCREST AVENUE"},{"1":"55659143","2":"2022-10-10 05:31:17","3":"963 WOODYCREST AVENUE"},{"1":"55650474","2":"2022-10-09 04:34:48","3":"963 WOODYCREST AVENUE"},{"1":"55648476","2":"2022-10-08 22:17:35","3":"963 WOODYCREST AVENUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-5" class="level7">
<p class="heading"></p>
</section>
</section>
</section>
<section id="group" class="level3">
<h3 class="anchored" data-anchor-id="group"><code>$group</code></h3>
<p>Aggregating in <code>SoQL</code> calls looks and feels a bit different than it does in <code>dplyr</code>. The <code>$group=</code> parameter indicates that we wish to return a result grouped by a particular field. However, instead of using a verb like <code>summarize</code> to indicate that we want to perform a calculation in each group, we are going to specify what aggregated columns we want returned to us via the <code>$select</code> parameter.</p>
<p>So let’s say I want to return counts of the number of rows assigned to each <code>agency</code> in this dataset. In other words, I want a dataframe with a column listing the agency and a column listing the counts of rows with that agency listed.</p>
<p>First, I would set <code>$select=agency,count(*)</code>. Here <code>*</code> refers to everything (i.e.&nbsp;all rows), and <code>count()</code> is a function indicating that we should count all rows. After indicating what columns I want back, then I would set <code>$group=agency</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>nyc_311_agency <span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"https://data.cityofnewyork.us/resource/erm2-nwe9.csv?$select=agency,count(*)&amp;$group=agency"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nyc_311_agency)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["agency"],"name":[1],"type":["chr"],"align":["left"]},{"label":["count"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"3-1-1","2":"20594"},{"1":"ACS","2":"1220"},{"1":"CEO","2":"5"},{"1":"COIB","2":"20"},{"1":"DCA","2":"272169"},{"1":"DCAS","2":"1873"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="question-6" class="level6">
<h6 class="anchored" data-anchor-id="question-6">Question</h6>
<div class="question">
<p>Create an API call to return the counts per descriptor and borough for the complaint type “Consumer Complaint.” In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      filter(complaint_type == "Consumer Complaint") %&gt;% 
      group_by(descriptor,borough) %&gt;% 
      summarize(count = n())
</code></pre>
<p>Pivot the data so that there are separate columns indicating counts for each borough in the dataset. Your data frame will look something like mine below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_consumer_complaint &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["descriptor"],"name":[1],"type":["chr"],"align":["left"]},{"label":["BROOKLYN"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MANHATTAN"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["QUEENS"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["BRONX"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["STATEN ISLAND"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Unspecified"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Advance Fee","2":"1","3":"5","4":"8","5":"NA","6":"NA","7":"NA"},{"1":"Amusement Ride","2":"12","3":"4","4":"8","5":"2","6":"5","7":"NA"},{"1":"Arcade","2":"14","3":"6","4":"2","5":"5","6":"2","7":"NA"},{"1":"Auction House/Auctioneer","2":"8","3":"16","4":"14","5":"4","6":"1","7":"NA"},{"1":"Billing Dispute","2":"1050","3":"173","4":"1249","5":"547","6":"155","7":"896"},{"1":"Bingo Hall","2":"2","3":"1","4":"12","5":"4","6":"3","7":"NA"},{"1":"Bodega/Deli/Supermarket","2":"1935","3":"1333","4":"1586","5":"1427","6":"243","7":"4"},{"1":"Booting Company","2":"59","3":"24","4":"274","5":"19","6":"1","7":"NA"},{"1":"Cabaret","2":"1","3":"1","4":"1","5":"2","6":"NA","7":"NA"},{"1":"Cancellation/Closure without Notice","2":"NA","3":"1","4":"NA","5":"1","6":"1","7":"NA"},{"1":"Car Dealer - Used","2":"808","3":"100","4":"1050","5":"818","6":"121","7":"5"},{"1":"Car Not Available","2":"82","3":"316","4":"73","5":"77","6":"7","7":"2"},{"1":"Car Rental","2":"119","3":"89","4":"176","5":"51","6":"8","7":"NA"},{"1":"Cars Parked on Sidewalk/Street","2":"1256","3":"128","4":"1186","5":"715","6":"176","7":"2"},{"1":"Car Wash","2":"279","3":"285","4":"280","5":"776","6":"30","7":"5"},{"1":"Cell Phone Store","2":"221","3":"162","4":"208","5":"161","6":"22","7":"4"},{"1":"Cigarette Sale to Minor","2":"1276","3":"588","4":"785","5":"825","6":"252","7":"11"},{"1":"Closed without Notice","2":"255","3":"363","4":"197","5":"152","6":"11","7":"3"},{"1":"Clothing Damage","2":"362","3":"362","4":"233","5":"69","6":"13","7":"1"},{"1":"Contact Sign Not Posted","2":"255","3":"113","4":"244","5":"156","6":"21","7":"2"},{"1":"Contract Dispute","2":"1934","3":"1583","4":"2329","5":"1129","6":"220","7":"221"},{"1":"Credit Card Limitations Not Posted","2":"194","3":"195","4":"188","5":"100","6":"29","7":"NA"},{"1":"Damaged/Defective Goods","2":"4387","3":"2468","4":"3371","5":"2454","6":"398","7":"110"},{"1":"Damaged/Defective Parts","2":"119","3":"56","4":"94","5":"81","6":"9","7":"28"},{"1":"Damaged Vehicle","2":"1436","3":"1422","4":"1713","5":"965","6":"160","7":"51"},{"1":"Debt Collection Agency","2":"22","3":"56","4":"17","5":"12","6":"5","7":"283"},{"1":"Debt Not Owed","2":"49","3":"126","4":"55","5":"16","6":"18","7":"1259"},{"1":"Demand for Cash","2":"378","3":"19","4":"465","5":"219","6":"67","7":"25"},{"1":"Disabled Device Dealer","2":"16","3":"17","4":"6","5":"4","6":"5","7":"3"},{"1":"Disclosure Not Provided","2":"1","3":"NA","4":"NA","5":"2","6":"NA","7":"NA"},{"1":"Dissatisfaction with Provider","2":"162","3":"249","4":"110","5":"79","6":"27","7":"10"},{"1":"Documents Not Returned","2":"2","3":"10","4":"7","5":"2","6":"NA","7":"NA"},{"1":"Documents/Paperwork Missing","2":"8","3":"16","4":"11","5":"1","6":"NA","7":"NA"},{"1":"Domestic Employee","2":"8","3":"8","4":"10","5":"6","6":"2","7":"NA"},{"1":"Door Open with Air Conditioning On","2":"236","3":"2241","4":"160","5":"50","6":"9","7":"5"},{"1":"Door to Door Sales","2":"16","3":"13","4":"12","5":"10","6":"3","7":"1"},{"1":"Dry Cleaner","2":"193","3":"168","4":"113","5":"45","6":"14","7":"NA"},{"1":"Electronics Repair Store","2":"106","3":"67","4":"90","5":"44","6":"16","7":"43"},{"1":"Electronics Store","2":"320","3":"198","4":"243","5":"219","6":"22","7":"3"},{"1":"Employment Agency","2":"93","3":"188","4":"238","5":"67","6":"8","7":"1"},{"1":"Exchange/Refund/Return","2":"6356","3":"5744","4":"6470","5":"3813","6":"539","7":"218"},{"1":"Extra Parts","2":"5","3":"4","4":"4","5":"2","6":"1","7":"3"},{"1":"False Advertising","2":"3724","3":"4899","4":"3390","5":"2398","6":"363","7":"164"},{"1":"Financial Education Network","2":"1","3":"1","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"For-profit College","2":"15","3":"109","4":"27","5":"9","6":"6","7":"1"},{"1":"Funeral Home","2":"17","3":"10","4":"5","5":"29","6":"2","7":"NA"},{"1":"Furniture Store","2":"462","3":"256","4":"571","5":"583","6":"39","7":"4"},{"1":"Gaming Cafe","2":"10","3":"8","4":"10","5":"2","6":"1","7":"NA"},{"1":"Garage/Parking Lot","2":"451","3":"1589","4":"551","5":"517","6":"44","7":"3"},{"1":"Gas Station","2":"463","3":"109","4":"387","5":"187","6":"99","7":"1"},{"1":"Gender Pricing","2":"77","3":"68","4":"65","5":"35","6":"3","7":"1"},{"1":"Going Out of Business","2":"3","3":"5","4":"3","5":"2","6":"1","7":"NA"},{"1":"Grocery Store","2":"4","3":"8","4":"2","5":"2","6":"NA","7":"NA"},{"1":"Harassment","2":"73","3":"129","4":"69","5":"32","6":"26","7":"1518"},{"1":"High Interest Loan","2":"2","3":"2","4":"1","5":"1","6":"NA","7":"NA"},{"1":"High Pressure Sales","2":"6","3":"3","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"High Pressure to Take on Loan/Debt","2":"18","3":"104","4":"13","5":"2","6":"3","7":"14"},{"1":"Home Heating Oil Company","2":"40","3":"3","4":"66","5":"17","6":"8","7":"NA"},{"1":"Home Improvement Contractor","2":"552","3":"166","4":"667","5":"203","6":"176","7":"293"},{"1":"Horse Drawn Carriage","2":"1","3":"40","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Hotel","2":"119","3":"333","4":"205","5":"40","6":"5","7":"2"},{"1":"House/Property Damaged","2":"164","3":"47","4":"218","5":"43","6":"70","7":"117"},{"1":"ID Requirement Not Posted","2":"57","3":"53","4":"40","5":"18","6":"NA","7":"1"},{"1":"Illegal Tow","2":"976","3":"106","4":"979","5":"635","6":"198","7":"58"},{"1":"Illegal/Unfair Booting","2":"93","3":"26","4":"61","5":"28","6":"6","7":"8"},{"1":"Immigration Services","2":"10","3":"20","4":"21","5":"8","6":"6","7":"NA"},{"1":"Improper Sale of Items","2":"61","3":"53","4":"51","5":"44","6":"14","7":"1"},{"1":"Inaccurate Meter","2":"12","3":"2","4":"12","5":"18","6":"2","7":"NA"},{"1":"Injury/Safety","2":"32","3":"7","4":"6","5":"1","6":"3","7":"1"},{"1":"Installation/Work Quality","2":"619","3":"123","4":"696","5":"205","6":"220","7":"448"},{"1":"Jewelry Appraiser","2":"8","3":"16","4":"10","5":"11","6":"NA","7":"NA"},{"1":"Labor violation","2":"78","3":"152","4":"59","5":"34","6":"1","7":"NA"},{"1":"Labor Violation","2":"4","3":"4","4":"13","5":"7","6":"4","7":"1"},{"1":"Lack of Safety Equipment","2":"NA","3":"42","4":"2","5":"NA","6":"NA","7":"NA"},{"1":"Laundry","2":"492","3":"238","4":"411","5":"310","6":"40","7":"2"},{"1":"Layaway Terms Not Provided","2":"60","3":"40","4":"37","5":"43","6":"1","7":"NA"},{"1":"Loan Offer","2":"2","3":"1","4":"NA","5":"NA","6":"NA","7":"4"},{"1":"Locksmith","2":"61","3":"50","4":"33","5":"29","6":"2","7":"6"},{"1":"Lost Property","2":"39","3":"13","4":"24","5":"50","6":"2","7":"NA"},{"1":"Mail Order","2":"93","3":"94","4":"60","5":"71","6":"8","7":"NA"},{"1":"Mandatory Tip","2":"135","3":"422","4":"171","5":"42","6":"4","7":"NA"},{"1":"Minor Access","2":"4","3":"NA","4":"3","5":"NA","6":"1","7":"NA"},{"1":"Minor Present School Hours","2":"4","3":"NA","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Misleading Appraisal","2":"17","3":"25","4":"11","5":"14","6":"NA","7":"NA"},{"1":"Missing Complaint Sign","2":"NA","3":"19","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Mobile Food Vendor","2":"812","3":"4536","4":"783","5":"281","6":"33","7":"NA"},{"1":"Newsstand","2":"11","3":"47","4":"17","5":"5","6":"1","7":"1"},{"1":"No Bill of Rights","2":"2","3":"5","4":"2","5":"NA","6":"NA","7":"NA"},{"1":"Non-Delivery Goods/Services","2":"5571","3":"3957","4":"5207","5":"3026","6":"650","7":"486"},{"1":"Non-Delivery of Papers","2":"48","3":"64","4":"47","5":"27","6":"19","7":"73"},{"1":"Non-Disclosure of Fees","2":"70","3":"64","4":"39","5":"49","6":"6","7":"5"},{"1":"Non-Disclosure of Ownership","2":"2","3":"1","4":"NA","5":"NA","6":"1","7":"NA"},{"1":"No or Defective Headphones","2":"NA","3":"25","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"No Statement of Job Conditions","2":"2","3":"5","4":"4","5":"1","6":"NA","7":"NA"},{"1":"Other","2":"741","3":"723","4":"706","5":"413","6":"107","7":"4"},{"1":"Over Capacity","2":"228","3":"588","4":"274","5":"197","6":"18","7":"NA"},{"1":"Overcharge","2":"4441","3":"5877","4":"4231","5":"2447","6":"573","7":"72"},{"1":"Paid in Advance","2":"58","3":"567","4":"230","5":"29","6":"1","7":"NA"},{"1":"Pawn Broker","2":"32","3":"33","4":"25","5":"68","6":"5","7":"NA"},{"1":"Pedicab","2":"20","3":"214","4":"11","5":"6","6":"1","7":"1"},{"1":"Pool/Billiard Hall","2":"6","3":"2","4":"2","5":"4","6":"1","7":"NA"},{"1":"Pregnancy Services Center","2":"4","3":"5","4":"2","5":"6","6":"NA","7":"NA"},{"1":"Price Not Posted","2":"479","3":"629","4":"352","5":"198","6":"46","7":"NA"},{"1":"Process Server","2":"22","3":"23","4":"15","5":"9","6":"5","7":"3"},{"1":"Professional Photographer","2":"1","3":"1","4":"1","5":"NA","6":"1","7":"NA"},{"1":"Prohibited Item Sale to Minor","2":"174","3":"88","4":"132","5":"75","6":"34","7":"1"},{"1":"Public Event","2":"NA","3":"6","4":"NA","5":"4","6":"NA","7":"NA"},{"1":"Public Event Seating","2":"7","3":"10","4":"4","5":"1","6":"NA","7":"NA"},{"1":"Rates Not Posted","2":"77","3":"286","4":"64","5":"69","6":"6","7":"NA"},{"1":"Receipt Incomplete/Not Given","2":"512","3":"468","4":"509","5":"237","6":"61","7":"7"},{"1":"Rental Hall","2":"100","3":"23","4":"98","5":"31","6":"9","7":"NA"},{"1":"Required Signage Not Posted","2":"42","3":"50","4":"28","5":"23","6":"20","7":"1"},{"1":"Restaurant","2":"394","3":"514","4":"454","5":"204","6":"42","7":"2"},{"1":"Retail Store","2":"9421","3":"7158","4":"7391","5":"5876","6":"1036","7":"27"},{"1":"Returns Not Filed","2":"151","3":"61","4":"96","5":"110","6":"11","7":"1"},{"1":"Sales Promotion","2":"4","3":"2","4":"5","5":"NA","6":"NA","7":"NA"},{"1":"Satisfaction with Provider","2":"1","3":"NA","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Scale Dealer/Repairer","2":"42","3":"37","4":"53","5":"21","6":"5","7":"NA"},{"1":"Scale Inaccurate","2":"12","3":"10","4":"13","5":"4","6":"NA","7":"NA"},{"1":"Scale Inaccurate/Broken","2":"294","3":"271","4":"204","5":"98","6":"21","7":"2"},{"1":"Scrap Metal Processor","2":"21","3":"NA","4":"37","5":"33","6":"6","7":"NA"},{"1":"Secondhand Dealer","2":"49","3":"25","4":"57","5":"60","6":"14","7":"NA"},{"1":"Sidewalk Blocked","2":"1808","3":"3629","4":"1399","5":"384","6":"88","7":"14"},{"1":"Sidewalk Cafe","2":"486","3":"984","4":"494","5":"107","6":"51","7":"8"},{"1":"Spanish Speaking Business","2":"2","3":"1","4":"1","5":"1","6":"NA","7":"NA"},{"1":"Spanish Transaction","2":"3","3":"3","4":"NA","5":"1","6":"NA","7":"NA"},{"1":"Stoop Line","2":"555","3":"374","4":"553","5":"145","6":"14","7":"4"},{"1":"Storage Warehouse","2":"114","3":"40","4":"90","5":"93","6":"16","7":"1"},{"1":"Street Fair Vendor","2":"78","3":"142","4":"73","5":"43","6":"8","7":"NA"},{"1":"Tax Preparer","2":"168","3":"90","4":"111","5":"171","6":"11","7":"1"},{"1":"Ticket Broker","2":"13","3":"104","4":"6","5":"3","6":"1","7":"NA"},{"1":"Time Insufficient","2":"1","3":"35","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Tour Company","2":"31","3":"129","4":"14","5":"4","6":"5","7":"1"},{"1":"Tow Truck Company","2":"831","3":"64","4":"1029","5":"472","6":"139","7":"6"},{"1":"Toy Gun Sale","2":"10","3":"5","4":"5","5":"2","6":"NA","7":"NA"},{"1":"Travel Agency","2":"101","3":"124","4":"155","5":"23","6":"3","7":"1"},{"1":"Unlicensed","2":"3090","3":"2627","4":"2855","5":"1589","6":"495","7":"246"},{"1":"Unrequested Services Provided","2":"16","3":"9","4":"4","5":"6","6":"4","7":"NA"},{"1":"Used Gun Dealer","2":"1","3":"NA","4":"NA","5":"3","6":"NA","7":"NA"},{"1":"Utility Company","2":"1","3":"2","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Vendor","2":"1993","3":"2595","4":"1253","5":"733","6":"74","7":"NA"},{"1":"Vocational or Trade School","2":"3","3":"6","4":"5","5":"1","6":"1","7":"NA"},{"1":"NA","2":"NA","3":"1","4":"NA","5":"NA","6":"NA","7":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-6" class="level7">
<p class="heading"></p>
<p><code>count(*)</code> is function <code>SoQL</code> function. A full list of similar summary functions in <code>SoQL</code> is available <a href="https://dev.socrata.com/docs/functions/#,">here</a>. Another useful <code>SoQL</code> function is <code>distinct</code>, which can be used to return the distinct values in a column. When we use <code>distinct</code> in conjunction with <code>count</code>, we can count the distinct values in a column (e.g.&nbsp;<code>count(distinct%20&lt;field&gt;)</code>).</p>
</section>
</section>
<section id="question-7" class="level6">
<h6 class="anchored" data-anchor-id="question-7">Question</h6>
<div class="question">
<p>Create an API call to return the counts of complaints with the descriptor “Gender Pricing” in each borough, along with the count of distinct incident addresses for these complaints in each borough. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      filter(complaint_type == "Gender Pricing") %&gt;% 
      group_by(borough) %&gt;% 
      summarize(count = n(),
                count_distinct_incident_address = length(unique(incident_address)) )
</code></pre>
<p>Pivot and plot the data to match my plot below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_gender_pricing &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<p><img src="lab10_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="section-7" class="level7">
<p class="heading"></p>
</section>
</section>
</section>
<section id="having" class="level3">
<h3 class="anchored" data-anchor-id="having"><code>$having</code></h3>
<p>Once we’ve aggregated data in a <code>SoQL</code> query, we no longer use <code>$where=</code> to filter it. Instead, we use <code>$having=</code> to filter aggregate data. For example, in the above call, I could tack on <code>...&amp;having=count&gt;10</code> to return the rows from my aggregated data where the count was greater than 10.</p>
<section id="question-8" class="level6">
<h6 class="anchored" data-anchor-id="question-8">Question</h6>
<div class="question">
<p>Create an API call to return the latitude, longitude, and counts per BBL for the complaint type “HEAT/HOT WATER.” Filter out rows where the BBL is ‘0000000000’, and sort the counts in descending order. Filter the results to the rows where the count of heat and hot water complaints is greater than 1000. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;%
      filter(complaint_type == "HEAT/HOT WATER" &amp; 
              bbl != "0000000000") %&gt;% 
      group_by(bbl, latitude, longitude) %&gt;% 
      summarize(count = n()) %&gt;% 
      arrange(desc(count)) %&gt;%
      ungroup() %&gt;%
      filter(count &gt; 1000)</code></pre>
<p>Convert the result into a geom object, create a palette using the <code>counts</code> variable, and map the points via leaflet to match my map below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_heat_counts &lt;- read_csv(&lt;URL HERE!&gt;) |&gt; st_as_sf()</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Palette here!</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Map here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div id="htmlwidget-3428a6030deca26fd70c" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3428a6030deca26fd70c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[40.7128,-74.006],9,[]],"calls":[{"method":"addProviderTiles","args":["CartoDB",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[40.7474203288567,40.854439102414,40.6163702698326,40.8619373819063,40.8245945314593,40.8507945879377,40.7449990917243,40.8434557238029,40.6793401551715,40.5842981139018,40.8419598161055,40.8701224496998,40.86640486877,40.7189335842746,40.8315271048226,40.8705992989407,40.8526700144354,40.8843362868781,40.8250227912721,40.8581477847766,40.8580525089966,40.8265223456037,40.7646836819858,40.8733629731603,40.8815412638198,40.8419598294788,40.7050199210352,40.8695858454768,40.5995784407901,40.6961769227793,40.7093912026895,40.6397306190582,40.6653465301246,40.6654653503632,40.8452048833575,40.8251199396662,40.8651541764459,40.6676357220332,40.8191854059098,40.8661478579582,40.6523712396678,40.8121910585469,40.6910256353927,40.8231035905069,40.6473882704966,40.8797701019455,40.640895200029,40.7064410640952,40.6364676645415,40.8435152026885,40.8325837358788,40.8725138281121,40.8642607213825,40.879228024835,40.8677156645684,40.6699890386793,40.8664950875277,40.7890499806486,40.8285926386572,40.6474473444182,40.9056449287267],[-73.8768530099747,-73.8984233658015,-74.0382669445725,-73.9271458041397,-73.8772991398564,-73.8665370399772,-73.8929675751253,-73.9247047538799,-73.9304350587699,-73.9562899226792,-73.8577253902482,-73.884005380884,-73.8941135147973,-73.9594699997005,-73.9288630322153,-73.8860293453483,-73.8648596549264,-73.8975242030086,-73.8773778412492,-73.9055790757506,-73.8909130551251,-73.9228160872737,-73.9271835984115,-73.9006218250274,-73.896483399823,-73.8577362326777,-73.9137668317762,-73.8826323689233,-74.0034533856772,-73.9357403108315,-73.9486116363775,-74.0181601011166,-73.9338091209489,-73.9520013464168,-73.882863331059,-73.9538915280206,-73.8950880518057,-73.9570535775924,-73.9527684114552,-73.919071475929,-73.9550632515203,-73.9064896077553,-73.9543304309358,-73.9245724184046,-73.9592431899613,-73.9050891105516,-73.962446848912,-73.8020622279824,-74.0287016455361,-73.8866720963765,-73.8692006882246,-73.8875338572785,-73.9208236073806,-73.8723526365327,-73.8816124688068,-73.9357294931035,-73.8967490589443,-73.9758622327465,-73.9488845315162,-73.9556971998641,-73.8490261588289],2,null,null,{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":0.5,"fill":true,"fillColor":["#A50F15","#A50F15","#FB6A4A","#FC9272","#FC9272","#FC9272","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FCBBA1","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9","#FEE5D9"],"fillOpacity":0.8},null,null,null,null,["4015110001","2031430130","3061207502","1021740175","2037140054","2042850005","4013120010","2025370047","3016910012","3087640010","2039447501","2032920019","2033040010","3023180029","2025110068","2032970011","2042920001","2032630007","2037150017","2031960010","2030570011","2024590034","4005790036","2032500071","2032580190","2039447501","4034320068","2032810040","3064670012","3015860047","3030220025","3057910021","3014190006","3012960052","2031240001","1020880114","2031680049","3012870033","1019880098","1022270021","3050840097","2025820034","3017780038","2024580026","3051020063","2057050036","3051590023","4097620039","3058700037","2031070036","2037840021","2033100081","1022190001","2033560146","2032740027","3013890016","2031910045","1012350042","1020950033","3051270082","2051150024"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#FEE5D9","#FCBBA1","#FC9272","#FB6A4A","#DE2D26","#A50F15"],"labels":["0 &ndash; 2,000","2,000 &ndash; 4,000","4,000 &ndash; 6,000","6,000 &ndash; 8,000","8,000 &ndash; 10,000","10,000 &ndash; 12,000"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"bin","title":"Heat/Hot Water 311 Complaints","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[40.5842981139018,40.9056449287267],"lng":[-74.0382669445725,-73.8020622279824]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="section-8" class="level7">
<p class="heading"></p>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Ethical Considerations
</div>
</div>
<div class="callout-body-container callout-body">
<p>As noted in the introductory paragraphs, 311 can both over-count and under-count certain quality of life concerns in New York City. It can be a valuable tool for activists trying to draw attention to certain issues, and it can also be weaponized against certain communities when complaints are issued against an establishment in a discriminatory way. Despite this, the data is often used by city decision-makers to determine where to prioritize resources and services. What is the value of 311 data? When and wow should it be used?</p>
</div>
</div>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>